app.service("ApiService",["$http","$q","$rootScope",function(e,t,n){function i(t,n,i,a){null==a&&(a=!0),null==t&&(t=void 0);var r={};r["Content-Type"]="application/json";var o=e({ignoreLoadingBar:!a,method:"post",data:angular.toJson(t),url:n+"?timezone=UTC",params:i,timeout:9e4,isApi:!0,headers:r});return o.then(d,u)}function a(t,n,i,a){null==i&&(i=!0);var r={};a||(a=15e3);var o=e({ignoreLoadingBar:!i,method:"get",url:t,params:n,timeout:a,isApi:!0,headers:r});return n?n.timezone||(o.url+="?timezone=UTC"):o.url+="?timezone=UTC",o.then(d,u)}function r(t,n,i,a){null==i&&(i=!0);var r={};a||(a=25e3),r.Accept="application/pdf";var o=e({ignoreLoadingBar:!i,method:"get",url:t,params:n,timeout:a,isApi:!0,headers:r,responseType:"arraybuffer"});return n?n.timezone||(o.url+="?timezone=UTC"):o.url+="?timezone=UTC",o.then(d,u)}function o(t,n,i){null==i&&(i=!0);var a={},r=utils.getQueryParameters(t);null==r.timezone&&(r.timezone="UTC"),null==r.limit&&(r.limit=50),_.each(n,function(e,t){null!=r[t]&&delete r[t]}),t.indexOf("?")>0&&(t=t.substring(0,t.indexOf("?"))),t=utils.appendParams(t,r);var o=e({ignoreLoadingBar:!i,method:"get",url:t,params:n,timeout:25e3,isApi:!0,headers:a});return o.then(d,u)}function s(t,n,i,a){null==i&&(i=!0);var r={};a&&(token="Bearer "+a);var o=e({ignoreLoadingBar:!i,method:"delete",url:t+"?timezone=UTC",params:n,timeout:15e3,isApi:!0,headers:r});return o.then(d,u)}function l(t,n,i,a,r){null==r&&(r=!0);var o={};o["Content-Type"]=void 0;var s=new FormData;n&&s.append("file",n),Object.keys(t).forEach(function(e,n){s.append(e,t[e])});var l=e({ignoreLoadingBar:!r,method:"post",data:s,transformRequest:angular.identity,url:i+"?timezone=UTC",params:a,timeout:6e5,isApi:!0,isMultipart:!0,headers:o});return l.then(d,u)}function c(e){return"/api/v1"+e}function u(e){var n={};return e.data.error?403==e.data.error.status?(n.code="error",n.message="It appears that you don't have permissions to access page or function you have requested. If you feel this is incorrect, please contact an account administrator.",n.status=e.status,t.reject(n)):t.reject(e.data.error):(n.code="error",n.message=e.statusText,n.status=e.status,t.reject(n))}function d(e){return e.data}return{set:i,getItem:a,getList:o,remove:s,multipartForm:l,buildUrl:c,getItemPdf:r}}]),app.controller("GrowlsCtrl",["$scope","$timeout",function(e,t){e.growls=[],e.$on("event:growl",function(n,i){e.growls.push(i),i.duration>0&&t(function(){e.growls=_.without(e.growls,_.findWhere(e.growls,{id:i.id}))},1e3*i.duration,!0)}),e.clearGrowl=function(t){e.growls=_.without(e.growls,_.findWhere(e.growls,{id:t}))}}]),app.controller("LangCtrl",["$scope","gettextCatalog","ApiService","tmhDynamicLocale",function(e,t,n,i){e.switchLanguage=function(e){"en"!=e&&t.loadRemote("languages/"+e+"/"+e+".json"),t.setCurrentLanguage(e),localStorage.setItem("language",e),i.set(utils.getLocale(localStorage.getItem("language"))),n.set({language:e},n.buildUrl("/users/me"))}}]),app.directive("isValidPrice",function(){return{restrict:"A",require:"ngModel",link:function(e,t,n,i){i.$validators.characters=function(e,t){var i=e||t;if("true"==n.allowEmptyPrice&&(""==i||null==i))return!0;var a=utils.cleanPrice(i);return 0!=utils.isValidNumber(a)&&(!(n.lessThanOrEqual&&parseFloat(a)>parseFloat(n.lessThanOrEqual))&&(!(n.lessThan&&parseFloat(a)>=parseFloat(n.lessThan))&&(!(n.greaterThanOrEqual&&a<n.greaterThanOrEqual)&&!(n.greaterThan&&a<=n.greaterThan))))}}}}),app.directive("isValidInteger",function(){return{restrict:"A",require:"ngModel",link:function(e,t,n,i){i.$validators.characters=function(e,t){var i=e||t;return"true"==n.allowEmptyValue&&(""==i||null==i)||0!=utils.isValidInteger(i)&&(!(n.lessThanOrEqual&&Number(i)>Number(n.lessThanOrEqual))&&(!(n.lessThan&&Number(i)>=Number(n.lessThan))&&(!(n.greaterThanOrEqual&&Number(i)<Number(n.greaterThanOrEqual))&&!(n.greaterThan&&Number(i)<=Number(n.greaterThan)))))}}}}),app.directive("isValidNumber",function(){return{restrict:"A",require:"ngModel",link:function(e,t,n,i){i.$validators.characters=function(e,t){var i=e||t;return"false"==n.isValidNumber||("true"==n.allowEmptyValue&&(""==i||null==i)||0!=utils.isValidNumber(i)&&(!(n.lessThanOrEqual&&Number(i)>Number(n.lessThanOrEqual))&&(!(n.lessThan&&Number(i)>=Number(n.lessThan))&&(!(n.greaterThanOrEqual&&Number(i)<Number(n.greaterThanOrEqual))&&!(n.greaterThan&&Number(i)<=Number(n.greaterThan))))))}}}}),app.directive("isValidUrl",function(){return{restrict:"A",require:"ngModel",link:function(e,t,n,i){i.$validators.characters=function(e,t){var i=e||t;return"true"==n.allowEmptyValue&&(""==i||null==i)||/^(?:(?:https?|ftp):\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})))(?::\d{2,5})?(?:\/\S*)?$/i.test(i)}}}}),app.directive("isValidEmail",function(){return{restrict:"A",require:"ngModel",link:function(e,t,n,i){i.$validators.characters=function(e,t){var i=e||t;return"true"==n.allowEmptyValue&&(""==i||null==i)||/\S+@\S+\.\S+/.test(i)}}}}),app.directive("allowEmpty",function(){return{restrict:"A",require:"ngModel",link:function(e,t,n,i){i.$validators.characters=function(e,t){var i=e||t;return"true"==n.allowEmpty||!utils.isNullOrEmpty(i)}}}}),app.directive("isUsernameAvailable",["$http","$q","ApiService",function(e,t,n){return{restrict:"A",require:"ngModel",link:function(e,i,a,r){r.$validators.invalid_characters=function(e,t){var n=e||t;return/^(?:(?!A-Za-z0-9\-\_\.).)+$/.test(n)},r.$asyncValidators.unavailable=function(e,i){var a=e||i,o=t.defer();if(""==a||null==a||void 0==a)return r.$setValidity("isUsernameAvailable",null),o.resolve(),o.promise;n.getItem(n.buildUrl("/users/"+a),!1).then(function(e){o.reject(e)},function(e){404==e.status?o.resolve(e):(r.validationUnknown=!0,o.resolve())});return o.promise}}}}]),app.directive("cleanPrice",[function(){return{restrict:"A",require:"ngModel",link:function(e,t,n,i){var a=function(e){if(!angular.isUndefined(e)){var t=utils.cleanPrice(e);return t!==e&&(i.$setViewValue(t),i.$render()),t}};i.$parsers.unshift(a),a(e[n.ngModel])}}}]),app.directive("maxLength",["$timeout",function(e){return{restrict:"A",scope:{item:"=?"},link:function(e,t,n,i){e.$watch("item.$viewValue",function(i){var a="",r=!1,o=!1,s=0;e.item&&e.item.$viewValue&&(s=e.item.$viewValue.length),Number(n.maxLength)-Number(s)>=0?(Number(s)<10?(a=n.maxLength+" characters maximum",r=!1,o=!1):Number(n.maxLength)-Number(s)<20?(a=Number(n.maxLength)-Number(s)+" characters remaining",r=!0,o=!1):(a="About "+10*Math.round((Number(n.maxLength)+4-Number(s))/10)+" characters remaining",r=!1,o=!1),e.item.$setValidity("maxlength",!0)):(a="Whoops! You've entered too many characters.",r=!1,o=!0,e.item.$setValidity("maxlength",!1)),t.removeClass("text-warning text-danger"),1==o&&t.addClass("text-danger"),1==r&&t.addClass("text-warning"),t.text(a)})}}}]),app.directive("sparkline",function(){return{restrict:"A",scope:{data:"=?sparkline",labels:"=?labels",values:"=?values"},link:function(e,t,n){e.$watch("data",function(n){var i={type:"line",width:"100%",height:"50px",fillColor:"",lineColor:"#fff",lineWidth:2,spotColor:"#ffffff",minSpotColor:"#ffffff",maxSpotColor:"#ffffff",highlightSpotColor:"#ffffff",highlightLineColor:"#ffffff",spotRadius:4,highlightLineColor:"#ffffff"};if(e.labels){var a={};_.each(e.labels,function(t,n){a[n]=e.values[n]}),i.tooltipFormat="{{offset:offset}}",i.tooltipValueLookups={offset:a}}t.pixelSparkline(n,i)})}}}),app.directive("sparkbar",function(){return{restrict:"A",scope:{data:"=?sparkbar",labels:"=?labels",values:"=?values"},link:function(e,t,n){e.$watch("data",function(i){var a=10,r=document.getElementById(n.id);if(null!=r&&null!=i){var o=r.offsetWidth;isNaN(o)||(a=parseInt(o/i.length)-2)}a<10&&(a=10),a>40&&(a=40);var s={type:"bar",height:"50px",barColor:"#fff",barSpacing:3,barWidth:a,zeroColor:"#ffffff",negBarColor:"#e66454"};if(e.labels){var l={};_.each(e.labels,function(t,n){l[n]=t+" "+e.values[n]}),s.tooltipFormat="{{offset:offset}}",s.tooltipValueLookups={offset:l}}t.pixelSparkline(i,s)})}}}),app.directive("donut",function(){return{restrict:"A",scope:{data:"=?donut"},link:function(e,t,n){e.$watch("data",function(e){_.each(e,function(e,t){e.color=utils.getColor(t),e.highlight=utils.getRelatedColor(e.color,-.15),e.label=utils.ucaseFirstLetter(e.label)}),toolTip="<%if (label){%><%=label%>: <%}%><%= value %>%",0==n.donutPercentage&&(toolTip="<%if (label){%><%=label%>: <%}%><%= value %>");var t=["easeInQuad","easeInCubic","easeInQuart","easeInQuint","easeInSine","easeInExpo","easeInCirc"],i=(t[Math.floor(Math.random()*t.length)],document.getElementById(n.id).getContext("2d"));new Chart(i).Doughnut(e,{responsive:!0,percentageInnerCutout:60,tooltipTemplate:toolTip,animationEasing:"easeInCubic",animationSteps:50})})}}}),app.directive("login",["$uibModal","authService","SettingsService","$sce","$rootScope",function(e,t,n,i,a){return{restrict:"A",link:function(r,o,s,l){r.getLoginUrl=function(){return i.trustAsResourceUrl(localStorage.getItem("signin_url")+"?iframe=true&msg=true&test="+a.settings.test)},r.$on("event:auth-loginRequired",function(i){if(!localStorage.getItem("signin_url")){var a=window.location.hostname.split(".");domain=a.slice(a.length-2).join(".");var o=a.slice(0,1)[0],s="";return o.indexOf("-")>-1&&(s=o.substring(o.indexOf("-"))),void(window.location="https://signin"+s+"."+domain)}if(null==r.openLogin){r.openLogin=e.open({size:"sm",templateUrl:"/login/login.html",backdrop:"static",keyboard:"false"});var l=window.addEventListener?"addEventListener":"attachEvent",c=window[l],u="attachEvent"==l?"onmessage":"message";c(u,function(e){var i=e.message?"message":"data",a=e[i];"loginSuccess"==a?(null!=r.openLogin&&(r.openLogin.close(),delete r.openLogin),r.$broadcast("event:loginSuccess"),n.setUserSettings(),t.loginConfirmed()):(r.$broadcast("event:loginFailure"),delete r.openLogin)},!1)}})}}}]),app.directive("selectOnClick",function(){return{restrict:"A",link:function(e,t,n){t.on("click",function(){this.select()})}}}),app.directive("focus",function(){return{restrict:"A",link:function(e,t,n){t[0].focus()}}}),app.directive("resource",function(){return{restrict:"A",link:function(e,t,n){0==utils.hasPermission(n.resource,n.method)&&t[0].remove()}}}),app.directive("dropzone",["ApiService",function(e){return function(t,n,i){var a=i.dropzoneUrl,r=utils.getQueryParameters(a);null==r.timezone&&(r.timezone="UTC"),a.indexOf("?")>0&&(a=a.substring(0,a.indexOf("?"))),a=utils.appendParams(a,r);var o=parseInt(i.dropzoneMaxFiles);isNaN(o)&&(o=1);var s=parseInt(i.dropzoneMaxSize);isNaN(s)&&(s=1e7);var l=!1;null!=i.dropzoneAutoUpload&&"true"==i.dropzoneAutoUpload&&(l=!0);var c=!0;null!=i.dropzoneShowDelete&&"false"==i.dropzoneShowDelete&&(c=!1);var u=i.dropzoneImageUrlName,d=i.dropzoneTemplateId,p=i.dropzoneFiletypes;if(null!=p)var h=p.split(",");var f=document.querySelectorAll(".dropzone-max-size");_.each(f,function(e){e.innerHTML=s/1e6+" MB"}),f=document.querySelectorAll(".dropzone-max-files"),_.each(f,function(e){e.innerHTML=o}),f=document.querySelectorAll(".dropzone-filetypes"),_.each(f,function(e){null!=p&&(e.innerHTML=p.split(",").join(", "))});var d=document.querySelector("#"+d).innerHTML;1==l&&(document.querySelector("#dz-file-upload-button").classList.add("hidden"),document.querySelector("#dz-file-remove-button").classList.add("hidden"));var m=document.querySelector("#dz-preview").innerHTML,g={url:e.buildUrl(a),paramName:i.dropzoneParameterName,dictDefaultMessage:d,previewTemplate:m,headers:{Authorization:"Bearer "+localStorage.getItem("token")},autoProcessQueue:l,uploadMultiple:!1,parallelUploads:4,maxFiles:o,maxFilesize:2e9},v=function(e){var t=document.querySelectorAll(".dz-default");_.each(t,function(e){e.classList.add("hidden")})},b=function(){var e=document.querySelectorAll(".dz-default");e[0].classList.remove("hidden")},y=function(e){e.previewTemplate.querySelector("#dz-file-upload-button").classList.remove("hidden"),e.previewTemplate.querySelector("#dz-file-remove-button").classList.remove("hidden")},w=function(e){e.previewTemplate.querySelector("#dz-file-upload-button").classList.add("hidden"),e.previewTemplate.querySelector("#dz-file-remove-button").classList.add("hidden")},S=function(e){var t=e.previewTemplate.querySelector("#dz-file-upload-progress");t.classList.add("progress-striped"),t.classList.add("active"),t=e.previewTemplate.querySelector("#dz-file-upload-progress-bar"),t.classList.add("progress-bar-info"),t.classList.remove("progress-bar-danger"),t.style.width=0,e.previewTemplate.querySelector("#dz-file-upload-error").classList.add("hidden"),e.previewTemplate.querySelector("#dz-file-upload-error-message").innerHTML=""},k=function(e){S(e),w(e),t.$emit("uploadSending",!0)},A=function(e,n,i){var a=n.previewTemplate.querySelector("#dz-file-upload-progress");a.classList.remove("progress-striped"),a.classList.remove("active"),a=n.previewTemplate.querySelector("#dz-file-upload-progress-bar"),a.classList.remove("progress-bar-info"),a.classList.add("progress-bar-success"),t.$emit("uploadComplete",i),t.$emit("uploadSending",!1),null!=u&&null!=i[u]&&(a=n.previewTemplate.querySelector("#dz-image-preview"),a.src=i[u],a.classList.remove("hidden")),1==c&&(a=n.previewTemplate.querySelector("#dz-file-delete-button"),a.classList.remove("hidden"),a.addEventListener("click",function(e){t.$emit("uploadDelete",i,n)}))},x=function(e,n,i){var a=n.previewTemplate.querySelector("#dz-file-upload-progress");a.classList.remove("progress-striped"),a.classList.remove("active"),a=n.previewTemplate.querySelector("#dz-file-upload-progress-bar"),a.classList.remove("progress-bar-info"),a.classList.add("progress-bar-danger"),t.$emit("uploadSending",!1),n.previewTemplate.querySelector("#dz-file-upload-error").classList.remove("hidden"),i.error&&(n.previewTemplate.querySelector("#dz-file-upload-error-message").innerHTML=i.error.message),y(n),e.options.autoProcessQueue=!1;for(var n,r=0,o=e.files.length;r<o;r++)n=e.files[r],n.status=Dropzone.QUEUED,n.upload.progress=0,n.upload.bytesSent=0,n.upload.total=0},C=function(e){0==e.files.length&&b()},T=function(e,t){if(t.previewTemplate.querySelector("#dz-file-upload-button").classList.remove("hidden"),t.previewTemplate.querySelector("#dz-file-remove-button").classList.remove("hidden"),e.files.length>=o&&v(e),e.files.length>o&&e.removeFile(t),h){var n=t.name.substr(t.name.lastIndexOf(".")+1);h.indexOf(n)==-1&&(t.previewTemplate.querySelector("#dz-file-upload-button").classList.add("hidden"),t.previewTemplate.querySelector("#dz-file-upload-error").classList.remove("hidden"),t.previewTemplate.querySelector("#dz-file-upload-error-message").innerHTML="Invalid file type. Allowed types are: "+h.join(", "))}t.size>s&&(t.previewTemplate.querySelector("#dz-file-upload-button").classList.add("hidden"),t.previewTemplate.querySelector("#dz-file-upload-error").classList.remove("hidden"),t.previewTemplate.querySelector("#dz-file-upload-error-message").innerHTML="File too large. Max size: "+s/1e6+" MB");var i=t.previewTemplate.querySelector("#dz-file-upload-button");i.addEventListener("click",function(){e.getQueuedFiles().length>0?e.processQueue():e.uploadFiles([])})},M=new Dropzone(n[0],g);M.on("sending",function(e,t,n){k(e)}),M.on("success",function(e,t){A(this,e,t)}),M.on("error",function(e,t){x(this,e,t)}),M.on("removedfile",function(e){C(this)}),M.on("addedfile",function(e){T(this,e)});var E=t.$on("uploadCanceled",function(){E(),M.removeAllFiles(!0)});t.$on("uploadDeleted",function(e,t){t.previewTemplate.classList.add("hidden")});t.$watch(i.dropzoneHide,function(e,t){if(e!=t)if(1==e)for(var n=document.querySelectorAll(".dz-default"),i=0;i<n.length;i++)n[i].classList.add("hidden");else for(var n=document.querySelectorAll(".dz-default"),i=0;i<n.length;i++)n[i].classList.remove("hidden")})}}]),app.directive("permissions",["ApiService",function(e){return{restrict:"E",templateUrl:"app/templates/permissions.html",scope:{effectivePermissions:"=?effective",result:"=?"},link:function(t,n,i,a){t.$watch("effectivePermissions",function(e,n){u(t.permissionItems,t.effectivePermissions)},!0),t.checkedItems=[],t.permissionItems=[],t.allow={},t.allow.all=!0;var r=function(){e.getItem(e.buildUrl("/auths/options"),{type:i.authType}).then(function(e){t.permissionItems=e.permissions,t.permissionItems.unshift({resource:"*",methods:["read","create","update","delete"]}),u(t.permissionItems,t.effectivePermissions)})};r();var o=function(e,n){var i=_.findWhere(t.checkedItems,{resource:e});if(null==i){var a={};a.methods=[],a.resource=e,a.methods.push(n),t.checkedItems.push(a)}else i.methods.push(n),i.methods=_.uniq(i.methods)},s=function(e,n){var i=_.findWhere(t.checkedItems,{resource:e});null!=i&&(i.methods=_.without(i.methods,n),"*"!=e&&s("*",n))},l=function(e){_.each(t.permissionItems,function(t){o(t.resource,e)})},c=function(e){_.each(t.permissionItems,function(t){s(t.resource,e)})};t.checkToggle=function(e,n){if(t.isChecked(e,n))s(e,n),"*"==e&&c(n);else if(o(e,n),"*"==e)l(n);else{var i=!0;_.each(t.permissionItems,function(e){e.methods.indexOf(n)>=0&&"*"!=e.resource&&0==t.isChecked(e.resource,n)&&(i=!1)}),1==i&&o("*",n)}t.result=d(t.checkedItems)},t.isChecked=function(e,n){var i=_.findWhere(t.checkedItems,{resource:e});return null!=i&&!(_.indexOf(i.methods,n)<0)};var u=function(e,n){if(null!=n&&null!=e){_.each(e,function(e){utils.hasProperty(n,e.resource)&&_.each(n[e.resource],function(t,n){1==t&&o(e.resource,n)})});var i={};i.read=!0,i.create=!0,i.update=!0,i.delete=!0,_.each(e,function(e){_.each(e.methods,function(n){0==t.isChecked(e.resource,n)&&"*"!=e.resource&&(i[n]=!1)})}),_.each(i,function(e,t){1==e?o("*",t):s("*",t)})}};t.allowsMethod=function(e,n){var i=_.findWhere(t.permissionItems,{resource:e});return null!=i&&_.indexOf(i.methods,n)>=0};var d=function(e){var n=angular.copy(e),i=_.findWhere(n,{resource:"*"});null!=i&&_.each(i.methods,function(e){_.each(n,function(t){"*"!=t.resource&&(t.methods=_.without(t.methods,e))})});var a=[];return _.each(n,function(e){e.methods.length>0&&a.push(e)}),_.each(a,function(e){e.allow=t.allow.all}),0==t.allow.all&&a.push({resource:"*",methods:["*"],allow:!0}),a}}}}]),app.directive("refund",["ApiService","ConfirmService","HelperService","GrowlsService","$uibModal",function(e,t,n,i,a){return{restrict:"A",scope:{payment:"=?",order:"=?",refunds:"=?",items:"=?",shippingItem:"=?"},link:function(r,o,s,l){o.click(function(){var o="";r.payment?o=r.payment.currency:r.order&&(o=r.order.currency),r.refund={currency:o},r.refund.disabled=!1,r.refund.reason=null,r.refund.reasons=[],r.refund.show_chargeback=!1,(n.isAgent||n.isAdmin)&&(r.refund.show_chargeback=!0),r.resource={total:0,shipping:0,tax:0,url:""},r.payment&&(r.resource={total:r.payment.total,shipping:r.payment.shipping,tax:r.payment.tax,url:r.payment.url}),r.order&&(url=r.order.url,r.resource={total:r.order.total,shipping:r.order.shipping,tax:r.order.tax,url:r.order.url}),e.getItem(e.buildUrl("/refunds/options")).then(function(e){r.refund.reasons=e.refund_reasons,r.refund.chargeback_reasons=e.chargeback_reasons},function(e){window.scrollTo(0,0),r.modalError=e}),r.activeTab=0,r.showItemsTab=!0,r.refund.items=[],_.each(r.items,function(e,t){var e=_.pick(e,"item_id","name","quantity","price","subtotal","tax","total","tax_rate");e.order_quantity=e.quantity,e.quantity=null,r.refund.items.push(e),0==r.refund.items.length&&(r.activeTab=1,r.showItemsTab=!1)}),r.refund.shipping_item=null,r.shippingItem&&(r.refund.shipping_item=r.shippingItem);var s=a.open({size:"lg",templateUrl:"app/modals/refund.html",scope:r});s.result.then(function(e){r.modalError=null},function(){r.modalError=null}),r.refund.ok=function(e){if(r.modalError=null,!e.$invalid){if(!(0!=utils.sumProperties(r.refund.items,"quantity")||0!=r.refund.shipping_quantity&&r.refund.shipping_quantity||null!=r.refund.total&&0!=parseFloat(r.refund.total)))return void(r.modalError={message:"Please supply an amount or select items to refund."});if(parseFloat(r.refund.getItemsTotal(r.refund.items,r.refund.shipping_quantity))>parseFloat(r.refund.getUnrefundedTotal())||parseFloat(r.refund.total)>parseFloat(r.refund.getUnrefundedTotal()).toFixed(2))return void(r.modalError={message:"The refund amount plus any previous refund amounts cannot be greater than the payment total. The maximum remaining refund for this payment is: "+parseFloat(r.refund.getUnrefundedTotal()).toFixed(2)+" "+r.refund.currency});if(null==r.refund.total&&0==r.refund.getItemTotalQuantities(r.refund.items)&&!r.refund.shipping_quantity)return void(r.modalError={message:"Please indicate what should be refunded"});if(1==r.refund.is_chargeback)var n={id:"process_chargeback"};else var n={id:"process_refund"};n.onConfirm=function(){l(r.refund.items,r.refund.total)},t.showConfirm(r,n)}};var l=function(t,n){r.refund.disabled=!0;var a={};n?a.total=n:(a.items=[],_.each(r.refund.items,function(e){e.quantity&&a.items.push(_.pick(e,"quantity","item_id"))}),1==r.refund.shipping_quantity&&(a.shipping=r.shippingItem.total)),a.items&&0==a.items.length&&delete a.items,a.reason=r.refund.reason,a.is_chargeback=r.refund.is_chargeback,e.set(a,r.resource.url+"/refunds",{expand:"fees,items,refunds.fees,refunds.items"}).then(function(e){var t=[];e.refunds?_.each(e.refunds,function(e){t.push(e)}):t.push(e),r.refunds=r.refunds.concat(t),utils.roundCurrency(r.refund.getUnrefundedTotal())<=0&&(r.order&&(r.order.payment_status="refunded"),r.payment&&(r.payment.status="refunded")),_.each(t,function(e){0==e.success?i.addGrowl({id:"refund_failure",amount:e.total.toFixed(2)+" "+e.currency,type:"warning",url:"/#/refunds/"+e.refund_id}):0==e.is_chargeback?i.addGrowl({id:"refund_success",type:"success",amount:e.total.toFixed(2)+" "+e.currency,url:"/#/refunds/"+e.refund_id}):i.addGrowl({id:"chargeback_success",type:"success",amount:e.total.toFixed(2)+" "+e.currency,url:"/#/refunds/"+e.refund_id})}),s.close()},function(e){window.scrollTo(0,0),r.modalError=e})};r.refund.cancel=function(){s.dismiss()},r.refund.getItemTotal=function(e,t,n){return n?(e*n*(1+t)).toFixed(2):0},r.refund.getShippingTotal=function(e){return e?r.shippingItem.total:0},r.refund.getItemsTotal=function(e,t){var n=0;return _.each(e,function(e){e.quantity&&(n+=100*parseFloat(e.price*parseFloat(e.quantity)*(1+e.tax_rate))/100)}),t&&(n+=r.shippingItem.total),n>0?n.toFixed(2):(0).toFixed(2)},r.refund.getItemTotalQuantities=function(e){var t=0;return _.each(e,function(e){e.quantity&&(t+=parseInt(e.quantity))}),t},r.refund.clearTotal=function(){r.refund.total=null},r.refund.clearQuantities=function(){_.each(r.refund.items,function(e){e.quantity=null}),r.refund.shipping_quantity=null},r.refund.getAmountShipping=function(e){if(e==r.resource.total)return r.resource.shipping;var t=e/r.resource.total;return Math.round(r.resource.shipping*t*100)/100},r.refund.getAmountTax=function(e){if(e==r.resource.total)return r.resource.tax;var t=e/r.resource.total;return Math.round(r.resource.tax*t*100)/100},r.refund.getAmountSubtotal=function(e){return e-r.refund.getAmountShipping(e)-r.refund.getAmountTax(e)},r.refund.getAmountTotal=function(e){return null==e?0:e},r.refund.getUnrefundedTotal=function(){var e=_.filter(r.refunds,function(e){return _.contains(["completed","pending"],e.status)}),t=utils.sumProperties(e,"total");return utils.roundCurrency(r.resource.total-t)},r.refund.getUnrefundedQuantity=function(e){var t=0,n=_.filter(r.refunds,function(e){return _.contains(["completed","pending"],e.status)});return _.each(n,function(n){if(null!=n.items){var i=_.where(n.items,{item_id:e.item_id});_.each(i,function(e){t+=e.quantity})}}),_.find(r.items,{item_id:e.item_id}).quantity-t};var c=!1;_.each(r.items,function(e){if(e.price+e.tax/e.quantity<=parseFloat(r.refund.getUnrefundedTotal())&&r.refund.getUnrefundedQuantity(e)>0)return void(c=!0)}),0==c&&(r.activeTab=1,r.showItemsTab=!1)})}}}]),app.directive("void",["ApiService","ConfirmService","GrowlsService","$uibModal",function(e,t,n,i){return{restrict:"A",scope:{payment:"=?",order:"=?",error:"=?"},link:function(i,a,r,o){a.click(function(){var a=function(){var t="";t=i.order?i.order.url+"/void":i.payment.url+"/void",e.set(null,t).then(function(e){var t=[];e.payments?_.each(e.payments,function(e){t.push(e)}):t.push(e),i.payment&&(i.payment.status="cancelled"),_.each(t,function(e){"pending"==e.status?n.addGrowl({id:"void_failure",type:"warning",url:"/#/payments/"+e.payment_id,payment_id:e.payment_id}):n.addGrowl({id:"void_success",type:"success",url:"/#/payments/"+e.payment_id,payment_id:e.payment_id})})},function(e){window.scrollTo(0,0),i.error=e})},r={id:"void_payment"};r.onConfirm=function(){a()},t.showConfirm(i,r)})}}}]),app.directive("capture",["ApiService","ConfirmService","GrowlsService","$uibModal",function(e,t,n,i){return{restrict:"A",scope:{payment:"=?",order:"=?",shippingItem:"=?"},link:function(a,r,o,s){r.click(function(){a.capturePayment={},a.capturePayment.disabled=!1,a.capturePayment.items=[],a.activeTab=0,a.showItemsTab=!0,a.order?(a.capturePayment.original_total=a.order.total,a.capturePayment.original_tax=a.order.tax,a.capturePayment.original_shipping=a.order.shipping,_.each(a.order.items,function(e,t){var e=_.pick(e,"order_id","item_id","name","description","quantity","price","subtotal","tax","total","tax_rate");e.order_quantity=e.quantity,e.quantity=null,a.capturePayment.items.push(e)}),a.order.shipping_item&&(a.capturePayment.shipping_item=a.order.shipping_item)):(a.capturePayment.original_total=a.payment.total,a.capturePayment.original_tax=a.payment.tax,a.capturePayment.original_shipping=a.payment.shipping,a.activeTab=1,a.showItemsTab=!1);var r=i.open({size:"lg",templateUrl:"app/modals/capture_payment.html",scope:a});r.result.then(function(e){a.modalError=null},function(){a.modalError=null}),a.capturePayment.ok=function(e){if(a.modalError=null,!e.$invalid){var n=!1;if(a.capturePayment.getItemTotalQuantities(a.capturePayment.items)>0&&a.capturePayment.getItemTotalQuantities(a.capturePayment.items)<a.capturePayment.getItemTotalQuantities(a.items)&&(n=!0),a.capturePayment.shipping_quantity&&0==a.capturePayment.getItemTotalQuantities(a.capturePayment.items)&&(n=!0),a.order&&!a.capturePayment.shipping_quantity&&a.order.shipping_item&&!a.capturePayment.total&&(n=!0),a.capturePayment.total&&parseFloat(a.capturePayment.total)<a.capturePayment.original_total&&(n=!0),null==a.capturePayment.total&&0==a.capturePayment.getItemTotalQuantities(a.capturePayment.items)&&!a.capturePayment.shipping_quantity)return void(a.modalError={message:"Please indicate what should be captured"});if(n){var i={id:"partial_capture_warning"};i.onConfirm=function(){o(a.capturePayment.items,a.capturePayment.total)},t.showConfirm(a,i)}else o(a.capturePayment.items,a.capturePayment.total)}};var o=function(t,i){a.capturePayment.disabled=!0;var o={};i?o.total=i:(o.items=[],_.each(a.capturePayment.items,function(e){e.quantity&&o.items.push(_.pick(e,"quantity","item_id"))}),a.order&&1==a.capturePayment.shipping_quantity&&(o.shipping=a.order.shipping_item.total));var s="";s=a.order?a.order.url+"/capture":a.payment.url+"/capture";var l={expand:"customer,response_data,items.shipments,gateway,fees,commissions,order,refunds,payment_method"};e.set(o,s,l).then(function(e){var t=[];e.payments?_.each(e.payments,function(e){t.push(e)}):t.push(e),a.order?0==_.filter(t,function(e){return"completed"!=e.status}).length&&(a.order.payment_status="completed"):a.payment.status="completed",_.each(t,function(e){"pending"==e.status?n.addGrowl({id:"payment_capture_failure",type:"warning",url:"/#/payments/"+e.payment_id,payment_id:e.payment_id}):n.addGrowl({id:"payment_capture_success",type:"success",url:"/#/payments/"+e.payment_id,payment_id:e.payment_id})}),r.close()},function(e){window.scrollTo(0,0),a.modalError=e})};a.capturePayment.cancel=function(){r.dismiss()},a.capturePayment.getItemTotal=function(e,t,n){return n?(e*n*(1+t)).toFixed(2):0},a.capturePayment.getShippingTotal=function(e){return e?a.order.shipping_item.total:0},a.capturePayment.getItemsTotal=function(e,t){var n=0;return _.each(e,function(e){e.quantity&&(n+=Math.round(100*parseFloat(e.price*parseFloat(e.quantity)*(1+e.tax_rate)))/100)}),a.order&&t&&(n+=a.order.shipping_item.total),n>0?n.toFixed(2):(0).toFixed(2)},a.capturePayment.getItemTotalQuantities=function(e){var t=0;return null!=e&&_.each(e,function(e){e.quantity&&(t+=parseFloat(e.quantity))}),t},a.capturePayment.clearTotal=function(){a.capturePayment.total=null},a.capturePayment.clearQuantities=function(){_.each(a.capturePayment.items,function(e){e.quantity=null})},a.capturePayment.getAmountShipping=function(e){if(e==a.capturePayment.original_total)return a.capturePayment.original_shipping;var t=e/a.capturePayment.original_total;return Math.round(a.capturePayment.original_shipping*t*100)/100},a.capturePayment.getAmountTax=function(e){if(e==a.capturePayment.original_total)return a.capturePayment.original_tax;var t=e/a.capturePayment.original_total;return Math.round(a.capturePayment.original_tax*t*100)/100},a.capturePayment.getAmountSubtotal=function(e){return e-a.capturePayment.getAmountShipping(e)-a.capturePayment.getAmountTax(e)},a.capturePayment.getAmountTotal=function(e){return null==e?0:e},a.loadTotal=function(e){return utils.cleanPrice(e)}})}}}]),app.directive("ship",["ApiService","ConfirmService","GrowlsService","CouriersService","$uibModal","$q",function(e,t,n,a,r,o){return{restrict:"A",scope:{order:"=?"},link:function(t,o,s,l){o.hide(),t.$watch("order.fulfilled",function(){t.order&&(0==t.order.fulfilled?o.show():o.hide())},!0),o.click(function(){t.shipItems={},t.shipItems.disabled=!1,t.shipItems.isFulfilled=function(e){return 0==e.shippableQuantity},t.shipItems.getShippableQuantity=function(e){var n=0;return _.each(t.order.shipments.data,function(t){var i=_.filter(t.items,function(t){return t.item_id==e.item_id});_.each(i,function(e){n+=e.quantity})}),e.quantity-n==0&&(e.fulfilled=!0),e.quantity-n},t.shipItems.shipments=[],_.each(t.order.items,function(e,n){if(0==e.fulfilled){var i=_.pick(e,"order_id","item_id","name","quantity");i.order_quantity=i.quantity,i.quantity=null,i.shippableQuantity=t.shipItems.getShippableQuantity(e),t.shipItems.shipments.push(i)}}),t.shipItems.dates=[];var o=utils.addDays(new Date(t.order.date_created),-1).setHours(0,0,0,0);for(i=1;i<utils.daysDiff(o,utils.addDays(new Date,5))&&(t.shipItems.dates.push(utils.addDays(new Date(o),i).setHours(0,0,0,0)),30!=i);i++);t.shipItems.date_shipped=(new Date).setHours(0,0,0,0),t.shipItems.courier=null,t.shipItems.couriers=a.getCouriers();var s=r.open({size:"lg",templateUrl:"app/modals/ship_items.html",scope:t});s.result.then(function(e){t.modalError=null},function(){t.modalError=null}),t.shipItems.ok=function(i){if(t.modalError=null,!i.$invalid){t.shipItems.disabled=!1;var a={};a.tracking_number=t.shipItems.tracking_number,a.tracking_url=t.shipItems.tracking_url,a.date_shipped=new Date(t.shipItems.date_shipped+60*new Date(t.shipItems.date_shipped).getTimezoneOffset()).toISOString(),0==utils.isNullOrEmpty(t.shipItems.courier)&&(a.courier=t.shipItems.courier),a.items=[];var r=0;_.each(t.shipItems.shipments,function(e,t){e.quantity&&0!=e.quantity&&(a.items.push(e),r++)}),e.set(a,e.buildUrl("/orders/"+t.order.order_id+"/shipments")).then(function(e){n.addGrowl({id:"shipment_success",count:r}),t.order.shipments.data.push(e);var i=0;_.each(t.order.items,function(e){0==e.fulfilled&&(i+=t.shipItems.getShippableQuantity(e))}),0==i&&(t.order.fulfilled=!0),s.close()},function(e){t.modalError=e})}},t.shipItems.cancel=function(){s.dismiss()}})}}}]),app.directive("cancelSubscription",["ApiService","ConfirmService","GrowlsService","$uibModal",function(e,t,n,i){return{restrict:"A",scope:{subscription:"=?"},link:function(a,r,o,s){r.hide(),a.$watch("subscription",function(){
a.subscription&&("active"!=a.subscription.status&&"trial"!=a.subscription.status||0!=a.subscription.cancel_at_current_period_end?r.hide():r.show())},!0),r.click(function(){a.subscription_cancel={},a.subscription_cancel.request={},a.subscription_cancel.request.cancel_at_current_period_end=!0,a.subscription_cancel.request.cancellation_reason=null,a.cancellation_reasons=[],e.getItem(e.buildUrl("/subscriptions/options")).then(function(e){a.cancellation_reasons=e.cancellation_reasons},function(e){window.scrollTo(0,0),a.modalError=e});var r=i.open({size:"lg",templateUrl:"app/modals/cancel_subscription.html",scope:a});r.result.then(function(e){a.modalError=null},function(){a.modalError=null}),a.subscription_cancel.ok=function(e){if(a.modalError=null,e.$invalid)return void(a.modalError={message:"Please select a reason"});var n={id:"cancel_subscription"};n.onConfirm=function(){o()},t.showConfirm(a,n)};var o=function(){var t={};1==a.subscription_cancel.request.cancel_at_current_period_end?t.cancel_at_current_period_end=!0:t.status="cancelled",t.cancellation_reason=a.subscription_cancel.request.cancellation_reason,e.set(t,a.subscription.url,{expand:"subscription_plan,customer.payment_methods,items.subscription_terms",formatted:!0}).then(function(e){a.subscription=e,r.dismiss(),n.addGrowl({id:"subscription_cancel_success",type:"success"})},function(e){window.scrollTo(0,0),a.modalError=e})};a.subscription_cancel.cancel=function(){r.dismiss()}})}}}]),app.directive("cancelSubscriptionItem",["ApiService","ConfirmService","GrowlsService","$uibModal",function(e,t,n,i){return{restrict:"A",scope:{subscription:"=?",item:"=?"},link:function(a,r,o,s){r.hide(),a.$watch("item",function(){a.item&&(0==a.item.cancelled&&0==a.item.cancel_at_current_period_end?r.show():r.hide())},!0),r.click(function(){a.subscription_cancel={},a.subscription_cancel.request={},a.subscription_cancel.request.cancel_at_current_period_end=!0,a.subscription_cancel.request.cancellation_reason=null,a.cancellation_reasons=[],e.getItem(e.buildUrl("/subscriptions/options")).then(function(e){a.cancellation_reasons=e.cancellation_reasons},function(e){window.scrollTo(0,0),a.modalError=e});var r=i.open({size:"lg",templateUrl:"app/modals/cancel_subscription_item.html",scope:a});r.result.then(function(e){a.modalError=null},function(){a.modalError=null}),a.subscription_cancel.ok=function(e){if(a.modalError=null,e.$invalid)return void(a.modalError={message:"Please select a reason"});var n={id:"cancel_subscription_item"};n.onConfirm=function(){o()},t.showConfirm(a,n)};var o=function(){var t={};1==a.subscription_cancel.request.cancel_at_current_period_end?t.cancel_at_current_period_end=!0:t.cancel_at_current_period_end=!1,t.cancellation_reason=a.subscription_cancel.request.cancellation_reason,e.set(t,a.item.url+"/cancel",{expand:"subscription.subscription_plan,subscription.customer.payment_methods,subscription.items.subscription_terms",formatted:!0}).then(function(e){a.subscription=e.subscription,r.dismiss(),n.addGrowl({id:"subscription_item_cancel_success",type:"success",name:e.name})},function(e){window.scrollTo(0,0),a.modalError=e})};a.subscription_cancel.cancel=function(){r.dismiss()}})}}}]),app.directive("objectList",["ApiService","$location",function(e,t){return{restrict:"A",templateUrl:function(e,t){return t.templateUrl},scope:{error:"=?",count:"=?",data:"=?",refreshOnChange:"=?",refreshOnChangeProperty:"=?",functions:"=?",refresh:"=?",meta:"=?",params:"=?"},link:function(n,i,a,r){n.list={},n.userParams={},n.settings={};var o=null,s=!0,l=n.params||{};n.params||(l.formatted=!0,"order"==a.type&&(l.show="date_created,order_id,fulfilled,total,payment_status,currency",o="date_created"),"subscription"==a.type&&(l.show="subscription_id,subscription_plan.name,subscription_plan.subscription_plan_id,status,date_current_period_start,date_current_period_end,date_created,date_modified,date_ended,in_grace_period;",l.expand="subscription_plan",o="date_created"),"payment"==a.type&&(l.show="payment_id,date_created,date_modified,status,success,total,currency",o="date_created"),"refund"==a.type&&(l.show="refund_id,date_created,date_modified,status,success,total,currency",o="date_created"),"shipment"==a.type&&(l.show="shipment_id,courier,tracking_url,tracking_number,date_shipped,items.name,items.quantity",o="date_shipped"),"cart"==a.type&&(l.show="cart_id,date_created,payment_status,total,date_modified,currency",o="date_modified"),"invoice"==a.type&&(l.show="invoice_id,date_created,date_due,payment_status,total,date_modified,currency",o="date_modified"),"app"==a.type&&(l.show="name,app_id,date_created,active,deleted,date_modified,images.link_square,installed,install_url,app_installation.launch_url,app_installation.app_installation_id",l.expand="images,app_installation",o="date_created"),"app_installation"==a.type&&(l.show="name,app_installation_id,alias,platform_hosted,date_created,image_url,short_description,info_url,launch_url,settings_fields,style_fields,version,is_default_version,updated_version_available,current_app_version,install_url,platform_hosted,location_url",l.expand="images",o="name",s=!1),"notification"==a.type&&(l.show="notification_id,date_created,type,status",l.limit=25,o="date_created"),"balance_transactions"==a.type&&(l.show="customer_balance_transaction_id,date_created,amount,current_balance,memo,payment.payment_id,refund.refund_id,currency",l.expand="payment,refund",l.limit=25,o="date_created")),utils.stringsToBool(a),n.settings.page=a.page,n.settings.search=!0,0==a.search&&(n.settings.search=!1);var c=function(){f(),n.userParams=t.search(),utils.stringsToBool(n.userParams),h()},u=function(t){var i=utils.appendParams(a.url,l);e.getList(i,n.userParams).then(function(e){n.list=e,n.count=e.total_items,n.data=e.data,1==t&0==a.embedded&&window.scrollTo(0,0),p(n.list)},function(e){n.error=e})},d=function(e){u(e)};n.refresh=function(){d()};var p=function(e){n.userParams.before_item=e.previous_page_before_item,n.userParams.after_item=e.previous_page_after_item,n.previous_page_offset=e.previous_page_offset,n.next_page_offset=e.next_page_offset},h=function(){"cursor"==n.settings.page?null==n.userParams.date_type&&(n.userParams.date_type=o):null==n.userParams.sort_by&&(n.userParams.sort_by=o),null!==n.userParams.desc&&void 0!==n.userParams.desc||(n.userParams.desc=s),null!==n.userParams.desc&&void 0!==n.userParams.desc||(n.userParams.desc=!0),null!=a.limit&&(n.userParams.limit=a.limit)},f=function(){n.userParams={}},m=function(){n.userParams.before_item=null,n.userParams.after_item=null,n.previous_page_offset=null,n.next_page_offset=null};if(n.movePage=function(e,i){"cursor"==n.settings.page?"+"==e?(n.userParams.after_item=i,n.userParams.before_item=null):(n.userParams.after_item=null,n.userParams.before_item=i):n.userParams.offset=i,0==a.embedded?t.search(n.userParams):d(!1)},n.setParam=function(e,i){f(),n.userParams[e]=i,h(),0==a.embedded?t.search(n.userParams):d(!1)},n.setParams=function(e){f();for(var i in e)e.hasOwnProperty(i)&&(n.userParams[i]=e[i]);h(),0==a.embedded?t.search(n.userParams):d(!1)},n.search=function(e){m(),n.userParams.q=e,h(),0==a.embedded?t.search(n.userParams):d(!1)},n.sort=function(e,i){"cursor"==n.settings.page?(n.userParams.date_type=e,n.userParams.before_item&&(n.userParams.after_item=n.userParams.before_item,n.userParams.before_item=null),n.userParams.after_item&&(n.userParams.before_item=n.userParams.after_item,n.userParams.after_item=null)):(n.userParams.sort_by=e,n.userParams.offset=null),n.userParams.desc=i,0==a.embedded?t.search(n.userParams):d()},n.getSortValue=function(){return"cursor"==n.settings.page?n.userParams.date_type:n.userParams.sort_by},0==a.embedded)var g=n.$on("$routeUpdate",function(e){c(),u(!0)});n.$on("$destroy",function(){g&&g()}),c(),h(),u(!0);var v=null;n.$watch("refreshOnChangeProperty",function(e,t){e&&e!=t&&void 0!=t&&d()}),n.$watchCollection("refreshOnChange",function(e,t){e&&t&&Array.isArray(e)&&Array.isArray(t)&&0!=e.length&&(_.isEqual(e,t)||(null!=n.refreshOnChange&&Array.isArray(n.refreshOnChange)&&null==v&&(v=n.refreshOnChange.length),null!=v&&Array.isArray(n.refreshOnChange)&&v!=n.refreshOnChange.length&&(d(),v=n.refreshOnChange.length)))})}}}]),app.directive("objectEdit",["ApiService","GrowlsService","GeographiesService",function(e,t,n){return{restrict:"E",templateUrl:function(e,t){return t.templateUrl},scope:{object:"=?",error:"=?",options:"=?",successCallback:"&"},link:function(i,a,r,o){i.item=null,utils.stringsToBool(r),i.displayCount=0,i.edit=!1,i.allowEdit=!0,0==r.allowEdit&&(i.allowEdit=!1),i.panelTitle=r.panelTitle;var s=null;0==utils.isNullOrEmpty(r.property)&&(s=r.property),i.$watch("object",function(){i.item=i.object});var l=[];null!=r.hide&&(l=r.hide.split(","));var c=[];null!=r.require&&(c=r.require.split(","));var u=n.getGeographies();i.countries=u.countries,i.showItem=function(e){return!(l.indexOf(e)>=0)},i.allowEmpty=function(e){return!(c.indexOf(e)>=0&&l.indexOf(e)<0)},i.openEdit=function(){i.orig=angular.copy(i.item),i.edit=!0},i.closeEdit=function(){i.item=i.orig,i.edit=!1},i.update=function(n){if(!n.$invalid){var a={};s?a[s]=i.item:a=i.item,e.set(a,r.updateUrl,{show:s}).then(function(e){s?i.object[s]=e[s]:i.object=e,t.addGrowl({id:"edit_success_no_link",type:"success"}),i.edit=!1,i.successCallback()},function(e){window.scrollTo(0,0),i.error=e})}}}}}]),app.directive("ledgerBreakdown",[function(){return{restrict:"E",templateUrl:"app/templates/ledgerBreakdown.html",scope:{currencyType:"=?",transactions:"=?",loadDetails:"=?",detailsUrl:"=?"},link:function(e,t,n,i){e.transactionItems=[],e.selected={},e.panelTitle=n.panelTitle,null==e.currencyType&&(e.currencyType="transaction"),e.toggleLoadDetails=function(){e.loadDetails=!e.loadDetails},e.load=function(t){if(e.transactionItems=[],Array.isArray(e.transactions)?e.transactionItems=e.transactions:utils.hasProperty(e.transactions,"object")&&e.transactionItems.push(e.transactions),e.selected.subtotal=0,e.selected.shipping=0,e.selected.tax=0,e.selected.total=0,e.currencyType=t,e.transactionItems.length>0){var i=t+"_";"transaction"==t&&(i=""),"refund"==e.transactionItems[0].object&&(e.isRefund=!0),e.transaction_currency=e.transactionItems[0].currency,e.settlement_currency=e.transactionItems[0].settlement_currency,e.reporting_currency=e.transactionItems[0].reporting_currency,e.reporting_alt_currency=e.transactionItems[0].reporting_alt_currency,e.selected.currency=e.transactionItems[0][i+"currency"],_.each(e.transactionItems,function(t){var a=!0;null!=n.includeStatus&&n.includeStatus.indexOf(t.status)==-1&&(a=!1),a&&(e.selected.subtotal=e.selected.subtotal+parseFloat(t[i+"subtotal"]),e.selected.shipping=e.selected.shipping+parseFloat(t[i+"shipping"]),e.selected.tax=e.selected.tax+parseFloat(t[i+"tax"]),e.selected.total=e.selected.total+parseFloat(t[i+"total"]))}),"refund"==e.transactionItems[0].object&&(e.selected.subtotal=e.selected.subtotal*-1,e.selected.shipping=e.selected.shipping*-1,e.selected.tax=e.selected.tax*-1,e.selected.total=e.selected.total*-1)}},e.showCurrencies=function(){return e.transactionItems.length>0&&(e.transactionItems[0].reporting_alt_currency?!utils.areEqual(e.transactionItems[0].currency,e.transactionItems[0].settlement_currency,e.transactionItems[0].reporting_currency,e.transactionItems[0].reporting_alt_currency):!utils.areEqual(e.transactionItems[0].currency,e.transactionItems[0].settlement_currency,e.transactionItems[0].reporting_currency))},e.$watchCollection("transactions",function(){e.load(e.currencyType)}),e.$watch("currencyType",function(){e.load(e.currencyType)})}}}]),app.directive("ledgerItems",[function(){return{restrict:"E",templateUrl:"app/templates/ledgerItems.html",scope:{items:"=?"},link:function(e,t,n,a){e.panelTitle=n.panelTitle,e.total=0,e.noItemsMessage=n.noItemsMessage,e.$watchCollection("items",function(){if(e.items&&e.items.length>0)for(e.currency=e.items[0].currency,i=0;i<e.items.length;i++)e.items[i].description=e.items[i][n.descriptionProperty],e.total+=e.items[i].total})}}}]),app.directive("paymentMethod",[function(){return{restrict:"E",templateUrl:"app/templates/paymentMethod.html",scope:{paymentMethodData:"=?"},link:function(e,t,n,i){e.panelTitle=n.panelTitle,e.transaction_type=n.transactionType,e.$watch("paymentMethodData",function(){e.paymentMethodData&&(e.transaction_id=n.transactionId)}),e.showItem=function(e){return!(hide.indexOf(e)>=0)}}}}]),app.directive("ledgerSale",[function(){return{restrict:"E",templateUrl:"app/templates/sale.html",scope:{sale:"=?"},link:function(e,t,n,i){e.prefs={},e.prefs.currency="transaction"}}}]),app.directive("fileSelect",["ApiService","ConfirmService","GrowlsService","$uibModal",function(e,t,n,i){return{restrict:"A",scope:{file:"=?",error:"=?"},link:function(n,a,r,o){a.click(function(){n.fileSelect={file:{}},n.fileSelect.params={},n.fileSelect.params.show="file_id,name,filename,version,bytes,description,date_created,date_modified",n.fileSelect.params.limit=5,n.fileSelect.params.sort_by="name",n.fileSelect.params.desc=!1,n.options={by_url:!1};var a=function(t){e.getList(t,n.fileSelect.params).then(function(e){n.fileList=e},function(e){n.modalError=e})};n.uploadByUrl=function(){var t=angular.copy(n.fileSelect.file);t.file_url=n.options.url,t.http_authorization_username=n.options.http_authorization_username,t.http_authorization_password=n.options.http_authorization_password,e.multipartForm(t,null,e.buildUrl("/files")).then(function(e){c.close(e)},function(e){n.modalError=e})};var r=!1,o=n.$on("uploadSending",function(e,t){r=t}),s=n.$on("uploadComplete",function(e,t){c.close(t)}),l=function(){s(),o()};a(e.buildUrl("/files")),utils.hasPermission("files","create")?n.fileSelectTabs=[{active:!0},{active:!1}]:n.fileSelectTabs=[{active:!1},{active:!0}];var c=i.open({size:"lg",templateUrl:"app/modals/file_select.html",scope:n,backdrop:"static"});c.result.then(function(e){l(),n.file=e,n.modalError=null},function(){l(),n.modalError=null}),n.fileSelect.ok=function(e){c.close(e)},n.fileSelect.cancel=function(){if(r){var e={id:"upload_cancel"};e.onConfirm=function(){n.$broadcast("uploadCanceled"),c.dismiss()},t.showConfirm(n,e)}else c.dismiss()},n.fileSelect.search=function(){n.fileSelect.params.q=n.fileSelect.q,a(e.buildUrl("/files"))},n.fileSelect.sort=function(t,i){n.fileSelect.params.sort_by=t,n.fileSelect.params.desc=i,a(e.buildUrl("/files"))},n.fileSelect.movePage=function(e){a("+"==e?n.fileList.next_page_url:n.fileList.previous_page_url)}})}}}]),app.directive("subscriptionPlanSelect",["ApiService","ConfirmService","GrowlsService","$uibModal","$rootScope",function(e,t,n,i,a){return{restrict:"A",scope:{subscriptionPlan:"=?",error:"=?"},link:function(t,n,r,o){n.click(function(){t.subscriptionPlanSelect={},t.subscriptionPlanSelect.params={},t.subscriptionPlanSelect.params.show="subscription_plan_id,name,billing_interval,billing_interval_unit,trial_interval,trial_interval_unit,description,date_created,end_at_billing_count,date_modified",t.subscriptionPlanSelect.params.limit=5,t.subscriptionPlanSelect.params.sort_by="name",t.subscriptionPlanSelect.params.desc=!1,t.subscriptionPlanSelect.order_confirmation_on_renewal=!0,t.subscriptionPlanSelect.fulfill_on_renewal=!0,t.subscription_plan={},t.subscription_plan.fulfill_on_renewal=!1,t.subscription_plan.order_confirmation_on_renewal=!0,t.settings=a.settings;var n=function(n){e.getList(n,t.subscriptionPlanSelect.params).then(function(e){t.subscriptionPlanList=e},function(e){t.modalError=e})};n(e.buildUrl("/subscription_plans")),utils.hasPermission("subscription_plans","create")?t.subscriptionPlanSelectTabs=[{active:!0},{active:!1}]:t.subscriptionPlanSelectTabs=[{active:!1},{active:!0}];var r=i.open({size:"lg",templateUrl:"app/modals/subscription_plan_select.html",scope:t});r.result.then(function(e){t.subscriptionPlan=e,t.modalError=null},function(){t.modalError=null}),t.subscriptionPlanSelect.ok=function(e){r.close(e)},t.subscriptionPlanSelect.cancel=function(){r.dismiss()},t.subscriptionPlanSelect.search=function(){t.subscriptionPlanSelect.params.q=t.subscriptionPlanSelect.q,n(e.buildUrl("/subscription_plans"))},t.subscriptionPlanSelect.sort=function(i,a){t.subscriptionPlanSelect.params.sort_by=i,t.subscriptionPlanSelect.params.desc=a,n(e.buildUrl("/subscription_plans"))},t.subscriptionPlanSelect.setParam=function(i,a){t.subscriptionPlanSelect.params[i]=a,n(e.buildUrl("/subscription_plans"))},t.subscriptionPlanSelect.create=function(n){n.$invalid||e.set(t.subscription_plan,e.buildUrl("/subscription_plans")).then(function(e){r.close(e)},function(e){t.modalError=e})},t.subscriptionPlanSelect.movePage=function(e){n("+"==e?t.subscriptionPlanList.next_page_url:t.subscriptionPlanList.previous_page_url)}})}}}]),app.directive("templateSelect",["ApiService","ConfirmService","GrowlsService","$uibModal","$rootScope",function(e,t,n,i,a){return{restrict:"A",scope:{template:"=?",error:"=?"},link:function(t,n,r,o){n.click(function(){t.templateSelect={},t.templateSelect.params={},t.templateSelect.params.show="template_id,comments,date_created,date_modified",t.templateSelect.params.limit=5,t.templateSelect.params.sort_by="name",t.templateSelect.params.desc=!1,t.template={},t.settings=a.settings;var n=function(n){e.getList(n,t.templateSelect.params).then(function(e){t.templateList=e},function(e){t.modalError=e})};n(e.buildUrl("/templates")),utils.hasPermission("templates","create")?t.templateSelectTabs=[{active:!0},{active:!1}]:t.templateSelectTabs=[{active:!1},{active:!0}];var r=i.open({size:"lg",templateUrl:"app/modals/template_select.html",scope:t});r.result.then(function(e){t.template=e,t.modalError=null},function(){t.modalError=null}),t.templateSelect.ok=function(e){r.close(e)},t.templateSelect.cancel=function(){r.dismiss()},t.templateSelect.search=function(){t.templateSelect.params.q=t.templateSelect.q,n(e.buildUrl("/templates"))},t.templateSelect.sort=function(i,a){t.templateSelect.params.sort_by=i,t.templateSelect.params.desc=a,n(e.buildUrl("/templates"))},t.templateSelect.setParam=function(i,a){t.templateSelect.params[i]=a,n(e.buildUrl("/templates"))},t.templateSelect.create=function(n){n.$invalid||e.set(t.template,e.buildUrl("/templates")).then(function(e){r.close(e)},function(e){t.modalError=e})},t.templateSelect.movePage=function(e){n("+"==e?t.templateList.next_page_url:t.templateList.previous_page_url)}})}}}]),app.directive("imagesSelect",["ApiService","ConfirmService","GrowlsService","$uibModal",function(e,t,n,i){return{restrict:"A",scope:{images:"=?",error:"=?"},link:function(n,a,r,o){a.click(function(){n.imagesSelect={},n.imagesSelect.limit=r.limit||15,n.imagesSelect.params={},n.imagesSelect.params.show="image_id,filename,reference,link_large,link_medium,link_small,link_square,link,date_created,date_modified",n.imagesSelect.params.limit=5,n.imagesSelect.params.sort_by="filename",n.imagesSelect.params.desc=!1;var a=function(t){e.getList(t,n.imagesSelect.params).then(function(e){n.imageList=e},function(e){n.modalError=e})},o=!1,s=n.$on("uploadSending",function(e,t){o=t}),l=n.$on("uploadComplete",function(e,t){n.$apply(function(){n.imagesSelect.queueImage(t)})}),c=n.$on("uploadDelete",function(i,a,r){var o={id:"delete"};o.onConfirm=function(){n.$broadcast("uploadDeleted",r),n.imagesSelect.dequeueImage(a),utils.hasPermission("images","delete")&&e.remove(a.url,null,!1)},t.showConfirm(n,o)}),u=function(){l(),s(),c()};a(e.buildUrl("/images")),utils.hasPermission("images","create")?n.imagesSelectTabs=[{active:!0},{active:!1}]:n.imagesSelectTabs=[{active:!1},{active:!0}];var d=i.open({size:"lg",templateUrl:"app/modals/image_select.html",scope:n,backdrop:"static"});d.result.then(function(){u(),n.images=n.imagesSelect.queue,n.modalError=null},function(){u(),n.modalError=null}),n.imagesSelect.queue=[],n.imagesSelect.queueToggle=function(e){n.imagesSelect.isQueued(e)?n.imagesSelect.dequeueImage(e):n.imagesSelect.queueImage(e)},n.imagesSelect.queueImage=function(e){n.imagesSelect.queue.length>=n.imagesSelect.limit&&n.imagesSelect.queue.shift(),n.imagesSelect.queue.push(e)},n.imagesSelect.dequeueImage=function(e){n.imagesSelect.queue=_.reject(n.imagesSelect.queue,{image_id:e.image_id})},n.imagesSelect.isQueued=function(e){return null!=_.findWhere(n.imagesSelect.queue,{image_id:e.image_id})},_.each(n.images,function(e){n.imagesSelect.queueImage(e)}),n.imagesSelect.ok=function(e){d.close(e)},n.imagesSelect.cancel=function(){if(o){var e={id:"upload_cancel"};e.onConfirm=function(){n.$broadcast("uploadCanceled"),d.dismiss()},t.showConfirm(n,e)}else d.dismiss()},n.imagesSelect.search=function(){n.imagesSelect.params.q=n.imagesSelect.q,a(e.buildUrl("/images"))},n.imagesSelect.sort=function(t,i){n.imagesSelect.params.sort_by=t,n.imagesSelect.params.desc=i,a(e.buildUrl("/images"))},n.imagesSelect.movePage=function(e){a("+"==e?n.imageList.next_page_url:n.imageList.previous_page_url)}})}}}]),app.directive("productsSelect",["ApiService","ConfirmService","GrowlsService","$uibModal",function(e,t,n,i){return{restrict:"A",scope:{products:"=?",error:"=?"},link:function(t,n,a,r){n.click(function(){t.productsSelect={},t.productsSelect.limit=a.limit||15,t.productsSelect.params={},t.productsSelect.params.show="product_id,name,date_created,date_modified,price,currency",t.productsSelect.params.limit=10,t.productsSelect.params.sort_by="name",t.productsSelect.params.desc=!1;var n=function(n){e.getList(n,t.productsSelect.params).then(function(e){t.productList=e},function(e){t.modalError=e})};n(e.buildUrl("/products"));var r=i.open({size:"lg",templateUrl:"app/modals/product_select.html",scope:t});r.result.then(function(){t.products=t.productsSelect.queue,t.modalError=null},function(){t.modalError=null}),t.productsSelect.queue=[],t.productsSelect.queueToggle=function(e){t.productsSelect.isQueued(e)?t.productsSelect.dequeueProduct(e):t.productsSelect.queueProduct(e)},t.productsSelect.queueProduct=function(e){t.productsSelect.queue.length>=t.productsSelect.limit&&t.productsSelect.queue.shift(),t.productsSelect.queue.push(e)},t.productsSelect.dequeueProduct=function(e){t.productsSelect.queue=_.reject(t.productsSelect.queue,{product_id:e.product_id})},t.productsSelect.isQueued=function(e){return null!=_.findWhere(t.productsSelect.queue,{product_id:e.product_id})},_.each(t.products,function(e){t.productsSelect.queueProduct(e)}),t.productsSelect.ok=function(e){r.close(e)},t.productsSelect.cancel=function(){r.dismiss()},t.productsSelect.search=function(){t.productsSelect.params.q=t.productsSelect.q,n(e.buildUrl("/products"))},t.productsSelect.sort=function(i,a){t.productsSelect.params.sort_by=i,t.productsSelect.params.desc=a,n(e.buildUrl("/products"))},t.productsSelect.movePage=function(e){n("+"==e?t.productList.next_page_url:t.productList.previous_page_url)}})}}}]),app.directive("licenseServiceSelect",["ApiService","ConfirmService","GrowlsService","$uibModal",function(e,t,n,i){return{restrict:"A",scope:{licenseService:"=?",error:"=?"},link:function(t,n,a,r){n.click(function(){t.licenseServiceSelect={},t.licenseServiceSelect.params={},t.licenseServiceSelect.params.show="license_service_id,name,type,configuration.license_count,configuration.notify_at_count,configuration.url,date_created,date_modified",t.licenseServiceSelect.params.limit=5,t.licenseServiceSelect.params.sort_by="name",t.licenseServiceSelect.params.desc=!1,t.licenseServiceSelect.type="list",t.licenses={},t.license_service={},t.license_service.type="list",t.license_service.configuration={},t.license_service.configuration.format="json",t.license_service.configuration.per_quantity=!1,t.license_service.configuration.remove_after_use=!0,t.license_service.configuration.notify_at_count=100;var n=function(n){e.getList(n,t.licenseServiceSelect.params).then(function(e){t.licenseServiceList=e},function(e){t.modalError=e})};n(e.buildUrl("/license_services")),utils.hasPermission("license_services","create")?t.licenseServiceSelectTabs=[{active:!0},{active:!1}]:t.licenseServiceSelectTabs=[{active:!1},{active:!0}];var a=i.open({size:"lg",templateUrl:"app/modals/license_service_select.html",scope:t});a.result.then(function(e){t.licenseService=e,t.modalError=null},function(){t.modalError=null}),t.licenseServiceSelect.ok=function(e){a.close(e)},t.licenseServiceSelect.cancel=function(){a.dismiss()},t.licenseServiceSelect.search=function(){t.licenseServiceSelect.params.q=t.licenseServiceSelect.q,n(e.buildUrl("/license_services"))},t.licenseServiceSelect.sort=function(i,a){t.licenseServiceSelect.params.sort_by=i,t.licenseServiceSelect.params.desc=a,n(e.buildUrl("/license_services"))},t.licenseServiceSelect.setParam=function(i,a){t.licenseServiceSelect.params[i]=a,n(e.buildUrl("/license_services"))},t.licenseServiceSelect.create=function(n){n.$invalid||(null!=t.licenses.list&&"list"==t.licenseServiceSelect.type&&(t.license_service.configuration.licenses=utils.stringToArray(t.licenses.list)),e.set(t.license_service,e.buildUrl("/license_services")).then(function(e){a.close(e)},function(e){t.modalError=e}))},t.licenseServiceSelect.movePage=function(e){n("+"==e?t.licenseServiceList.next_page_url:t.licenseServiceList.previous_page_url)}})}}}]),app.directive("imageGroup",["ApiService","ConfirmService","GrowlsService","$uibModal",function(e,t,n,i){return{restrict:"E",templateUrl:"app/templates/image_group.html",scope:{images:"=?"},link:function(e,t,n,i){e.showMoreSizesList=[],e.limit=n.limit||15,e.toggleMoreSizes=function(t){e.showMoreSizesList.indexOf(t)==-1?e.showMoreSizesList.push(t):e.showMoreSizesList=_.without(e.showMoreSizesList,t)},e.showMoreSizes=function(t){return e.showMoreSizesList.indexOf(t)>=0},e.removeAll=function(){e.images=null}}}}]),app.directive("productGroup",["ApiService","ConfirmService","GrowlsService","$uibModal",function(e,t,n,i){return{restrict:"E",templateUrl:"app/templates/product_group.html",scope:{products:"=?"},link:function(e,t,n,i){e.limit=n.limit||15,e.removeAll=function(){e.products=null}}}}]),app.directive("fields",["ApiService","ConfirmService","GrowlsService","$uibModal",function(e,t,n,i){return{restrict:"AE",templateUrl:"app/templates/fields.html",scope:{fieldlist:"=?",selections:"=?",error:"="},link:function(t,n,i,a){t.data={images:{}},t.data.imagePreviews=[],t.$watch("fieldlist",function(n,i){if(n!==i){for(var a in t.fieldlist)t.fieldlist.hasOwnProperty(a)&&null==t.selections[t.fieldlist[a].name]&&(t.selections[t.fieldlist[a].name]=t.fieldlist[a].default_value),"image"==t.fieldlist[a].type&&null!=t.selections[t.fieldlist[a].name]&&t.data.imagePreviews.push({property:t.fieldlist[a].name,url:e.buildUrl("/images/"+t.selections[t.fieldlist[a].name])});utils.hasPermission("images","read")&&_.each(t.data.imagePreviews,function(n){e.getItem(n.url).then(function(e){(t.data.images[n.property]=[]).push(e)},function(e){t.error&&(t.error=e,window.scrollTo(0,0))})})}},!0),t.$watch("data.images",function(e,n){if(e!==n)for(var i in e)e.hasOwnProperty(i)&&(null!=e[i]?t.selections[i]=e[i][0].image_id:t.selections[i]=null)},!0),t.pushToProperty=function(e,n){e=r(e),0==t.isInProperty(e,n)?null==t.selections[e]?(t.selections[e]=[],t.selections[e].push(n)):t.selections[e].push(n):t.selections[e]=_.without(t.selections[e],n)},t.isInProperty=function(e,n){return e=r(e),null!=t.selections&&(null!=t.selections[e]&&_.indexOf(t.selections[e],n)>=0)},t.isNewSection=function(e,n){if(0==n)return!0;var i=t.fieldlist[n-1];return null!=i&&i.section!=e.section};var r=function(e){null!=e&&"-search"==utils.right(e,7)&&(e=utils.left(e,e.length-7))}}}}]),app.directive("appPackageSelect",["ApiService","ConfirmService","GrowlsService","$uibModal",function(e,t,n,i){return{restrict:"A",scope:{appPackage:"=?",error:"=?"},link:function(n,a,r,o){a.click(function(){n.appPackageSelect={},n.appPackageSelect.params={},n.appPackageSelect.params.show="app_package_id,name,filename,version,bytes,description,date_created,date_modified",n.appPackageSelect.params.limit=5,n.appPackageSelect.params.sort_by="name",n.appPackageSelect.params.desc=!1;var a=function(t){e.getList(t,n.appPackageSelect.params).then(function(e){n.appPackageList=e},function(e){n.modalError=e})},r=!1,o=n.$on("uploadSending",function(e,t){r=t}),s=n.$on("uploadComplete",function(e,t){c.close(t)}),l=function(){s(),o()};a(e.buildUrl("/app_packages")),utils.hasPermission("app_packages","create")?n.appPackageSelectTabs=[{active:!0},{active:!1}]:n.appPackageSelectTabs=[{active:!1},{active:!0}];var c=i.open({size:"lg",templateUrl:"app/modals/app_package_select.html",scope:n,backdrop:"static"});c.result.then(function(e){l(),n.appPackage=e,n.modalError=null},function(){l(),n.modalError=null}),n.appPackageSelect.ok=function(e){c.close(e)},n.appPackageSelect.cancel=function(){if(r){var e={id:"upload_cancel"};e.onConfirm=function(){n.$broadcast("uploadCanceled"),c.dismiss()},t.showConfirm(n,e)}else c.dismiss()},n.appPackageSelect.search=function(){n.appPackageSelect.params.q=n.appPackageSelect.q,a(e.buildUrl("/app_packages"))},n.appPackageSelect.sort=function(t,i){n.appPackageSelect.params.sort_by=t,n.appPackageSelect.params.desc=i,a(e.buildUrl("/app_packages"))},n.appPackageSelect.movePage=function(e){a("+"==e?n.appPackageList.next_page_url:n.appPackageList.previous_page_url)}})}}}]),app.directive("transactionDebug",["ApiService","$uibModal",function(e,t){return{restrict:"A",scope:{url:"=?"},link:function(n,i,a,r){i.hide(),n.$watch("url",function(){n.url&&i.show()},!0),i.click(function(){n.transactionDebug={},n.transactionDebug.params={},n.transactionDebug.params.show="date_created,action,response,response_content_type",n.transactionDebug.params.limit=5,n.transactionDebug.params.sort_by="date_created",n.transactionDebug.params.desc=!0;var i=function(t){e.getList(t,n.transactionDebug.params).then(function(e){_.each(e.data,function(e){"xml"!=e.response_content_type&&"html"!=e.response_content_type||(e.response=vkbeautify.xml(e.response)),"json"==e.response_content_type&&(e.response=vkbeautify.json(e.response))}),n.debugList=e},function(e){n.modalError=e})};i(n.url);var a=t.open({size:"lg",templateUrl:"app/modals/debug_transaction.html",scope:n});n.transactionDebug.cancel=function(){a.dismiss()},n.transactionDebug.movePage=function(e){i("+"==e?n.debugList.next_page_url:n.debugList.previous_page_url)}})}}}]),app.directive("isProductIdAvailable",["$http","$q","ApiService",function(e,t,n){return{restrict:"A",require:"ngModel",link:function(e,t,i,a){var r=t[0],o=angular.element(r),s=angular.element(r.parentNode),l=angular.element(utils.getSiblingElements(r,"SPAN")[0]),c=angular.element(r.parentNode.parentNode);o.attr("name");o.bind("blur",function(){var t=utils.emptyToNull(r.value);s.removeClass("has-success"),c.removeClass("has-error"),l.addClass("hidden"),a.$setValidity("unavailable",!0),a.$setValidity("invalid_characters",!0),t&&(/[$\/:-?{-~!"^`\[\] ]/.test(t)?e.$apply(function(){c.addClass("has-error"),a.$setValidity("invalid_characters",!1)}):(c.removeClass("has-error"),l.removeClass("hidden"),s.addClass("has-success"),n.getItem(n.buildUrl("/products/"+t),{show:"product_id"},!1).then(function(e){c.addClass("has-error"),l.addClass("hidden"),a.$setValidity("unavailable",!1)},function(e){t&&(c.removeClass("has-error"),l.removeClass("hidden"),s.addClass("has-success"))})))})}}}]),app.directive("showErrors",function(){return{restrict:"A",require:"^form",link:function(e,t,n,i){var a=t[0].querySelector("[name]"),r=angular.element(t[0].querySelector(".help-block")),o=angular.element(t[0].getElementsByTagName("label")),s=angular.element(a),l=angular.element(r),c=angular.element(o),u=s.attr("name");null!=o&&s[0].attributes.required&&c.addClass("required"),s[0].attributes.required||s[0].attributes.conditional||s[0].attributes.placeholder||a.setAttribute("placeholder","Optional");var d="blur";a&&("checkbox"!=a.type&&"select"!=a.type&&"radio"!=a.type||(d="change")),s.bind(d,function(){("moderate"==n.showErrors||utils.isNullOrEmpty(n.showErrors))&&t.toggleClass("has-error",i[u].$invalid),"aggressive"==n.showErrors&&(t.toggleClass("has-error",i[u].$invalid),l.toggleClass("hidden",!i[u].$invalid)),0==i[u].$invalid&&l.toggleClass("hidden",!0);
}),e.$on("show-errors-check-validity",function(e,n){n.formName!=i.$name&&1==n.isolateValidation||i[u]&&(t.toggleClass("has-error",i[u].$invalid),l.toggleClass("hidden",!i[u].$invalid))})}}}),app.directive("validateOnSubmit",function(){return{restrict:"A",require:"^form",link:function(e,t,n,i){t.bind("click",function(){var t={};n.isolateValidation&&(t.isolateValidation=!0,t.formName=i.$name),e.$emit("show-errors-check-validity",t),e.$broadcast("show-errors-check-validity",t)})}}}),app.directive("prices",["gettextCatalog",function(e){return{restrict:"A",require:"^form",templateUrl:"app/templates/prices.html",scope:{prices:"=?",currencies:"=?"},link:function(t,n,i,a){t.form=a,t.label=i.label||e.getString("Price"),t.showAddPrice=function(){t.prices.push({price:"",currency:""})},t.removePrice=function(e,n){t.prices.splice(n,1)}}}}]),app.directive("ranges",function(){return{restrict:"A",require:"^form",templateUrl:"app/templates/ranges.html",scope:{ranges:"=?"},link:function(e,t,n,i){e.form=i,e.showAddRange=function(){e.ranges||(e.ranges=[]),e.ranges.push({minimum:"",maximum:"",price:""})},e.removeRange=function(t,n){e.ranges.splice(n,1)}}}}),app.directive("metaToHtml",function(){return{restrict:"A",link:function(e,t,n,i){n.$observe("metaToHtml",function(e){if(0==utils.isNullOrEmpty(e)){var i=utils.jsonToHtmlTable(e,!0,n.panelTitle);t.html(i)}})}}}),app.directive("address",["GeographiesService",function(e){return{restrict:"AE",templateUrl:"app/templates/address_display.html",scope:{address:"=?",edit:"=?"},link:function(t,n,i){var a=e.getGeographies();t.countries=a.countries}}}]),app.directive("customerEdit",["ApiService",function(e){return{restrict:"AE",templateUrl:"app/templates/customer.html",scope:{customer:"=?customerEdit",cart:"=?",invoice:"=?",onSave:"=?",error:"=?"},link:function(t,n,i){var a={};t.edit=!1,t.$watch("edit",function(e){e?(a=angular.copy(t.customer),t.edit=!0):(a={},t.edit=!1)}),t.cancel=function(){t.error=null,t.customer=a,t.edit=!1},t.save=function(n){if(t.error=null,!n.$invalid){if(void 0===i.commitOnSave||"true"==i.commitOnSave){var a=t.customer.url||e.buildUrl("/customers"),r=t.customer;return t.cart&&t.cart.url&&(a=t.cart.url,r={customer:t.customer}),t.invoice&&t.invoice.url&&(a=t.invoice.url,r={customer:t.customer}),e.set(r,a,{formatted:!0,expand:"options"}).then(function(e){t.cart&&t.cart.url?t.cart=e:t.invoice&&t.invoice.url?t.invoice=e:t.customer=e,t.edit=!1,t.onSave&&onSave(e)},function(e){t.error=e}),void(t.onSave&&t.onSave(customer))}t.edit=!1}}}}}]),app.directive("customerSelect",["ApiService","ConfirmService","GrowlsService","$uibModal","$rootScope",function(e,t,n,i,a){return{restrict:"A",scope:{customer:"=?",onSelect:"=?",error:"=?"},link:function(t,n,a,r){n.click(function(){t.customerSelect={},t.customerSelect.params={},t.customerSelect.params.hide="payments,refunds,orders,subscriptions,invoices",t.customerSelect.params.limit=10,t.customerSelect.params.date_type="date_created",t.customerSelect.params.desc=!0,t.newCustomer={tax_exempt:!1,billing_address:{},shipping_address:{}};var n=function(n){e.getList(n,t.customerSelect.params).then(function(e){t.customerList=e},function(e){t.modalError=e})};n(e.buildUrl("/customers")),utils.hasPermission("customers","create")?t.customerSelectTabs=[{active:!0},{active:!1}]:t.customerSelectTabs=[{active:!1},{active:!0}];var a=i.open({size:"lg",templateUrl:"app/modals/customer_select.html",scope:t,backdrop:"static"});t.customerSelect.copyBillingToShipping=function(){t.newCustomer.shipping_address=angular.copy(t.newCustomer.billing_address)},a.result.then(function(e){t.customer=e,t.modalError=null,t.onSelect&&t.onSelect(e)},function(){t.modalError=null}),t.customerSelect.ok=function(e){a.close(e)},t.customerSelect.cancel=function(){a.dismiss()},t.customerSelect.search=function(){t.customerSelect.params.q=t.customerSelect.q,n(e.buildUrl("/customers"))},t.customerSelect.sort=function(i,a){t.customerSelect.params.date_type=i,t.customerSelect.params.desc=a,n(e.buildUrl("/customers"))},t.customerSelect.setParam=function(i,a){t.customerSelect.params[i]=a,n(e.buildUrl("/customers"))},t.customerSelect.create=function(n){n.$invalid||e.set(t.newCustomer,e.buildUrl("/customers")).then(function(e){a.close(e)},function(e){t.modalError=e})},t.customerSelect.movePage=function(e){n("+"==e?t.customerList.next_page_url:t.customerList.previous_page_url)}})}}}]),app.directive("invoiceItemSelect",["ApiService","ConfirmService","GrowlsService","$uibModal","$rootScope","$location",function(e,t,n,i,a,r){return{restrict:"A",scope:{invoice:"=?invoiceItemSelect",dateDue:"=?",parameters:"=?",error:"=?"},link:function(t,n,a,o){n.click(function(){t.itemSelect={},t.itemSelect.params={},t.itemSelect.params.show="name,product_id,price,currency,status,active,deleted,date_created,date_modified,type",t.itemSelect.params.limit=10,t.itemSelect.params.sort_by="name",t.itemSelect.params.formatted=!0,t.itemSelect.params.currency=t.invoice.currency,t.itemSelect.params.desc=!1,t.currencies=JSON.parse(localStorage.getItem("payment_currencies")),t.newItem={reference_currency:t.invoice.currency},t.invoice&&null==t.invoice.items&&(t.invoice.items=[]);var n=function(n){e.getList(n,t.itemSelect.params).then(function(e){t.productList=e},function(e){t.modalError=e})};n(e.buildUrl("/products")),t.itemSelectTabs=[{active:!0},{active:!1}];var a=i.open({size:"lg",templateUrl:"app/modals/invoice_item_select.html",scope:t});a.result.then(function(e){t.item=e,t.modalError=null},function(){t.modalError=null});var o=!1,s=function(){var n=t.invoice.url||e.buildUrl("/invoices");return null==t.invoice.url&&(o=!0),t.invoice.date_due=t.dateDue,e.set(t.invoice,n,t.parameters)};t.itemSelect.ok=function(e){var n=_.findWhere(t.invoice.items,{product_id:e.product_id});if(null!=n)return void a.close(n);var i={product_id:e.product_id,quantity:1};t.invoice.items.push(i),s().then(function(e){t.invoice=e,a.close(i),o&&r.path("/invoices/"+e.invoice_id)},function(n){t.invoice.items=_.filter(t.invoice.items,function(t){return t.product_id!=e.product_id}),t.modalError=n})},t.itemSelect.cancel=function(){a.dismiss()},t.itemSelect.search=function(){t.itemSelect.params.q=t.itemSelect.q,n(e.buildUrl("/products"))},t.itemSelect.sort=function(i,a){t.itemSelect.params.date_type=i,t.itemSelect.params.desc=a,n(e.buildUrl("/products"))},t.itemSelect.setParam=function(i,a){t.itemSelect.params[i]=a,n(e.buildUrl("/products"))},t.itemSelect.create=function(e){if(!e.$invalid){var n=_.findWhere(t.invoice.items,{item_id:t.newItem.item_id});if(null!=n)return void(t.modalError={message:"An item with the same ID already exists. You must choose a unique item ID."});t.invoice.items.push(t.newItem),s().then(function(e){t.invoice=e,a.close(t.newItem),o&&r.path("/invoices/"+e.invoice_id)},function(e){t.invoice.items=_.filter(t.invoice.items,function(e){return e.item_id!=t.newItem.item_id}),t.modalError=e})}},t.itemSelect.movePage=function(e){n("+"==e?t.productList.next_page_url:t.productList.previous_page_url)}})}}}]),app.directive("download",["ApiService","ConfirmService","GrowlsService","$uibModal",function(e,t,n,i){return{restrict:"A",scope:{download:"=?",error:"=?"},link:function(t,a,r,o){a.click(function(){t.downloadDetails={},t.downloadDetails.params={},t.data={},t.data.expires=new Date(t.download.expires),t.datepicker={},t.datepicker.status={},t.datepicker.options={startingDay:1,showWeeks:!1,initDate:new Date,yearRange:10},t.datepicker.status.expires={opened:!1},t.datepicker.open=function(e,n){t.datepicker.status[n].opened=!0};var a=i.open({size:"lg",templateUrl:"app/modals/download.html",scope:t});t.downloadDetails.close=function(){a.close()},t.downloadDetails.ok=function(i){t.modalError=null,i.$invalid||(t.download.expires=t.data.expires.toISOString(),e.set(t.download,e.buildUrl("/downloads/"+t.download.download_id),{expand:"file"}).then(function(e){n.addGrowl({id:"edit_success_no_link"}),t.download=e,a.close()},function(e){t.modalError=e}))},t.downloadDetails.reset=function(){t.modalError=null,e.set(null,e.buildUrl("/downloads/"+t.download.download_id+"/reset"),{expand:"file"}).then(function(e){n.addGrowl({id:"download_reset"}),t.download=e,a.close()},function(e){t.modalError=e})},t.downloadDetails.kill=function(){t.modalError=null,e.set(null,e.buildUrl("/downloads/"+t.download.download_id+"/kill"),{expand:"file"}).then(function(e){n.addGrowl({id:"download_kill"}),t.download=e,a.close()},function(e){t.modalError=e})},a.result.then(function(e){t.modalError=null},function(){t.modalError=null})})}}}]),app.directive("createDownload",["ApiService","ConfirmService","GrowlsService","$uibModal",function(e,t,n,i){return{restrict:"A",scope:{file:"=?",error:"=?"},link:function(t,a,r,o){a.click(function(){e.set({},t.file.url+"/downloads",{expand:"file",formatted:!0}).then(function(a){t.download=a,t.downloadDetails={},t.downloadDetails.params={},t.data={},t.data.expires=new Date(t.download.expires),t.datepicker={},t.datepicker.status={},t.datepicker.options={startingDay:1,showWeeks:!1,initDate:new Date,yearRange:10},t.datepicker.status.expires={opened:!1},t.datepicker.open=function(e,n){t.datepicker.status[n].opened=!0};var r=i.open({size:"lg",templateUrl:"app/modals/download.html",scope:t});t.downloadDetails.close=function(){r.close()},t.downloadDetails.ok=function(i){t.modalError=null,i.$invalid||(t.download.expires=t.data.expires.toISOString(),e.set(a,e.buildUrl("/downloads/"+t.download.download_id),{expand:"file"}).then(function(e){n.addGrowl({id:"edit_success_no_link"}),t.download=e,r.close()},function(e){t.modalError=e}))},t.downloadDetails.reset=function(){t.modalError=null,e.set(null,e.buildUrl("/downloads/"+t.download.download_id+"/reset"),{expand:"file"}).then(function(e){n.addGrowl({id:"download_reset"}),t.download=e,r.close()},function(e){t.modalError=e})},t.downloadDetails.kill=function(){t.modalError=null,e.set(null,e.buildUrl("/downloads/"+t.download.download_id+"/kill"),{expand:"file"}).then(function(e){n.addGrowl({id:"download_kill"}),t.download=e,r.close()},function(e){t.modalError=e})},r.result.then(function(e){t.modalError=null},function(){t.modalError=null})},function(e){t.error=e,window.scrollTo(0,0)})})}}}]),app.directive("license",["$uibModal",function(e){return{restrict:"A",scope:{license:"=?",error:"=?"},link:function(t,n,i,a){n.click(function(){t.licenseDetails={},t.licenseDetails.params={},t.data={},t.options={html:!0},t.renderedLicenseText=t.license.label+":\n"+t.license.text,t.license.instructions&&(t.renderedLicenseText+="\n\n"+t.license.instructions),t.renderedLicenseHtml=t.license.label+"<br>"+t.license.html,t.license.instructions&&(t.renderedLicenseHtml+="<br><br>"+t.license.instructions);var n=e.open({size:"lg",templateUrl:"app/modals/license.html",scope:t});t.licenseDetails.close=function(){n.close()},n.result.then(function(e){t.modalError=null},function(){t.modalError=null})})}}}]),app.directive("creditCardImage",[function(){return{restrict:"A",link:function(e,t,n){e.$watch(n.creditCardImage,function(e){var i="images/";if(n.path&&(i=n.path),e){var a=e.replace(" ","").toLowerCase()+".png",r='<img src="'+i+a+'" />',o=angular.element(t);o.empty(),o.html(r)}})}}}]),app.filter("bytesToMB",function(){return function(e){return(e/1e6).toFixed(2)+" MB"}}),app.filter("humanBool",function(){return function(e){if(null!=e)return 1==e?"yes":"no"}}),app.filter("money",function(){return function(e,t){var n=localStorage.getItem("locale");null==n&&(n="en-us");var i=new Intl.NumberFormat(n,{style:"currency",currency:t,minimumFractionDigits:2});return i.format(e)}}),app.filter("truncate",function(){return function(e,t){var n="...";if(null!=e)return e.length<=t||e.length-n.length<=t?e:String(e).substring(0,t-n.length).trim()+n}}),app.filter("countryCodeToName",["GeographiesService",function(e){return function(t){if(null==t)return null;var n=e.getGeographies(),i=_.findWhere(n.countries,{code:t});return i.name}}]),app.filter("truncateUrl",function(){return function(e,t){var n="...";if(null!=e)return e.length<=t||e.length-n.length<=t?e:String(e).substring(0,t)+n+utils.right(e,10)}}),app.filter("replace",function(){return function(e,t,n){if(null!=e)return e.split(t).join(n)}}),app.filter("stringToColor",function(){return function(e){if(null!=e){for(var t=0,n=0;t<e.length;n=e.charCodeAt(t++)+((n<<5)-n));for(var t=0,i="#";t<3;i+=("00"+(n>>8*t++&255).toString(16)).slice(-2));return i}return"red"}}),app.filter("percentage",["$filter",function(e){return function(t,n){return e("number")(100*t,n)+"%"}}]),app.filter("removeUnderscore",function(){return function(e){if(null!=e)return e.split("_").join(" ")}}),app.service("GrowlsService",["$rootScope",function(e){function t(t){var n=utils.getRandom(),i="success";null!=t.type&&(i=t.type);var a=5;switch(i){case"success":a=5;break;case"info":a=5;break;case"warning":a=20;break;case"danger":a=-1}utils.isValidNumber(t.duration)&&(a=t.duration),a>120&&(a=120),t.ref=n,t.duration=a,t.type=i,e.$broadcast("event:growl",t)}return{addGrowl:t}}]),app.service("SettingsService",["$rootScope","$q","ApiService",function(e,t,n){function i(){return e.account={},e.account.account_id=localStorage.getItem("account_id"),n.getItem(n.buildUrl("/accounts/"+e.account.account_id+"/account_meta")).then(function(t){e.account.alias=t.alias,localStorage.setItem("alias",t.alias),localStorage.setItem("model",t.model),e.account.live=t.live,localStorage.setItem("live",t.live),e.account.reporting_currency_primary=t.reporting_currency_primary,localStorage.setItem("reporting_currency_primary",t.reporting_currency_primary),e.account.reporting_currency_secondary=t.reporting_currency_secondary,localStorage.setItem("reporting_currency_secondary",t.reporting_currency_secondary),e.account.payment_currencies=t.payment_currencies,localStorage.setItem("payment_currencies",JSON.stringify(t.payment_currencies)),e.account.default_payment_currency=t.default_payment_currency,localStorage.setItem("default_payment_currency",t.default_payment_currency),localStorage.setItem("oauth_authorize_url",t.oauth_authorize_url),localStorage.setItem("oauth_callback_url",t.oauth_callback_url),localStorage.setItem("contract_select_url",t.contract_select_url),localStorage.setItem("signin_url",t.signin_url),e.contract_select_url=t.contract_select_url})}function a(){e.user={},e.user.user_id=localStorage.getItem("user_id"),e.user.name=localStorage.getItem("name"),e.settings={},e.settings.test=utils.stringToBool(localStorage.getItem("test")),e.logout=function(){var e=(localStorage.getItem("alias"),t.defer(),[]);localStorage.getItem("token")&&e.push(n.remove(n.buildUrl("/auths/me"),null,!0,localStorage.getItem("token"))),localStorage.getItem("token_live")&&e.push(n.remove(n.buildUrl("/auths/me"),null,!0,localStorage.getItem("token_live"))),localStorage.getItem("token_limited_test")&&e.push(n.remove(n.buildUrl("/auths/me"),null,!0,localStorage.getItem("token_limited_test"))),e.length>0?t.all(e).then(function(){i()},function(e){i()}):i();var i=function(){var e=localStorage.getItem("signin_url");localStorage.clear(),window.location.href=e+"?logout=1"}},i()}return{setUserSettings:a,setAccountMeta:i}}]),app.service("ConfirmService",["$uibModal",function(e){function t(t,n){t.confirm=n,openConfirm=e.open({templateUrl:"app/modals/confirm.html",scope:t}),n.ok=function(){openConfirm.close(),n.onConfirm()},n.cancel=function(){openConfirm.close()}}return{showConfirm:t}}]),app.service("GeographiesService",[function(){function e(e){var t={};return t.countries=[{name:"Afghanistan",code:"AF"},{name:"Albania",code:"AL"},{name:"Algeria",code:"DZ"},{name:"American Samoa",code:"AS"},{name:"Andorra",code:"AD"},{name:"Angola",code:"AO"},{name:"Anguilla",code:"AI"},{name:"Antarctica",code:"AQ"},{name:"Antigua and Barbuda",code:"AG"},{name:"Argentina",code:"AR"},{name:"Armenia",code:"AM"},{name:"Aruba",code:"AW"},{name:"Australia",code:"AU"},{name:"Austria",code:"AT"},{name:"Azerbaijan",code:"AZ"},{name:"Bahamas",code:"BS"},{name:"Bahrain",code:"BH"},{name:"Bangladesh",code:"BD"},{name:"Barbados",code:"BB"},{name:"Belarus",code:"BY"},{name:"Belgium",code:"BE"},{name:"Belize",code:"BZ"},{name:"Benin",code:"BJ"},{name:"Bermuda",code:"BM"},{name:"Bhutan",code:"BT"},{name:"Bolivia, Plurinational State of",code:"BO"},{name:"Bonaire, Sint Eustatius and Saba",code:"BQ"},{name:"Bosnia and Herzegovina",code:"BA"},{name:"Botswana",code:"BW"},{name:"Bouvet Island",code:"BV"},{name:"Brazil",code:"BR"},{name:"British Indian Ocean Territory",code:"IO"},{name:"Brunei Darussalam",code:"BN"},{name:"Bulgaria",code:"BG"},{name:"Burkina Faso",code:"BF"},{name:"Burundi",code:"BI"},{name:"Cambodia",code:"KH"},{name:"Cameroon",code:"CM"},{name:"Canada",code:"CA"},{name:"Cape Verde",code:"CV"},{name:"Cayman Islands",code:"KY"},{name:"Central African Republic",code:"CF"},{name:"Chad",code:"TD"},{name:"Chile",code:"CL"},{name:"China",code:"CN"},{name:"Christmas Island",code:"CX"},{name:"Cocos (Keeling) Islands",code:"CC"},{name:"Colombia",code:"CO"},{name:"Comoros",code:"KM"},{name:"Congo",code:"CG"},{name:"Congo, the Democratic Republic of the",code:"CD"},{name:"Cook Islands",code:"CK"},{name:"Costa Rica",code:"CR"},{name:"Cote d Ivoire",code:"CI"},{name:"Croatia",code:"HR"},{name:"Cuba",code:"CU"},{name:"Curacao",code:"CW"},{name:"Cyprus",code:"CY"},{name:"Czech Republic",code:"CZ"},{name:"Denmark",code:"DK"},{name:"Djibouti",code:"DJ"},{name:"Dominica",code:"DM"},{name:"Dominican Republic",code:"DO"},{name:"Ecuador",code:"EC"},{name:"Egypt",code:"EG"},{name:"El Salvador",code:"SV"},{name:"Equatorial Guinea",code:"GQ"},{name:"Eritrea",code:"ER"},{name:"Estonia",code:"EE"},{name:"Ethiopia",code:"ET"},{name:"Falkland Islands",code:"AX"},{name:"Falkland Islands (Malvinas)",code:"FK"},{name:"Faroe Islands",code:"FO"},{name:"Fiji",code:"FJ"},{name:"Finland",code:"FI"},{name:"France",code:"FR"},{name:"French Guiana",code:"GF"},{name:"French Polynesia",code:"PF"},{name:"French Southern Territories",code:"TF"},{name:"Gabon",code:"GA"},{name:"Gambia",code:"GM"},{name:"Georgia",code:"GE"},{name:"Germany",code:"DE"},{name:"Ghana",code:"GH"},{name:"Gibraltar",code:"GI"},{name:"Greece",code:"GR"},{name:"Greenland",code:"GL"},{name:"Grenada",code:"GD"},{name:"Guadeloupe",code:"GP"},{name:"Guam",code:"GU"},{name:"Guatemala",code:"GT"},{name:"Guernsey",code:"GG"},{name:"Guinea",code:"GN"},{name:"Guine Bissau",code:"GW"},{name:"Guyana",code:"GY"},{name:"Haiti",code:"HT"},{name:"Heard Island and McDonald Islands",code:"HM"},{name:"Holy See (Vatican City State)",code:"VA"},{name:"Honduras",code:"HN"},{name:"Hong Kong",code:"HK"},{name:"Hungary",code:"HU"},{name:"Iceland",code:"IS"},{name:"India",code:"IN"},{name:"Indonesia",code:"ID"},{name:"Iran",code:"IR"},{name:"Iraq",code:"IQ"},{name:"Ireland",code:"IE"},{name:"Isle of Man",code:"IM"},{name:"Israel",code:"IL"},{name:"Italy",code:"IT"},{name:"Jamaica",code:"JM"},{name:"Japan",code:"JP"},{name:"Jersey",code:"JE"},{name:"Jordan",code:"JO"},{name:"Kazakhstan",code:"KZ"},{name:"Kenya",code:"KE"},{name:"Kiribati",code:"KI"},{name:"Korea",code:"KR"},{name:"Kuwait",code:"KW"},{name:"Kyrgyzstan",code:"KG"},{name:"Lao Peoples Democratic Republic",code:"LA"},{name:"Latvia",code:"LV"},{name:"Lebanon",code:"LB"},{name:"Lesotho",code:"LS"},{name:"Liberia",code:"LR"},{name:"Libya",code:"LY"},{name:"Liechtenstein",code:"LI"},{name:"Lithuania",code:"LT"},{name:"Luxembourg",code:"LU"},{name:"Macao",code:"MO"},{name:"Macedonia",code:"MK"},{name:"Madagascar",code:"MG"},{name:"Malawi",code:"MW"},{name:"Malaysia",code:"MY"},{name:"Maldives",code:"MV"},{name:"Mali",code:"ML"},{name:"Malta",code:"MT"},{name:"Marshall Islands",code:"MH"},{name:"Martinique",code:"MQ"},{name:"Mauritania",code:"MR"},{name:"Mauritius",code:"MU"},{name:"Mayotte",code:"YT"},{name:"Mexico",code:"MX"},{name:"Micronesia",code:"FM"},{name:"Moldova",code:"MD"},{name:"Monaco",code:"MC"},{name:"Mongolia",code:"MN"},{name:"Montenegro",code:"ME"},{name:"Montserrat",code:"MS"},{name:"Morocco",code:"MA"},{name:"Mozambique",code:"MZ"},{name:"Myanmar",code:"MM"},{name:"Namibia",code:"NA"},{name:"Nauru",code:"NR"},{name:"Nepal",code:"NP"},{name:"Netherlands",code:"NL"},{name:"New Caledonia",code:"NC"},{name:"New Zealand",code:"NZ"},{name:"Nicaragua",code:"NI"},{name:"Niger",code:"NE"},{name:"Nigeria",code:"NG"},{name:"Niue",code:"NU"},{name:"Norfolk Island",code:"NF"},{name:"Northern Mariana Islands",code:"MP"},{name:"Norway",code:"NO"},{name:"Oman",code:"OM"},{name:"Pakistan",code:"PK"},{name:"Palau",code:"PW"},{name:"Panama",code:"PA"},{name:"Papua New Guinea",code:"PG"},{name:"Paraguay",code:"PY"},{name:"Peru",code:"PE"},{name:"Philippines",code:"PH"},{name:"Pitcairn",code:"PN"},{name:"Poland",code:"PL"},{name:"Portugal",code:"PT"},{name:"Puerto Rico",code:"PR"},{name:"Qatar",code:"QA"},{name:"Reunion",code:"RE"},{name:"Romania",code:"RO"},{name:"Russian Federation",code:"RU"},{name:"Rwanda",code:"RW"},{name:"Saint Barthélemy",code:"BL"},{name:"Saint Helena",code:"SH"},{name:"Saint Kitts and Nevis",code:"KN"},{name:"Saint Lucia",code:"LC"},{name:"Saint Martin French",code:"MF"},{name:"Saint Pierre and Miquelon",code:"PM"},{name:"Saint Vincent and the Grenadines",code:"VC"},{name:"Samoa",code:"WS"},{name:"San Marino",code:"SM"},{name:"Sao Tome and Principe",code:"ST"},{name:"Saudi Arabia",code:"SA"},{name:"Senegal",code:"SN"},{name:"Serbia",code:"RS"},{name:"Seychelles",code:"SC"},{name:"Sierra Leone",code:"SL"},{name:"Singapore",code:"SG"},{name:"Sint Maarten Dutch",code:"SX"},{name:"Slovakia",code:"SK"},{name:"Slovenia",code:"SI"},{name:"Solomon Islands",code:"SB"},{name:"Somalia",code:"SO"},{name:"South Africa",code:"ZA"},{name:"South Georgia and the South Sandwich Islands",code:"GS"},{name:"South Sudan",code:"SS"},{name:"Spain",code:"ES"},{name:"Sri Lanka",code:"LK"},{name:"Sudan",code:"SD"},{name:"Suriname",code:"SR"},{name:"Svalbard and Jan Mayen",code:"SJ"},{name:"Swaziland",code:"SZ"},{name:"Sweden",code:"SE"},{name:"Switzerland",code:"CH"},{name:"Syrian Arab Republic",code:"SY"},{name:"Taiwan",code:"TW"},{name:"Tajikistan",code:"TJ"},{name:"Tanzania",code:"TZ"},{name:"Thailand",code:"TH"},{name:"Timor Leste",code:"TL"},{name:"Togo",code:"TG"},{name:"Tokelau",code:"TK"},{name:"Tonga",code:"TO"},{name:"Trinidad and Tobago",code:"TT"},{name:"Tunisia",code:"TN"},{name:"Turkey",code:"TR"},{name:"Turkmenistan",code:"TM"},{name:"Turks and Caicos Islands",code:"TC"},{name:"Tuvalu",code:"TV"},{name:"Uganda",code:"UG"},{name:"Ukraine",code:"UA"},{name:"United Arab Emirates",code:"AE"},{name:"United Kingdom",code:"GB"},{name:"United States",code:"US"},{name:"United States Minor Outlying Islands",code:"UM"},{name:"Uruguay",code:"UY"},{name:"Uzbekistan",code:"UZ"},{name:"Vanuatu",code:"VU"},{name:"Venezuela",code:"VE"},{name:"Viet Nam",code:"VN"},{name:"Virgin Islands British",code:"VG"},{name:"Virgin Islands U.S.",code:"VI"},{name:"Wallis and Futuna",code:"WF"},{name:"Western Sahara",code:"EH"},{name:"Yemen",code:"YE"},{name:"Zambia",code:"ZM"},{name:"Zimbabwe",code:"ZW"}],t.us_states=[{name:"Alabama",code:"AL"},{name:"Alaska",code:"AK"},{name:"American Samoa",code:"AS"},{name:"Arizona",code:"AZ"},{name:"Arkansas",code:"AR"},{name:"California",code:"CA"},{name:"Colorado",code:"CO"},{name:"Connecticut",code:"CT"},{name:"Delaware",code:"DE"},{name:"District Of Columbia",code:"DC"},{name:"Federated States Of Micronesia",code:"FM"},{name:"Florida",code:"FL"},{name:"Georgia",code:"GA"},{name:"Guam",code:"GU"},{name:"Hawaii",code:"HI"},{name:"Idaho",code:"ID"},{name:"Illinois",code:"IL"},{name:"Indiana",code:"IN"},{name:"Iowa",code:"IA"},{name:"Kansas",code:"KS"},{name:"Kentucky",code:"KY"},{name:"Louisiana",code:"LA"},{name:"Maine",code:"ME"},{name:"Marshall Islands",code:"MH"},{name:"Maryland",code:"MD"},{name:"Massachusetts",code:"MA"},{name:"Michigan",code:"MI"},{name:"Minnesota",code:"MN"},{name:"Mississippi",code:"MS"},{name:"Missouri",code:"MO"},{name:"Montana",code:"MT"},{name:"Nebraska",code:"NE"},{name:"Nevada",code:"NV"},{name:"New Hampshire",code:"NH"},{name:"New Jersey",code:"NJ"},{name:"New Mexico",code:"NM"},{name:"New York",code:"NY"},{name:"North Carolina",code:"NC"},{name:"North Dakota",code:"ND"},{name:"Northern Mariana Islands",code:"MP"},{name:"Ohio",code:"OH"},{name:"Oklahoma",code:"OK"},{name:"Oregon",code:"OR"},{name:"Palau",code:"PW"},{name:"Pennsylvania",code:"PA"},{name:"Puerto Rico",code:"PR"},{name:"Rhode Island",code:"RI"},{name:"South Carolina",code:"SC"},{name:"South Dakota",code:"SD"},{name:"Tennessee",code:"TN"},{name:"Texas",code:"TX"},{name:"Utah",code:"UT"},{name:"Vermont",code:"VT"},{name:"Virgin Islands",code:"VI"},{name:"Virginia",code:"VA"},{name:"Washington",code:"WA"},{name:"West Virginia",code:"WV"},{name:"Wisconsin",code:"WI"},{name:"Wyoming",code:"WY"},{name:"U.S. Armed Forces Americas",code:"AA"},{name:"U.S. Armed Forces Europe",code:"AE"},{name:"U.S. Armed Forces Pacific",code:"AP"}],t.ca_provinces=[{code:"AB",name:"Alberta"},{code:"BC",name:"British Columbia"},{code:"LB",name:"Labrador"},{code:"MB",name:"Manitoba"},{code:"NB",name:"New Brunswick"},{code:"NF",name:"Newfoundland"},{code:"NS",name:"Nova Scotia"},{code:"NU",name:"Nunavut"},{code:"NW",name:"Northwest Territories"},{code:"ON",name:"Ontario"},{code:"PE",name:"Prince Edward Island"},{code:"QC",name:"Quebec"},{code:"SK",name:"Saskatchewen"},{code:"YU",name:"Yukon"}],t.au_states=[{code:"NT",name:"Northern Territory"},{code:"QLD",name:"Queensland"},{code:"SA",name:"South Australia"},{code:"TAS",name:"Tasmania"},{code:"VIC",name:"Victoria"},{code:"WA",name:"Western Australia"}],t.eu_countries=[{name:"Austria",code:"AT"},{name:"Belgium",code:"BE"},{name:"Bulgaria",code:"BG"},{name:"Croatia",code:"HR"},{name:"Cyprus",code:"CY"},{name:"Czech Republic",code:"CZ"},{name:"Denmark",code:"DK"},{name:"Estonia",code:"EE"},{name:"Finland",code:"FI"},{name:"France",code:"FR"},{name:"Germany",code:"DE"},{name:"Greece",code:"GR"},{name:"Hungary",code:"HU"},{name:"Ireland",code:"IE"},{name:"Italy",code:"IT"},{name:"Latvia",code:"LV"},{name:"Lithuania",code:"LT"},{name:"Luxembourg",code:"LU"},{name:"Malta",code:"MT"},{name:"Netherlands",code:"NL"},{name:"Poland",code:"PL"},{name:"Portugal",code:"PT"},{name:"Romania",code:"RO"},{name:"Slovakia",code:"SK"},{name:"Slovenia",code:"SI"},{name:"Spain",code:"ES"},{name:"Sweden",code:"SE"},{name:"United Kingdom",code:"GB"}],0!=e&&(t.countries.unshift({name:"",code:""}),t.us_states.unshift({name:"",code:""}),t.ca_provinces.unshift({name:"",code:""}),t.au_states.unshift({name:"",code:""})),t}function t(t){return null!=_.find(e(!1).eu_countries,{code:t})}function n(e){var t={AED:"د.إ",AFN:"؋",ALL:"L",AMD:"֏",ANG:"ƒ",AOA:"Kz",ARS:"$",AUD:"$",AWG:"ƒ",AZN:"ман",BAM:"KM",BBD:"$",BDT:"৳",BGN:"лв",BHD:".د.ب",BIF:"FBu",BMD:"$",BND:"$",BOB:"$b",BRL:"R$",BSD:"$",BTC:"฿",BTN:"Nu.",BWP:"P",BYR:"p.",BZD:"BZ$",CAD:"$",CDF:"FC",CHF:"CHF",CLP:"$",CNY:"¥",COP:"$",CRC:"₡",CUC:"$",CUP:"₱",CVE:"$",CZK:"Kč",DJF:"Fdj",DKK:"kr",DOP:"RD$",DZD:"دج",EEK:"kr",EGP:"£",ERN:"Nfk",ETB:"Br",ETH:"Ξ",EUR:"€",FJD:"$",FKP:"£",GBP:"£",GEL:"₾",GGP:"£",GHC:"₵",GHS:"GH₵",GIP:"£",GMD:"D",GNF:"FG",GTQ:"Q",GYD:"$",HKD:"$",HNL:"L",HRK:"kn",HTG:"G",HUF:"Ft",IDR:"Rp",ILS:"₪",IMP:"£",INR:"₹",IQD:"ع.د",IRR:"﷼",ISK:"kr",JEP:"£",JMD:"J$",JOD:"JD",JPY:"¥",KES:"KSh",KGS:"лв",KHR:"៛",KMF:"CF",KPW:"₩",KRW:"₩",KWD:"KD",KYD:"$",KZT:"лв",LAK:"₭",LBP:"£",LKR:"₨",LRD:"$",LSL:"M",LTC:"Ł",LTL:"Lt",LVL:"Ls",LYD:"LD",MAD:"MAD",MDL:"lei",MGA:"Ar",MKD:"ден",MMK:"K",MNT:"₮",MOP:"MOP$",MRO:"UM",MUR:"₨",MVR:"Rf",MWK:"MK",MXN:"$",MYR:"RM",MZN:"MT",NAD:"$",NGN:"₦",NIO:"C$",NOK:"kr",NPR:"₨",NZD:"$",OMR:"﷼",PAB:"B/.",PEN:"S/.",PGK:"K",PHP:"₱",PKR:"₨",PLN:"zł",PYG:"Gs",QAR:"﷼",RMB:"￥",RON:"lei",RSD:"Дин.",RUB:"₽",RWF:"R₣",SAR:"﷼",SBD:"$",SCR:"₨",SDG:"ج.س.",SEK:"kr",SGD:"$",SHP:"£",SLL:"Le",SOS:"S",SRD:"$",SSP:"£",STD:"Db",SVC:"$",SYP:"£",SZL:"E",THB:"฿",TJS:"SM",TMT:"T",TND:"د.ت",TOP:"T$",TRL:"₤",TRY:"₺",TTD:"TT$",TVD:"$",TWD:"NT$",TZS:"TSh",UAH:"₴",UGX:"USh",USD:"$",UYU:"$U",UZS:"лв",VEF:"Bs",VND:"₫",VUV:"VT",WST:"WS$",XAF:"FCFA",XBT:"Ƀ",XCD:"$",XOF:"CFA",XPF:"₣",YER:"﷼",ZAR:"R",ZWD:"Z$"};return t[e]||""}return{getGeographies:e,isEuCountry:t,getCurrencySymbol:n}}]),app.service("CouriersService",[function(){function e(){var e=[{value:null,name:"Optional"},{value:"UPS",name:"UPS"},{value:"FedEx",name:"FedEx"},{value:"USPS",name:"United States Postal Service"},{value:"DHLUSA",name:"DHL USA"},{value:"DHLEcommerce",name:"DHL eCommerce"},{value:"OnTrac",name:"OnTrac"},{value:"ICCWorldwide",name:"ICC Worldwide"},{value:"LaserShip",name:"LaserShip"},{value:"CanadaPost",name:"Canada Post"},{value:"AustraliaPost",name:"Australia Post"},{value:"RoyalMail",name:"Royal Mail"},{value:"",name:"Other"}];return e}return{getCouriers:e}}]),app.service("CurrenciesService",[function(){function e(){var e=[{code:"AED",name:"UAE Dirham"},{code:"AFN",name:"Afghani"},{code:"ALL",name:"Lek"},{code:"AMD",name:"Armenian Dram"},{code:"ANG",name:"Netherlands Antillean Guilder"},{code:"AOA",name:"Kwanza"},{code:"ARS",name:"Argentine Peso"},{code:"AUD",name:"Australian Dollar"},{code:"AWG",name:"Aruban Florin"},{code:"AZN",name:"Azerbaijanian Manat"},{code:"BAM",name:"Convertible Mark"},{code:"BBD",name:"Barbados Dollar"},{code:"BDT",name:"Taka"},{code:"BGN",name:"Bulgarian Lev"},{code:"BHD",name:"Bahraini Dinar"},{code:"BIF",name:"Burundi Franc"},{code:"BMD",name:"Bermudian Dollar"},{code:"BND",name:"Brunei Dollar"},{code:"BOB",name:"Boliviano"},{code:"BRL",name:"Brazilian Real"},{code:"BSD",name:"Bahamian Dollar"},{code:"BWP",name:"Pula"},{code:"BYR",name:"Belarussian Ruble"},{code:"BZD",name:"Belize Dollar"},{code:"CAD",name:"Canadian Dollar"},{code:"CDF",name:"Congolese Franc"},{code:"CHF",name:"Swiss Franc"},{code:"CLP",name:"Chilean Peso"},{code:"CNY",name:"Yuan Renminbi"},{code:"COP",name:"Colombian Peso"},{code:"CRC",name:"Costa Rican Colon"},{code:"CVE",name:"Cape Verde Escudo"},{code:"CZK",name:"Czech Koruna"},{code:"DJF",name:"Djibouti Franc"},{code:"DKK",name:"Danish Krone"},{code:"DOP",name:"Dominican Peso"},{code:"DZD",name:"Algerian Dinar"},{code:"EGP",name:"Egyptian Pound"},{code:"ERN",name:"Nakfa"},{code:"ETB",name:"Ethiopian Birr"},{code:"EUR",name:"Euro"},{code:"FJD",name:"Fiji Dollar"},{code:"FKP",name:"Falkland Islands Pound"},{code:"GBP",name:"Pound Sterling"},{code:"GEL",name:"Lari"},{code:"GHS",name:"Ghana Cedi"},{code:"GIP",name:"Gibraltar Pound"},{code:"GMD",name:"Dalasi"},{code:"GNF",name:"Guinea Franc"},{code:"GTQ",name:"Quetzal"},{code:"GYD",name:"Guyana Dollar"},{code:"HKD",name:"Hong Kong Dollar"},{code:"HNL",name:"Lempira"},{code:"HRK",name:"Croatian Kuna"},{code:"HTG",name:"Gourde"},{code:"HUF",name:"Forint"},{code:"IDR",name:"Rupiah"},{code:"ILS",name:"New Israeli Sheqel"},{code:"INR",name:"Indian Rupee"},{code:"IQD",name:"Iraqi Dinar"},{code:"ISK",name:"Iceland Krona"},{code:"JMD",name:"Jamaican Dollar"},{code:"JOD",name:"Jordanian Dinar"},{code:"JPY",name:"Yen"},{code:"KES",name:"Kenyan Shilling"},{code:"KGS",name:"Som"},{code:"KHR",name:"Riel"},{code:"KMF",name:"Comoro Franc"},{code:"KRW",name:"Won"},{code:"KWD",name:"Kuwaiti Dinar"},{code:"KYD",name:"Cayman Islands Dollar"},{code:"KZT",name:"Tenge"},{code:"LAK",name:"Kip"},{code:"LBP",name:"Lebanese Pound"},{code:"LKR",name:"Sri Lanka Rupee"},{code:"LRD",name:"Liberian Dollar"},{code:"LTL",name:"Lithuanian Litas"},{code:"LVL",name:"Latvian lats"},{code:"MAD",name:"Moroccan Dirham"},{code:"MDL",name:"Moldovan Leu"},{code:"MGA",name:"Malagasy Ariary"},{code:"MKD",name:"Denar"},{code:"MMK",name:"Kyat"},{code:"MNT",name:"Tugrik"},{code:"MOP",name:"Pataca"},{code:"MRO",name:"Ouguiya"},{code:"MUR",name:"Mauritius Rupee"},{code:"MVR",name:"Rufiyaa"},{code:"MWK",name:"Kwacha"},{code:"MXN",name:"Mexican Peso"},{code:"MYR",name:"Malaysian Ringgit"},{code:"MZN",name:"Mozambique Metical"},{code:"NGN",name:"Naira"},{code:"NIO",name:"Cordoba Oro"},{code:"NOK",name:"Norwegian Krone"},{code:"NPR",name:"Nepalese Rupee"},{code:"NZD",name:"New Zealand Dollar"},{code:"OMR",name:"Rial Omani"},{code:"PEN",name:"Nuevo Sol"},{code:"PGK",
name:"Kina"},{code:"PHP",name:"Philippine Peso"},{code:"PKR",name:"Pakistan Rupee"},{code:"PLN",name:"Zloty"},{code:"PYG",name:"Guarani"},{code:"QAR",name:"Qatari Rial"},{code:"RON",name:"New Romanian Leu"},{code:"RSD",name:"Serbian Dinar"},{code:"RUB",name:"Russian Ruble"},{code:"RWF",name:"Rwanda Franc"},{code:"SAR",name:"Saudi Riyal"},{code:"SBD",name:"Solomon Islands Dollar"},{code:"SCR",name:"Seychelles Rupee"},{code:"SEK",name:"Swedish Krona"},{code:"SGD",name:"Singapore Dollar"},{code:"SHP",name:"Saint Helena Pound"},{code:"SLL",name:"Leone"},{code:"SOS",name:"Somali Shilling"},{code:"SRD",name:"Surinam Dollar"},{code:"STD",name:"Dobra"},{code:"SZL",name:"Lilangeni"},{code:"THB",name:"Baht"},{code:"TJS",name:"Somoni"},{code:"TMT",name:"Turkmenistan New Manat"},{code:"TND",name:"Tunisian Dinar"},{code:"TOP",name:"Pa?anga"},{code:"TRY",name:"Turkish Lira"},{code:"TTD",name:"Trinidad and Tobago Dollar"},{code:"TWD",name:"New Taiwan Dollar"},{code:"TZS",name:"Tanzanian Shilling"},{code:"UAH",name:"Hryvnia"},{code:"UGX",name:"Uganda Shilling"},{code:"USD",name:"US Dollar"},{code:"UYU",name:"Peso Uruguayo"},{code:"UZS",name:"Uzbekistan Sum"},{code:"VEF",name:"Bolivar"},{code:"VND",name:"Dong"},{code:"VUV",name:"Vatu"},{code:"WST",name:"Tala"},{code:"XAF",name:"CFA Franc BEAC"},{code:"XCD",name:"East Caribbean Dollar"},{code:"XOF",name:"CFA Franc BCEAO"},{code:"XPF",name:"CFP Franc"},{code:"YER",name:"Yemeni Rial"},{code:"ZAR",name:"Rand"},{code:"ZMW",name:"Zambian kwacha"},{code:"ZWL",name:"Zimbabwe Dollar"}];return e}return{getCurrencies:e}}]),app.service("TimezonesService",[function(){function e(){var e=["Asia/China","America/Alaska","America/Atlantic_Time","America/Arizona","America/Central_Time","America/Eastern_Time","America/Hawaii","America/Mountain_Time","America/Newfoundland","America/Pacific_Time","Europe/Central","Europe/Eastern","Europe/GMT","Africa/Abidjan","Africa/Accra","Africa/Addis_Ababa","Africa/Algiers","Africa/Asmara","Africa/Asmera","Africa/Bamako","Africa/Bangui","Africa/Banjul","Africa/Bissau","Africa/Blantyre","Africa/Brazzaville","Africa/Bujumbura","Africa/Cairo","Africa/Casablanca","Africa/Ceuta","Africa/Conakry","Africa/Dakar","Africa/Dar_es_Salaam","Africa/Djibouti","Africa/Douala","Africa/El_Aaiun","Africa/Freetown","Africa/Gaborone","Africa/Harare","Africa/Johannesburg","Africa/Kampala","Africa/Khartoum","Africa/Kigali","Africa/Kinshasa","Africa/Lagos","Africa/Libreville","Africa/Lome","Africa/Luanda","Africa/Lubumbashi","Africa/Lusaka","Africa/Malabo","Africa/Maputo","Africa/Maseru","Africa/Mbabane","Africa/Mogadishu","Africa/Monrovia","Africa/Nairobi","Africa/Ndjamena","Africa/Niamey","Africa/Nouakchott","Africa/Ouagadougou","Africa/Porto-Novo","Africa/Sao_Tome","Africa/Timbuktu","Africa/Tripoli","Africa/Tunis","Africa/Windhoek","America/Adak","America/Anchorage","America/Anchorage","America/Anguilla","America/Antigua","America/Araguaina","America/Argentina/Buenos_Aires","America/Argentina/Catamarca","America/Argentina/ComodRivadavia","America/Argentina/Cordoba","America/Argentina/Jujuy","America/Argentina/La_Rioja","America/Argentina/Mendoza","America/Argentina/Rio_Gallegos","America/Argentina/Salta","America/Argentina/San_Juan","America/Argentina/San_Luis","America/Argentina/Tucuman","America/Argentina/Ushuaia","America/Aruba","America/Asuncion","America/Atikokan","America/Atka","America/Bahia","America/Barbados","America/Belem","America/Belize","America/Blanc-Sablon","America/Boa_Vista","America/Bogota","America/Boise","America/Buenos_Aires","America/Cambridge_Bay","America/Campo_Grande","America/Cancun","America/Caracas","America/Catamarca","America/Cayenne","America/Cayman","America/Chicago","America/Chicago","America/Chihuahua","America/Coral_Harbour","America/Cordoba","America/Costa_Rica","America/Cuiaba","America/Curacao","America/Danmarkshavn","America/Dawson","America/Dawson_Creek","America/Denver","America/Denver","America/Detroit","America/Dominica","America/Edmonton","America/Eirunepe","America/El_Salvador","America/Ensenada","America/Fort_Wayne","America/Fortaleza","America/Glace_Bay","America/Godthab","America/Goose_Bay","America/Grand_Turk","America/Grenada","America/Guadeloupe","America/Guatemala","America/Guayaquil","America/Guyana","America/Halifax","America/Havana","America/Hermosillo","America/Indiana/Indianapolis","America/Indiana/Knox","America/Indiana/Marengo","America/Indiana/Petersburg","America/Indiana/Tell_City","America/Indiana/Vevay","America/Indiana/Vincennes","America/Indiana/Winamac","America/Indianapolis","America/Inuvik","America/Iqaluit","America/Jamaica","America/Jujuy","America/Juneau","America/Kentucky/Louisville","America/Kentucky/Monticello","America/Knox_IN","America/La_Paz","America/Lima","America/Los_Angeles","America/Los_Angeles","America/Louisville","America/Maceio","America/Managua","America/Manaus","America/Marigot","America/Martinique","America/Matamoros","America/Mazatlan","America/Mendoza","America/Menominee","America/Merida","America/Mexico_City","America/Miquelon","America/Moncton","America/Monterrey","America/Montevideo","America/Montreal","America/Montserrat","America/Nassau","America/New_York","America/New_York","America/Nipigon","America/Nome","America/Noronha","America/North_Dakota/Center","America/North_Dakota/New_Salem","America/Ojinaga","America/Panama","America/Pangnirtung","America/Paramaribo","America/Phoenix","America/Phoenix","America/Port_of_Spain","America/Port-au-Prince","America/Porto_Acre","America/Porto_Velho","America/Puerto_Rico","America/Puerto_Rico","America/Rainy_River","America/Rankin_Inlet","America/Recife","America/Regina","America/Resolute","America/Rio_Branco","America/Rosario","America/Santa_Isabel","America/Santarem","America/Santiago","America/Santo_Domingo","America/Sao_Paulo","America/Scoresbysund","America/Shiprock","America/St_Barthelemy","America/St_Johns","America/St_Kitts","America/St_Lucia","America/St_Thomas","America/St_Vincent","America/Swift_Current","America/Tegucigalpa","America/Thule","America/Thunder_Bay","America/Tijuana","America/Toronto","America/Tortola","America/Vancouver","America/Virgin","America/Whitehorse","America/Winnipeg","America/Yakutat","America/Yellowknife","Antarctica/Casey","Antarctica/Davis","Antarctica/DumontDUrville","Antarctica/Macquarie","Antarctica/Mawson","Antarctica/McMurdo","Antarctica/Palmer","Antarctica/Rothera","Antarctica/South_Pole","Antarctica/Syowa","Antarctica/Vostok","Arctic/Longyearbyen","Asia/Aden","Asia/Almaty","Asia/Amman","Asia/Anadyr","Asia/Aqtau","Asia/Aqtobe","Asia/Ashgabat","Asia/Ashkhabad","Asia/Baghdad","Asia/Bahrain","Asia/Baku","Asia/Bangkok","Asia/Beirut","Asia/Bishkek","Asia/Brunei","Asia/Calcutta","Asia/Choibalsan","Asia/Chongqing","Asia/Chungking","Asia/Colombo","Asia/Dacca","Asia/Damascus","Asia/Dhaka","Asia/Dili","Asia/Dubai","Asia/Dushanbe","Asia/Gaza","Asia/Harbin","Asia/Ho_Chi_Minh","Asia/Hong_Kong","Asia/Hovd","Asia/Irkutsk","Asia/Istanbul","Asia/Jakarta","Asia/Jayapura","Asia/Jerusalem","Asia/Kabul","Asia/Kamchatka","Asia/Karachi","Asia/Kashgar","Asia/Kathmandu","Asia/Katmandu","Asia/Kolkata","Asia/Krasnoyarsk","Asia/Kuala_Lumpur","Asia/Kuching","Asia/Kuwait","Asia/Macao","Asia/Macau","Asia/Magadan","Asia/Makassar","Asia/Manila","Asia/Muscat","Asia/Nicosia","Asia/Novokuznetsk","Asia/Novosibirsk","Asia/Omsk","Asia/Oral","Asia/Phnom_Penh","Asia/Pontianak","Asia/Pyongyang","Asia/Qatar","Asia/Qyzylorda","Asia/Rangoon","Asia/Riyadh","Asia/Saigon","Asia/Sakhalin","Asia/Samarkand","Asia/Seoul","Asia/Shanghai","Asia/Singapore","Asia/Taipei","Asia/Tashkent","Asia/Tbilisi","Asia/Tehran","Asia/Tel_Aviv","Asia/Thimbu","Asia/Thimphu","Asia/Tokyo","Asia/Ujung_Pandang","Asia/Ulaanbaatar","Asia/Ulan_Bator","Asia/Urumqi","Asia/Vientiane","Asia/Vladivostok","Asia/Yakutsk","Asia/Yekaterinburg","Asia/Yerevan","Atlantic/Azores","Atlantic/Bermuda","Atlantic/Canary","Atlantic/Cape_Verde","Atlantic/Faeroe","Atlantic/Faroe","Atlantic/Jan_Mayen","Atlantic/Madeira","Atlantic/Reykjavik","Atlantic/South_Georgia","Atlantic/St_Helena","Atlantic/Stanley","Australia/ACT","Australia/Adelaide","Australia/Brisbane","Australia/Broken_Hill","Australia/Canberra","Australia/Currie","Australia/Darwin","Australia/Eucla","Australia/Hobart","Australia/LHI","Australia/Lindeman","Australia/Lord_Howe","Australia/Melbourne","Australia/North","Australia/NSW","Australia/Perth","Australia/Queensland","Australia/South","Australia/Sydney","Australia/Tasmania","Australia/Victoria","Australia/West","Australia/Yancowinna","Europe/Amsterdam","Europe/Andorra","Europe/Athens","Europe/Belfast","Europe/Belgrade","Europe/Berlin","Europe/Bratislava","Europe/Brussels","Europe/Bucharest","Europe/Budapest","Europe/Chisinau","Europe/Copenhagen","Europe/Dublin","Europe/Gibraltar","Europe/Guernsey","Europe/Helsinki","Europe/Isle_of_Man","Europe/Istanbul","Europe/Jersey","Europe/Kaliningrad","Europe/Kiev","Europe/Lisbon","Europe/Ljubljana","Europe/London","Europe/Luxembourg","Europe/Madrid","Europe/Malta","Europe/Mariehamn","Europe/Minsk","Europe/Monaco","Europe/Moscow","Europe/Nicosia","Europe/Oslo","Europe/Paris","Europe/Podgorica","Europe/Prague","Europe/Riga","Europe/Rome","Europe/Samara","Europe/San_Marino","Europe/Sarajevo","Europe/Simferopol","Europe/Skopje","Europe/Sofia","Europe/Stockholm","Europe/Tallinn","Europe/Tirane","Europe/Tiraspol","Europe/Uzhgorod","Europe/Vaduz","Europe/Vatican","Europe/Vienna","Europe/Vilnius","Europe/Volgograd","Europe/Warsaw","Europe/Zagreb","Europe/Zaporozhye","Europe/Zurich","Indian/Antananarivo","Indian/Chagos","Indian/Christmas","Indian/Cocos","Indian/Comoro","Indian/Kerguelen","Indian/Mahe","Indian/Maldives","Indian/Mauritius","Indian/Mayotte","Indian/Reunion","Pacific/Apia","Pacific/Auckland","Pacific/Chatham","Pacific/Easter","Pacific/Efate","Pacific/Enderbury","Pacific/Fakaofo","Pacific/Fiji","Pacific/Funafuti","Pacific/Galapagos","Pacific/Gambier","Pacific/Guadalcanal","Pacific/Guam","Pacific/Honolulu","Pacific/Honolulu","Pacific/Johnston","Pacific/Kiritimati","Pacific/Kosrae","Pacific/Kwajalein","Pacific/Majuro","Pacific/Marquesas","Pacific/Midway","Pacific/Nauru","Pacific/Niue","Pacific/Norfolk","Pacific/Noumea","Pacific/Pago_Pago","Pacific/Palau","Pacific/Pitcairn","Pacific/Ponape","Pacific/Port_Moresby","Pacific/Rarotonga","Pacific/Saipan","Pacific/Samoa","Pacific/Tahiti","Pacific/Tarawa","Pacific/Tongatapu","Pacific/Truk","Pacific/Wake","Pacific/Wallis","Pacific/Yap","UTC"];return e}return{getTimezones:e}}]),app.service("EventTypesService",[function(){var e=function(){return[{name:"Account Modified",code:"account:modified"},{name:"Cart Payment Completed",code:"cart:payment_completed"},{name:"Gateway Created",code:"gateway:created"},{name:"Gateway Modified",code:"gateway:modified"},{name:"Event Subscription Created",code:"event_subscription:created"},{name:"Event Subscription Modified",code:"event_subscription:modified"},{name:"Event Subscription Deleted",code:"event_subscription:deleted"},{name:"License Service Low Licenses",code:"license_service:low_licenses"},{name:"Invoice Created",code:"invoice:created"},{name:"Invoice Published",code:"invoice:published"},{name:"Invoice Paid",code:"invoice:paid"},{name:"Invoice Payment Completed",code:"invoice:payment_completed"},{name:"Order Created",code:"order:created"},{name:"Order Licenses Assigned",code:"order:licenses_assigned"},{name:"Order Payment Completed",code:"order:payment_completed"},{name:"Order Fulfilled",code:"order:fulfilled"},{name:"Payment Completed",code:"payment:completed"},{name:"Payment Created Success",code:"payment:created_success"},{name:"Payment Created Failure",code:"payment:created_failure"},{name:"Payment Captured Success",code:"payment:captured_success"},{name:"Payment Captured Failure",code:"payment:captured_failure"},{name:"Payment Voided",code:"payment:voided"},{name:"Product Created",code:"product:created"},{name:"Product Modified",code:"product:modified"},{name:"Product Deleted",code:"product:deleted"},{name:"Refund Created Success",code:"refund:created_success"},{name:"Refund Created Failure",code:"refund:created_failure"},{name:"Refund Deleted",code:"refund:deleted"},{name:"User Created",code:"user:created"},{name:"User Modified",code:"user:modified"},{name:"Shipment Created",code:"shipment:created"},{name:"Shipment Modified",code:"shipment:modified"},{name:"Shipment Deleted",code:"shipment:deleted"},{name:"Subscription Created",code:"subscription:created"},{name:"Subscription Cancelled",code:"subscription:cancelled"},{name:"Subscription Item Added",code:"subscription_item:added"},{name:"Subscription Item Cancelled",code:"subscription_item:cancelled"},{name:"Subscription Item Modified",code:"subscription_item:modified"},{name:"Subscription Completed",code:"subscription:completed"},{name:"Subscription Converted",code:"subscription:converted"},{name:"Subscription Renewal Success",code:"subscription:renewal_success"},{name:"Subscription Renewal Failure",code:"subscription:renewal_failure"}]};return{getEventsTypes:e}}]),app.service("HelperService",["SettingsService",function(e){function t(){var e=localStorage.getItem("token");return!(!e||"admin"!=e.substring(0,5))}function n(){var e=localStorage.getItem("model");return!(!e||"reseller"!=e)}function i(){return!n()}return{isAdmin:t,isReseller:n,isAgent:i}}]),angular.module("gettext",[]),angular.module("gettext").constant("gettext",function(e){return e}),angular.module("gettext").factory("gettextCatalog",["gettextPlurals","$http","$cacheFactory","$interpolate","$rootScope",function(e,t,n,i,a){function r(){a.$broadcast("gettextLanguageChanged")}var o,s="$$noContext",l='<span id="test" title="test" class="tested">test</span>',c=angular.element("<span>"+l+"</span>").html()!==l,u=function(e){return o.debug&&o.currentLanguage!==o.baseLanguage?o.debugPrefix+e:e},d=function(e){return o.showTranslatedMarkers?o.translatedMarkerPrefix+e+o.translatedMarkerSuffix:e};return o={debug:!1,debugPrefix:"[MISSING]: ",showTranslatedMarkers:!1,translatedMarkerPrefix:"[",translatedMarkerSuffix:"]",strings:{},baseLanguage:"en",currentLanguage:"en",cache:n("strings"),setCurrentLanguage:function(e){this.currentLanguage=e,r()},getCurrentLanguage:function(){return this.currentLanguage},setStrings:function(e,t){this.strings[e]||(this.strings[e]={});for(var n in t){var i=t[n];if(c&&(n=angular.element("<span>"+n+"</span>").html()),angular.isString(i)||angular.isArray(i)){var a={};a[s]=i,i=a}for(var o in i){var l=i[o];i[o]=angular.isArray(l)?l:[l]}this.strings[e][n]=i}r()},getStringForm:function(e,t,n){var i=this.strings[this.currentLanguage]||{},a=i[e]||{},r=a[n||s]||[];return r[t]},getString:function(e,t,n){return e=this.getStringForm(e,0,n)||u(e),e=t?i(e)(t):e,d(e)},getPlural:function(t,n,a,r,o){var s=e(this.currentLanguage,t);return n=this.getStringForm(n,s,o)||u(1===t?n:a),r&&(r.$count=t,n=i(n)(r)),d(n)},loadRemote:function(e){return t({method:"GET",url:e,cache:o.cache}).then(function(e){var t=e.data;for(var n in t)o.setStrings(n,t[n]);return e})}}}]),angular.module("gettext").directive("translate",["gettextCatalog","$parse","$animate","$compile","$window",function(e,t,n,i,a){function r(e,t,n){if(!e)throw new Error("You should add a "+t+" attribute whenever you add a "+n+" attribute.")}var o=function(){return String.prototype.trim?function(e){return"string"==typeof e?e.trim():e}:function(e){return"string"==typeof e?e.replace(/^\s*/,"").replace(/\s*$/,""):e}}(),s=parseInt((/msie (\d+)/.exec(angular.lowercase(a.navigator.userAgent))||[])[1],10);return{restrict:"AE",terminal:!0,compile:function(a,l){r(!l.translatePlural||l.translateN,"translate-n","translate-plural"),r(!l.translateN||l.translatePlural,"translate-plural","translate-n");var c=o(a.html()),u=l.translatePlural,d=l.translateContext;return s<=8&&"<!--IE fix-->"===c.slice(-13)&&(c=c.slice(0,-13)),{post:function(a,r,s){function l(){var t;u?(a=h||(h=a.$new()),a.$count=p(a),t=e.getPlural(a.$count,c,u,null,d)):t=e.getString(c,null,d);var s=r.contents();if(0!==s.length){if(t===o(s.html()))return void(f&&i(s)(a));var l=angular.element("<span>"+t+"</span>");i(l.contents())(a);var m=l.contents();n.enter(m,r),n.leave(s)}}var p=t(s.translateN),h=null,f=!0;s.translateN&&a.$watch(s.translateN,l),a.$on("gettextLanguageChanged",l),l(),f=!1}}}}}]),angular.module("gettext").filter("translate",["gettextCatalog",function(e){function t(t,n){return e.getString(t,null,n)}return t.$stateful=!0,t}]),angular.module("gettext").factory("gettextPlurals",function(){return function(e,t){switch(e){case"ay":case"bo":case"cgg":case"dz":case"fa":case"id":case"ja":case"jbo":case"ka":case"kk":case"km":case"ko":case"ky":case"lo":case"ms":case"my":case"sah":case"su":case"th":case"tt":case"ug":case"vi":case"wo":case"zh":return 0;case"is":return t%10!=1||t%100==11?1:0;case"jv":return 0!=t?1:0;case"mk":return 1==t||t%10==1?0:1;case"ach":case"ak":case"am":case"arn":case"br":case"fil":case"fr":case"gun":case"ln":case"mfe":case"mg":case"mi":case"oc":case"pt_BR":case"tg":case"ti":case"tr":case"uz":case"wa":case"zh":return t>1?1:0;case"lv":return t%10==1&&t%100!=11?0:0!=t?1:2;case"lt":return t%10==1&&t%100!=11?0:t%10>=2&&(t%100<10||t%100>=20)?1:2;case"be":case"bs":case"hr":case"ru":case"sr":case"uk":return t%10==1&&t%100!=11?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2;case"mnk":return 0==t?0:1==t?1:2;case"ro":return 1==t?0:0==t||t%100>0&&t%100<20?1:2;case"pl":return 1==t?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2;case"cs":case"sk":return 1==t?0:t>=2&&t<=4?1:2;case"sl":return t%100==1?1:t%100==2?2:t%100==3||t%100==4?3:0;case"mt":return 1==t?0:0==t||t%100>1&&t%100<11?1:t%100>10&&t%100<20?2:3;case"gd":return 1==t||11==t?0:2==t||12==t?1:t>2&&t<20?2:3;case"cy":return 1==t?0:2==t?1:8!=t&&11!=t?2:3;case"kw":return 1==t?0:2==t?1:3==t?2:3;case"ga":return 1==t?0:2==t?1:t<7?2:t<11?3:4;case"ar":return 0==t?0:1==t?1:2==t?2:t%100>=3&&t%100<=10?3:t%100>=11?4:5;default:return 1!=t?1:0}}}),angular.module("colorpicker.module",[]).factory("Helper",function(){"use strict";return{closestSlider:function(e){var t=e.matches||e.webkitMatchesSelector||e.mozMatchesSelector||e.msMatchesSelector;return t.bind(e)("I")?e.parentNode:e},getOffset:function(e,t){for(var n=0,i=0,a=0,r=0;e&&!isNaN(e.offsetLeft)&&!isNaN(e.offsetTop);)n+=e.offsetLeft,i+=e.offsetTop,t||"BODY"!==e.tagName?(a+=e.scrollLeft,r+=e.scrollTop):(a+=document.documentElement.scrollLeft||e.scrollLeft,r+=document.documentElement.scrollTop||e.scrollTop),e=e.offsetParent;return{top:i,left:n,scrollX:a,scrollY:r}},stringParsers:[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(e){return[e[1],e[2],e[3],e[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(e){return[2.55*e[1],2.55*e[2],2.55*e[3],e[4]]}},{re:/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/,parse:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/,parse:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}}]}}).factory("Color",["Helper",function(e){"use strict";return{value:{h:1,s:1,b:1,a:1},rgb:function(){var e=this.toRGB();return"rgb("+e.r+","+e.g+","+e.b+")"},rgba:function(){var e=this.toRGB();return"rgba("+e.r+","+e.g+","+e.b+","+e.a+")"},hex:function(){return this.toHex()},RGBtoHSB:function(e,t,n,i){e/=255,t/=255,n/=255;var a,r,o,s;return o=Math.max(e,t,n),s=o-Math.min(e,t,n),a=0===s?null:o===e?(t-n)/s:o===t?(n-e)/s+2:(e-t)/s+4,a=(a+360)%6*60/360,r=0===s?0:s/o,{h:a||1,s:r,b:o,a:i||1}},setColor:function(t){t=t.toLowerCase();for(var n in e.stringParsers)if(e.stringParsers.hasOwnProperty(n)){var i=e.stringParsers[n],a=i.re.exec(t),r=a&&i.parse(a);if(r)return this.value=this.RGBtoHSB.apply(null,r),!1}},setHue:function(e){this.value.h=1-e},setSaturation:function(e){this.value.s=e},setLightness:function(e){this.value.b=1-e},setAlpha:function(e){this.value.a=parseInt(100*(1-e),10)/100},toRGB:function(e,t,n,i){e||(e=this.value.h,t=this.value.s,n=this.value.b),e*=360;var a,r,o,s,l;return e=e%360/60,l=n*t,s=l*(1-Math.abs(e%2-1)),a=r=o=n-l,e=~~e,a+=[l,s,0,0,s,l][e],r+=[s,l,l,s,0,0][e],o+=[0,0,s,l,l,s][e],{r:Math.round(255*a),g:Math.round(255*r),b:Math.round(255*o),a:i||this.value.a}},toHex:function(e,t,n,i){var a=this.toRGB(e,t,n,i);return"#"+(1<<24|parseInt(a.r,10)<<16|parseInt(a.g,10)<<8|parseInt(a.b,10)).toString(16).substr(1)}}}]).factory("Slider",["Helper",function(e){"use strict";var t={maxLeft:0,maxTop:0,callLeft:null,callTop:null,knob:{top:0,left:0}},n={};return{getSlider:function(){return t},getLeftPosition:function(e){return Math.max(0,Math.min(t.maxLeft,t.left+((e.pageX||n.left)-n.left)))},getTopPosition:function(e){return Math.max(0,Math.min(t.maxTop,t.top+((e.pageY||n.top)-n.top)))},setSlider:function(i,a){var r=e.closestSlider(i.target),o=e.getOffset(r,a),s=r.getBoundingClientRect(),l=i.clientX-s.left,c=i.clientY-s.top;t.knob=r.children[0].style,t.left=i.pageX-o.left-window.pageXOffset+o.scrollX,t.top=i.pageY-o.top-window.pageYOffset+o.scrollY,n={left:i.pageX-(l-t.left),top:i.pageY-(c-t.top)}},setSaturation:function(e,n){t={maxLeft:100,maxTop:100,callLeft:"setSaturation",callTop:"setLightness"},this.setSlider(e,n)},setHue:function(e,n){t={maxLeft:0,maxTop:100,callLeft:!1,callTop:"setHue"},this.setSlider(e,n)},setAlpha:function(e,n){t={maxLeft:0,maxTop:100,callLeft:!1,callTop:"setAlpha"},this.setSlider(e,n)},setKnob:function(e,n){t.knob.top=e+"px",t.knob.left=n+"px"}}}]).directive("colorpicker",["$document","$compile","Color","Slider","Helper",function(e,t,n,i,a){"use strict";return{require:"?ngModel",restrict:"A",link:function(r,o,s,l){var c,u=s.colorpicker?s.colorpicker:"hex",d=angular.isDefined(s.colorpickerPosition)?s.colorpickerPosition:"bottom",p=!!angular.isDefined(s.colorpickerInline)&&s.colorpickerInline,h=!!angular.isDefined(s.colorpickerFixedPosition)&&s.colorpickerFixedPosition,f=angular.isDefined(s.colorpickerParent)?o.parent():angular.element(document.body),m=!!angular.isDefined(s.colorpickerWithInput)&&s.colorpickerWithInput,g=m?'<input type="text" name="colorpicker-input">':"",v=p?"":'<button type="button" class="close close-colorpicker">&times;</button>',b='<div class="colorpicker dropdown"><div class="dropdown-menu"><colorpicker-saturation><i></i></colorpicker-saturation><colorpicker-hue><i></i></colorpicker-hue><colorpicker-alpha><i></i></colorpicker-alpha><colorpicker-preview></colorpicker-preview>'+g+v+"</div></div>",y=angular.element(b),w=n,S=y.find("colorpicker-hue"),k=y.find("colorpicker-saturation"),A=y.find("colorpicker-preview"),x=y.find("i");if(t(y)(r),m){var _=y.find("input");_.on("mousedown",function(e){e.stopPropagation()}).on("keyup",function(e){var t=this.value;o.val(t),l&&r.$apply(l.$setViewValue(t)),e.stopPropagation(),e.preventDefault()}),o.on("keyup",function(){_.val(o.val())})}var C=function(){e.on("mousemove",M),e.on("mouseup",E)};"rgba"===u&&(y.addClass("alpha"),c=y.find("colorpicker-alpha"),c.on("click",function(e){i.setAlpha(e,h),M(e)}).on("mousedown",function(e){i.setAlpha(e,h),C()}).on("mouseup",function(e){L("colorpicker-selected-alpha")})),S.on("click",function(e){i.setHue(e,h),M(e)}).on("mousedown",function(e){i.setHue(e,h),C()}).on("mouseup",function(e){L("colorpicker-selected-hue")}),k.on("click",function(e){i.setSaturation(e,h),M(e),angular.isDefined(s.colorpickerCloseOnSelect)&&F()}).on("mousedown",function(e){i.setSaturation(e,h),C()}).on("mouseup",function(e){L("colorpicker-selected-saturation")}),h&&y.addClass("colorpicker-fixed-position"),y.addClass("colorpicker-position-"+d),"true"===p&&y.addClass("colorpicker-inline"),f.append(y),l&&(l.$render=function(){o.val(l.$viewValue)},r.$watch(s.ngModel,function(e){P(),m&&_.val(e)})),o.on("$destroy",function(){y.remove()});var T=function(){try{A.css("backgroundColor",w[u]())}catch(e){A.css("backgroundColor",w.toHex())}k.css("backgroundColor",w.toHex(w.value.h,1,1,1)),"rgba"===u&&(c.css.backgroundColor=w.toHex())},M=function(e){var t=i.getLeftPosition(e),n=i.getTopPosition(e),a=i.getSlider();i.setKnob(n,t),a.callLeft&&w[a.callLeft].call(w,t/100),a.callTop&&w[a.callTop].call(w,n/100),T();var s=w[u]();return o.val(s),l&&r.$apply(l.$setViewValue(s)),m&&_.val(s),!1},E=function(){L("colorpicker-selected"),e.off("mousemove",M),e.off("mouseup",E)},P=function(){w.setColor(o.val()),x.eq(0).css({left:100*w.value.s+"px",top:100-100*w.value.b+"px"}),x.eq(1).css("top",100*(1-w.value.h)+"px"),x.eq(2).css("top",100*(1-w.value.a)+"px"),T()},D=function(){var e,t=a.getOffset(o[0]);return angular.isDefined(s.colorpickerParent)&&(t.left=0,t.top=0),"top"===d?e={top:t.top-147,left:t.left}:"right"===d?e={top:t.top,left:t.left+126}:"bottom"===d?e={top:t.top+o[0].offsetHeight+2,left:t.left}:"left"===d&&(e={top:t.top,left:t.left-150}),{top:e.top+"px",left:e.left+"px"}},$=function(){F()},I=function(){y.hasClass("colorpicker-visible")||(P(),y.addClass("colorpicker-visible").css(D()),L("colorpicker-shown"),p===!1&&e.on("mousedown",$),s.colorpickerIsOpen&&(r[s.colorpickerIsOpen]=!0,r.$$phase||r.$digest()))};p===!1?o.on("click",I):I(),y.on("mousedown",function(e){e.stopPropagation(),e.preventDefault()});var L=function(e){l&&r.$emit(e,{name:s.ngModel,value:l.$modelValue})},F=function(){y.hasClass("colorpicker-visible")&&(y.removeClass("colorpicker-visible"),L("colorpicker-closed"),e.off("mousedown",$),s.colorpickerIsOpen&&(r[s.colorpickerIsOpen]=!1,r.$$phase||r.$digest()))};y.find("button").on("click",function(){F()}),s.colorpickerIsOpen&&r.$watch(s.colorpickerIsOpen,function(e){e===!0?I():e===!1&&F()})}}}]),function(){"use strict";var e=this,t=e.Chart,n=function(e){this.canvas=e.canvas,this.ctx=e;this.width=e.canvas.width,this.height=e.canvas.height;return this.aspectRatio=this.width/this.height,i.retinaScale(this),this};n.defaults={global:{animation:!0,animationSteps:60,animationEasing:"easeOutQuart",showScale:!0,scaleOverride:!1,scaleSteps:null,scaleStepWidth:null,scaleStartValue:null,scaleLineColor:"rgba(0,0,0,.1)",scaleLineWidth:1,scaleShowLabels:!0,scaleLabel:"<%=value%>",scaleIntegersOnly:!0,scaleBeginAtZero:!1,scaleFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",scaleFontSize:12,scaleFontStyle:"normal",scaleFontColor:"#666",responsive:!1,maintainAspectRatio:!0,showTooltips:!0,customTooltips:!1,tooltipEvents:["mousemove","touchstart","touchmove","mouseout"],tooltipFillColor:"rgba(0,0,0,0.8)",tooltipFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",tooltipFontSize:14,tooltipFontStyle:"normal",tooltipFontColor:"#fff",tooltipTitleFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",tooltipTitleFontSize:14,tooltipTitleFontStyle:"bold",tooltipTitleFontColor:"#fff",tooltipYPadding:6,tooltipXPadding:6,tooltipCaretSize:8,tooltipCornerRadius:6,tooltipXOffset:10,tooltipTemplate:"<%if (label){%><%=label%>: <%}%><%= value %>",multiTooltipTemplate:"<%= value %>",multiTooltipKeyBackground:"#fff",onAnimationProgress:function(){},onAnimationComplete:function(){}}},n.types={};var i=n.helpers={},a=i.each=function(e,t,n){var i=Array.prototype.slice.call(arguments,3);if(e)if(e.length===+e.length){var a;for(a=0;a<e.length;a++)t.apply(n,[e[a],a].concat(i))}else for(var r in e)t.apply(n,[e[r],r].concat(i))},r=i.clone=function(e){var t={};return a(e,function(n,i){e.hasOwnProperty(i)&&(t[i]=n)}),t},o=i.extend=function(e){return a(Array.prototype.slice.call(arguments,1),function(t){a(t,function(n,i){t.hasOwnProperty(i)&&(e[i]=n)})}),e},s=i.merge=function(e,t){var n=Array.prototype.slice.call(arguments,0);return n.unshift({}),o.apply(null,n)},l=i.indexOf=function(e,t){if(Array.prototype.indexOf)return e.indexOf(t);for(var n=0;n<e.length;n++)if(e[n]===t)return n;return-1},c=(i.where=function(e,t){var n=[];return i.each(e,function(e){t(e)&&n.push(e)}),n},i.findNextWhere=function(e,t,n){n||(n=-1);for(var i=n+1;i<e.length;i++){var a=e[i];if(t(a))return a}},i.findPreviousWhere=function(e,t,n){n||(n=e.length);for(var i=n-1;i>=0;i--){var a=e[i];if(t(a))return a}},i.inherits=function(e){var t=this,n=e&&e.hasOwnProperty("constructor")?e.constructor:function(){return t.apply(this,arguments)},i=function(){this.constructor=n};return i.prototype=t.prototype,n.prototype=new i,n.extend=c,e&&o(n.prototype,e),n.__super__=t.prototype,n}),u=i.noop=function(){},d=i.uid=function(){var e=0;return function(){return"chart-"+e++}}(),p=i.warn=function(e){window.console&&"function"==typeof window.console.warn&&console.warn(e)},h=i.amd="function"==typeof define&&define.amd,f=i.isNumber=function(e){return!isNaN(parseFloat(e))&&isFinite(e)},m=i.max=function(e){return Math.max.apply(Math,e)},g=i.min=function(e){return Math.min.apply(Math,e)},v=(i.cap=function(e,t,n){if(f(t)){if(e>t)return t}else if(f(n)&&e<n)return n;return e},i.getDecimalPlaces=function(e){return e%1!==0&&f(e)?e.toString().split(".")[1].length:0}),b=i.radians=function(e){return e*(Math.PI/180)},y=(i.getAngleFromPoint=function(e,t){var n=t.x-e.x,i=t.y-e.y,a=Math.sqrt(n*n+i*i),r=2*Math.PI+Math.atan2(i,n);return n<0&&i<0&&(r+=2*Math.PI),{angle:r,distance:a}},i.aliasPixel=function(e){return e%2===0?0:.5}),w=(i.splineCurve=function(e,t,n,i){var a=Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)),r=Math.sqrt(Math.pow(n.x-t.x,2)+Math.pow(n.y-t.y,2)),o=i*a/(a+r),s=i*r/(a+r);return{inner:{x:t.x-o*(n.x-e.x),y:t.y-o*(n.y-e.y)},outer:{x:t.x+s*(n.x-e.x),y:t.y+s*(n.y-e.y)}}},i.calculateOrderOfMagnitude=function(e){return Math.floor(Math.log(e)/Math.LN10)}),S=(i.calculateScaleRange=function(e,t,n,i,a){var r=2,o=Math.floor(t/(1.5*n)),s=r>=o,l=m(e),c=g(e);l===c&&(l+=.5,c>=.5&&!i?c-=.5:l+=.5);for(var u=Math.abs(l-c),d=w(u),p=Math.ceil(l/(1*Math.pow(10,d)))*Math.pow(10,d),h=i?0:Math.floor(c/(1*Math.pow(10,d)))*Math.pow(10,d),f=p-h,v=Math.pow(10,d),b=Math.round(f/v);(b>o||2*b<o)&&!s;)if(b>o)v*=2,b=Math.round(f/v),b%1!==0&&(s=!0);else if(a&&d>=0){if(v/2%1!==0)break;v/=2,b=Math.round(f/v)}else v/=2,b=Math.round(f/v);return s&&(b=r,v=f/b),{steps:b,stepValue:v,min:h,max:h+b*v}},i.template=function(e,t){function n(e,t){var n=/\W/.test(e)?new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+e.replace(/[\r\t\n]/g," ").split("<%").join("\t").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("\t").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');"):i[e]=i[e];return t?n(t):n}if(e instanceof Function)return e(t);var i={};return n(e,t)}),k=(i.generateLabels=function(e,t,n,i){var r=new Array(t);return labelTemplateString&&a(r,function(t,a){r[a]=S(e,{value:n+i*(a+1)})}),r},i.easingEffects={linear:function(e){return e},easeInQuad:function(e){return e*e},easeOutQuad:function(e){return-1*e*(e-2)},easeInOutQuad:function(e){return(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1)},easeInCubic:function(e){return e*e*e},easeOutCubic:function(e){return 1*((e=e/1-1)*e*e+1)},easeInOutCubic:function(e){return(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2)},easeInQuart:function(e){return e*e*e*e},easeOutQuart:function(e){return-1*((e=e/1-1)*e*e*e-1)},easeInOutQuart:function(e){return(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)},easeInQuint:function(e){return 1*(e/=1)*e*e*e*e},easeOutQuint:function(e){return 1*((e=e/1-1)*e*e*e*e+1)},easeInOutQuint:function(e){return(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)},easeInSine:function(e){return-1*Math.cos(e/1*(Math.PI/2))+1},easeOutSine:function(e){return 1*Math.sin(e/1*(Math.PI/2))},easeInOutSine:function(e){return-.5*(Math.cos(Math.PI*e/1)-1)},easeInExpo:function(e){return 0===e?1:1*Math.pow(2,10*(e/1-1))},easeOutExpo:function(e){return 1===e?1:1*(-Math.pow(2,-10*e/1)+1)},easeInOutExpo:function(e){return 0===e?0:1===e?1:(e/=.5)<1?.5*Math.pow(2,10*(e-1)):.5*(-Math.pow(2,-10*--e)+2)},easeInCirc:function(e){return e>=1?e:-1*(Math.sqrt(1-(e/=1)*e)-1)},easeOutCirc:function(e){return 1*Math.sqrt(1-(e=e/1-1)*e)},easeInOutCirc:function(e){return(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)},easeInElastic:function(e){var t=1.70158,n=0,i=1;return 0===e?0:1==(e/=1)?1:(n||(n=.3),
i<Math.abs(1)?(i=1,t=n/4):t=n/(2*Math.PI)*Math.asin(1/i),-(i*Math.pow(2,10*(e-=1))*Math.sin((1*e-t)*(2*Math.PI)/n)))},easeOutElastic:function(e){var t=1.70158,n=0,i=1;return 0===e?0:1==(e/=1)?1:(n||(n=.3),i<Math.abs(1)?(i=1,t=n/4):t=n/(2*Math.PI)*Math.asin(1/i),i*Math.pow(2,-10*e)*Math.sin((1*e-t)*(2*Math.PI)/n)+1)},easeInOutElastic:function(e){var t=1.70158,n=0,i=1;return 0===e?0:2==(e/=.5)?1:(n||(n=1*(.3*1.5)),i<Math.abs(1)?(i=1,t=n/4):t=n/(2*Math.PI)*Math.asin(1/i),e<1?-.5*(i*Math.pow(2,10*(e-=1))*Math.sin((1*e-t)*(2*Math.PI)/n)):i*Math.pow(2,-10*(e-=1))*Math.sin((1*e-t)*(2*Math.PI)/n)*.5+1)},easeInBack:function(e){var t=1.70158;return 1*(e/=1)*e*((t+1)*e-t)},easeOutBack:function(e){var t=1.70158;return 1*((e=e/1-1)*e*((t+1)*e+t)+1)},easeInOutBack:function(e){var t=1.70158;return(e/=.5)<1?.5*(e*e*(((t*=1.525)+1)*e-t)):.5*((e-=2)*e*(((t*=1.525)+1)*e+t)+2)},easeInBounce:function(e){return 1-k.easeOutBounce(1-e)},easeOutBounce:function(e){return(e/=1)<1/2.75?1*(7.5625*e*e):e<2/2.75?1*(7.5625*(e-=1.5/2.75)*e+.75):e<2.5/2.75?1*(7.5625*(e-=2.25/2.75)*e+.9375):1*(7.5625*(e-=2.625/2.75)*e+.984375)},easeInOutBounce:function(e){return e<.5?.5*k.easeInBounce(2*e):.5*k.easeOutBounce(2*e-1)+.5}}),A=i.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){return window.setTimeout(e,1e3/60)}}(),x=(i.cancelAnimFrame=function(){return window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame||function(e){return window.clearTimeout(e,1e3/60)}}(),i.animationLoop=function(e,t,n,i,a,r){var o=0,s=k[n]||k.linear,l=function(){o++;var n=o/t,c=s(n);e.call(r,c,n,o),i.call(r,c,n),o<t?r.animationFrame=A(l):a.apply(r)};A(l)},i.getRelativePosition=function(e){var t,n,i=e.originalEvent||e,a=e.currentTarget||e.srcElement,r=a.getBoundingClientRect();return i.touches?(t=i.touches[0].clientX-r.left,n=i.touches[0].clientY-r.top):(t=i.clientX-r.left,n=i.clientY-r.top),{x:t,y:n}},i.addEvent=function(e,t,n){e.addEventListener?e.addEventListener(t,n):e.attachEvent?e.attachEvent("on"+t,n):e["on"+t]=n}),_=i.removeEvent=function(e,t,n){e.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent?e.detachEvent("on"+t,n):e["on"+t]=u},C=(i.bindEvents=function(e,t,n){e.events||(e.events={}),a(t,function(t){e.events[t]=function(){n.apply(e,arguments)},x(e.chart.canvas,t,e.events[t])})},i.unbindEvents=function(e,t){a(t,function(t,n){_(e.chart.canvas,n,t)})}),T=i.getMaximumWidth=function(e){var t=e.parentNode;return t.clientWidth},M=i.getMaximumHeight=function(e){var t=e.parentNode;return t.clientHeight},E=(i.getMaximumSize=i.getMaximumWidth,i.retinaScale=function(e){var t=e.ctx,n=e.canvas.width,i=e.canvas.height;window.devicePixelRatio&&(t.canvas.style.width=n+"px",t.canvas.style.height=i+"px",t.canvas.height=i*window.devicePixelRatio,t.canvas.width=n*window.devicePixelRatio,t.scale(window.devicePixelRatio,window.devicePixelRatio))}),P=i.clear=function(e){e.ctx.clearRect(0,0,e.width,e.height)},D=i.fontString=function(e,t,n){return t+" "+e+"px "+n},$=i.longestText=function(e,t,n){e.font=t;var i=0;return a(n,function(t){var n=e.measureText(t).width;i=n>i?n:i}),i},I=i.drawRoundedRectangle=function(e,t,n,i,a,r){e.beginPath(),e.moveTo(t+r,n),e.lineTo(t+i-r,n),e.quadraticCurveTo(t+i,n,t+i,n+r),e.lineTo(t+i,n+a-r),e.quadraticCurveTo(t+i,n+a,t+i-r,n+a),e.lineTo(t+r,n+a),e.quadraticCurveTo(t,n+a,t,n+a-r),e.lineTo(t,n+r),e.quadraticCurveTo(t,n,t+r,n),e.closePath()};n.instances={},n.Type=function(e,t,i){this.options=t,this.chart=i,this.id=d(),n.instances[this.id]=this,t.responsive&&this.resize(),this.initialize.call(this,e)},o(n.Type.prototype,{initialize:function(){return this},clear:function(){return P(this.chart),this},stop:function(){return i.cancelAnimFrame.call(e,this.animationFrame),this},resize:function(e){this.stop();var t=this.chart.canvas,n=T(this.chart.canvas),i=this.options.maintainAspectRatio?n/this.chart.aspectRatio:M(this.chart.canvas);return t.width=this.chart.width=n,t.height=this.chart.height=i,E(this.chart),"function"==typeof e&&e.apply(this,Array.prototype.slice.call(arguments,1)),this},reflow:u,render:function(e){return e&&this.reflow(),this.options.animation&&!e?i.animationLoop(this.draw,this.options.animationSteps,this.options.animationEasing,this.options.onAnimationProgress,this.options.onAnimationComplete,this):(this.draw(),this.options.onAnimationComplete.call(this)),this},generateLegend:function(){return S(this.options.legendTemplate,this)},destroy:function(){this.clear(),C(this,this.events);var e=this.chart.canvas;e.width=this.chart.width,e.height=this.chart.height,e.style.removeProperty?(e.style.removeProperty("width"),e.style.removeProperty("height")):(e.style.removeAttribute("width"),e.style.removeAttribute("height")),delete n.instances[this.id]},showTooltip:function(e,t){"undefined"==typeof this.activeElements&&(this.activeElements=[]);var r=function(e){var t=!1;return e.length!==this.activeElements.length?t=!0:(a(e,function(e,n){e!==this.activeElements[n]&&(t=!0)},this),t)}.call(this,e);if(r||t){if(this.activeElements=e,this.draw(),this.options.customTooltips&&this.options.customTooltips(!1),e.length>0)if(this.datasets&&this.datasets.length>1){for(var o,s,c=this.datasets.length-1;c>=0&&(o=this.datasets[c].points||this.datasets[c].bars||this.datasets[c].segments,s=l(o,e[0]),s===-1);c--);var u=[],d=[],p=function(e){var t,n,a,r,o,l=[],c=[],p=[];return i.each(this.datasets,function(e){t=e.points||e.bars||e.segments,t[s]&&t[s].hasValue()&&l.push(t[s])}),i.each(l,function(e){c.push(e.x),p.push(e.y),u.push(i.template(this.options.multiTooltipTemplate,e)),d.push({fill:e._saved.fillColor||e.fillColor,stroke:e._saved.strokeColor||e.strokeColor})},this),o=g(p),a=m(p),r=g(c),n=m(c),{x:r>this.chart.width/2?r:n,y:(o+a)/2}}.call(this,s);new n.MultiTooltip({x:p.x,y:p.y,xPadding:this.options.tooltipXPadding,yPadding:this.options.tooltipYPadding,xOffset:this.options.tooltipXOffset,fillColor:this.options.tooltipFillColor,textColor:this.options.tooltipFontColor,fontFamily:this.options.tooltipFontFamily,fontStyle:this.options.tooltipFontStyle,fontSize:this.options.tooltipFontSize,titleTextColor:this.options.tooltipTitleFontColor,titleFontFamily:this.options.tooltipTitleFontFamily,titleFontStyle:this.options.tooltipTitleFontStyle,titleFontSize:this.options.tooltipTitleFontSize,cornerRadius:this.options.tooltipCornerRadius,labels:u,legendColors:d,legendColorBackground:this.options.multiTooltipKeyBackground,title:e[0].label,chart:this.chart,ctx:this.chart.ctx,custom:this.options.customTooltips}).draw()}else a(e,function(e){var t=e.tooltipPosition();new n.Tooltip({x:Math.round(t.x),y:Math.round(t.y),xPadding:this.options.tooltipXPadding,yPadding:this.options.tooltipYPadding,fillColor:this.options.tooltipFillColor,textColor:this.options.tooltipFontColor,fontFamily:this.options.tooltipFontFamily,fontStyle:this.options.tooltipFontStyle,fontSize:this.options.tooltipFontSize,caretHeight:this.options.tooltipCaretSize,cornerRadius:this.options.tooltipCornerRadius,text:S(this.options.tooltipTemplate,e),chart:this.chart,custom:this.options.customTooltips}).draw()},this);return this}},toBase64Image:function(){return this.chart.canvas.toDataURL.apply(this.chart.canvas,arguments)}}),n.Type.extend=function(e){var t=this,i=function(){return t.apply(this,arguments)};if(i.prototype=r(t.prototype),o(i.prototype,e),i.extend=n.Type.extend,e.name||t.prototype.name){var a=e.name||t.prototype.name,l=n.defaults[t.prototype.name]?r(n.defaults[t.prototype.name]):{};n.defaults[a]=o(l,e.defaults),n.types[a]=i,n.prototype[a]=function(e,t){var r=s(n.defaults.global,n.defaults[a],t||{});return new i(e,r,this)}}else p("Name not provided for this chart, so it hasn't been registered");return t},n.Element=function(e){o(this,e),this.initialize.apply(this,arguments),this.save()},o(n.Element.prototype,{initialize:function(){},restore:function(e){return e?a(e,function(e){this[e]=this._saved[e]},this):o(this,this._saved),this},save:function(){return this._saved=r(this),delete this._saved._saved,this},update:function(e){return a(e,function(e,t){this._saved[t]=this[t],this[t]=e},this),this},transition:function(e,t){return a(e,function(e,n){this[n]=(e-this._saved[n])*t+this._saved[n]},this),this},tooltipPosition:function(){return{x:this.x,y:this.y}},hasValue:function(){return f(this.value)}}),n.Element.extend=c,n.Point=n.Element.extend({display:!0,inRange:function(e,t){var n=this.hitDetectionRadius+this.radius;return Math.pow(e-this.x,2)+Math.pow(t-this.y,2)<Math.pow(n,2)},draw:function(){if(this.display){var e=this.ctx;e.beginPath(),e.arc(this.x,this.y,this.radius,0,2*Math.PI),e.closePath(),e.strokeStyle=this.strokeColor,e.lineWidth=this.strokeWidth,e.fillStyle=this.fillColor,e.fill(),e.stroke()}}}),n.Arc=n.Element.extend({inRange:function(e,t){var n=i.getAngleFromPoint(this,{x:e,y:t}),a=n.angle>=this.startAngle&&n.angle<=this.endAngle,r=n.distance>=this.innerRadius&&n.distance<=this.outerRadius;return a&&r},tooltipPosition:function(){var e=this.startAngle+(this.endAngle-this.startAngle)/2,t=(this.outerRadius-this.innerRadius)/2+this.innerRadius;return{x:this.x+Math.cos(e)*t,y:this.y+Math.sin(e)*t}},draw:function(e){var t=this.ctx;t.beginPath(),t.arc(this.x,this.y,this.outerRadius,this.startAngle,this.endAngle),t.arc(this.x,this.y,this.innerRadius,this.endAngle,this.startAngle,!0),t.closePath(),t.strokeStyle=this.strokeColor,t.lineWidth=this.strokeWidth,t.fillStyle=this.fillColor,t.fill(),t.lineJoin="bevel",this.showStroke&&t.stroke()}}),n.Rectangle=n.Element.extend({draw:function(){var e=this.ctx,t=this.width/2,n=this.x-t,i=this.x+t,a=this.base-(this.base-this.y),r=this.strokeWidth/2;this.showStroke&&(n+=r,i-=r,a+=r),e.beginPath(),e.fillStyle=this.fillColor,e.strokeStyle=this.strokeColor,e.lineWidth=this.strokeWidth,e.moveTo(n,this.base),e.lineTo(n,a),e.lineTo(i,a),e.lineTo(i,this.base),e.fill(),this.showStroke&&e.stroke()},height:function(){return this.base-this.y},inRange:function(e,t){return e>=this.x-this.width/2&&e<=this.x+this.width/2&&t>=this.y&&t<=this.base}}),n.Tooltip=n.Element.extend({draw:function(){var e=this.chart.ctx;e.font=D(this.fontSize,this.fontStyle,this.fontFamily),this.xAlign="center",this.yAlign="above";var t=this.caretPadding=2,n=e.measureText(this.text).width+2*this.xPadding,i=this.fontSize+2*this.yPadding,a=i+this.caretHeight+t;this.x+n/2>this.chart.width?this.xAlign="left":this.x-n/2<0&&(this.xAlign="right"),this.y-a<0&&(this.yAlign="below");var r=this.x-n/2,o=this.y-a;if(e.fillStyle=this.fillColor,this.custom)this.custom(this);else{switch(this.yAlign){case"above":e.beginPath(),e.moveTo(this.x,this.y-t),e.lineTo(this.x+this.caretHeight,this.y-(t+this.caretHeight)),e.lineTo(this.x-this.caretHeight,this.y-(t+this.caretHeight)),e.closePath(),e.fill();break;case"below":o=this.y+t+this.caretHeight,e.beginPath(),e.moveTo(this.x,this.y+t),e.lineTo(this.x+this.caretHeight,this.y+t+this.caretHeight),e.lineTo(this.x-this.caretHeight,this.y+t+this.caretHeight),e.closePath(),e.fill()}switch(this.xAlign){case"left":r=this.x-n+(this.cornerRadius+this.caretHeight);break;case"right":r=this.x-(this.cornerRadius+this.caretHeight)}I(e,r,o,n,i,this.cornerRadius),e.fill(),e.fillStyle=this.textColor,e.textAlign="center",e.textBaseline="middle",e.fillText(this.text,r+n/2,o+i/2)}}}),n.MultiTooltip=n.Element.extend({initialize:function(){this.font=D(this.fontSize,this.fontStyle,this.fontFamily),this.titleFont=D(this.titleFontSize,this.titleFontStyle,this.titleFontFamily),this.height=this.labels.length*this.fontSize+(this.labels.length-1)*(this.fontSize/2)+2*this.yPadding+1.5*this.titleFontSize,this.ctx.font=this.titleFont;var e=this.ctx.measureText(this.title).width,t=$(this.ctx,this.font,this.labels)+this.fontSize+3,n=m([t,e]);this.width=n+2*this.xPadding;var i=this.height/2;this.y-i<0?this.y=i:this.y+i>this.chart.height&&(this.y=this.chart.height-i),this.x>this.chart.width/2?this.x-=this.xOffset+this.width:this.x+=this.xOffset},getLineHeight:function(e){var t=this.y-this.height/2+this.yPadding,n=e-1;return 0===e?t+this.titleFontSize/2:t+(1.5*this.fontSize*n+this.fontSize/2)+1.5*this.titleFontSize},draw:function(){if(this.custom)this.custom(this);else{I(this.ctx,this.x,this.y-this.height/2,this.width,this.height,this.cornerRadius);var e=this.ctx;e.fillStyle=this.fillColor,e.fill(),e.closePath(),e.textAlign="left",e.textBaseline="middle",e.fillStyle=this.titleTextColor,e.font=this.titleFont,e.fillText(this.title,this.x+this.xPadding,this.getLineHeight(0)),e.font=this.font,i.each(this.labels,function(t,n){e.fillStyle=this.textColor,e.fillText(t,this.x+this.xPadding+this.fontSize+3,this.getLineHeight(n+1)),e.fillStyle=this.legendColorBackground,e.fillRect(this.x+this.xPadding,this.getLineHeight(n+1)-this.fontSize/2,this.fontSize,this.fontSize),e.fillStyle=this.legendColors[n].fill,e.fillRect(this.x+this.xPadding,this.getLineHeight(n+1)-this.fontSize/2,this.fontSize,this.fontSize)},this)}}}),n.Scale=n.Element.extend({initialize:function(){this.fit()},buildYLabels:function(){this.yLabels=[];for(var e=v(this.stepValue),t=0;t<=this.steps;t++)this.yLabels.push(S(this.templateString,{value:(this.min+t*this.stepValue).toFixed(e)}));this.yLabelWidth=this.display&&this.showLabels?$(this.ctx,this.font,this.yLabels):0},addXLabel:function(e){this.xLabels.push(e),this.valuesCount++,this.fit()},removeXLabel:function(){this.xLabels.shift(),this.valuesCount--,this.fit()},fit:function(){this.startPoint=this.display?this.fontSize:0,this.endPoint=this.display?this.height-1.5*this.fontSize-5:this.height,this.startPoint+=this.padding,this.endPoint-=this.padding;var e,t=this.endPoint-this.startPoint;for(this.calculateYRange(t),this.buildYLabels(),this.calculateXLabelRotation();t>this.endPoint-this.startPoint;)t=this.endPoint-this.startPoint,e=this.yLabelWidth,this.calculateYRange(t),this.buildYLabels(),e<this.yLabelWidth&&this.calculateXLabelRotation()},calculateXLabelRotation:function(){this.ctx.font=this.font;var e,t,n=this.ctx.measureText(this.xLabels[0]).width,i=this.ctx.measureText(this.xLabels[this.xLabels.length-1]).width;if(this.xScalePaddingRight=i/2+3,this.xScalePaddingLeft=n/2>this.yLabelWidth+10?n/2:this.yLabelWidth+10,this.xLabelRotation=0,this.display){var a,r=$(this.ctx,this.font,this.xLabels);this.xLabelWidth=r;for(var o=Math.floor(this.calculateX(1)-this.calculateX(0))-6;this.xLabelWidth>o&&0===this.xLabelRotation||this.xLabelWidth>o&&this.xLabelRotation<=90&&this.xLabelRotation>0;)a=Math.cos(b(this.xLabelRotation)),e=a*n,t=a*i,e+this.fontSize/2>this.yLabelWidth+8&&(this.xScalePaddingLeft=e+this.fontSize/2),this.xScalePaddingRight=this.fontSize/2,this.xLabelRotation++,this.xLabelWidth=a*r;this.xLabelRotation>0&&(this.endPoint-=Math.sin(b(this.xLabelRotation))*r+3)}else this.xLabelWidth=0,this.xScalePaddingRight=this.padding,this.xScalePaddingLeft=this.padding},calculateYRange:u,drawingArea:function(){return this.startPoint-this.endPoint},calculateY:function(e){var t=this.drawingArea()/(this.min-this.max);return this.endPoint-t*(e-this.min)},calculateX:function(e){var t=(this.xLabelRotation>0,this.width-(this.xScalePaddingLeft+this.xScalePaddingRight)),n=t/(this.valuesCount-(this.offsetGridLines?0:1)),i=n*e+this.xScalePaddingLeft;return this.offsetGridLines&&(i+=n/2),Math.round(i)},update:function(e){i.extend(this,e),this.fit()},draw:function(){var e=this.ctx,t=(this.endPoint-this.startPoint)/this.steps,n=Math.round(this.xScalePaddingLeft);this.display&&(e.fillStyle=this.textColor,e.font=this.font,a(this.yLabels,function(a,r){var o=this.endPoint-t*r,s=Math.round(o),l=this.showHorizontalLines;e.textAlign="right",e.textBaseline="middle",this.showLabels&&e.fillText(a,n-10,o),0!==r||l||(l=!0),l&&e.beginPath(),r>0?(e.lineWidth=this.gridLineWidth,e.strokeStyle=this.gridLineColor):(e.lineWidth=this.lineWidth,e.strokeStyle=this.lineColor),s+=i.aliasPixel(e.lineWidth),l&&(e.moveTo(n,s),e.lineTo(this.width,s),e.stroke(),e.closePath()),e.lineWidth=this.lineWidth,e.strokeStyle=this.lineColor,e.beginPath(),e.moveTo(n-5,s),e.lineTo(n,s),e.stroke(),e.closePath()},this),a(this.xLabels,function(t,n){var i=this.calculateX(n)+y(this.lineWidth),a=this.calculateX(n-(this.offsetGridLines?.5:0))+y(this.lineWidth),r=this.xLabelRotation>0,o=this.showVerticalLines;0!==n||o||(o=!0),o&&e.beginPath(),n>0?(e.lineWidth=this.gridLineWidth,e.strokeStyle=this.gridLineColor):(e.lineWidth=this.lineWidth,e.strokeStyle=this.lineColor),o&&(e.moveTo(a,this.endPoint),e.lineTo(a,this.startPoint-3),e.stroke(),e.closePath()),e.lineWidth=this.lineWidth,e.strokeStyle=this.lineColor,e.beginPath(),e.moveTo(a,this.endPoint),e.lineTo(a,this.endPoint+5),e.stroke(),e.closePath(),e.save(),e.translate(i,r?this.endPoint+12:this.endPoint+8),e.rotate(b(this.xLabelRotation)*-1),e.font=this.font,e.textAlign=r?"right":"center",e.textBaseline=r?"middle":"top",e.fillText(t,0,0),e.restore()},this))}}),n.RadialScale=n.Element.extend({initialize:function(){this.size=g([this.height,this.width]),this.drawingArea=this.display?this.size/2-(this.fontSize/2+this.backdropPaddingY):this.size/2},calculateCenterOffset:function(e){var t=this.drawingArea/(this.max-this.min);return(e-this.min)*t},update:function(){this.lineArc?this.drawingArea=this.display?this.size/2-(this.fontSize/2+this.backdropPaddingY):this.size/2:this.setScaleSize(),this.buildYLabels()},buildYLabels:function(){this.yLabels=[];for(var e=v(this.stepValue),t=0;t<=this.steps;t++)this.yLabels.push(S(this.templateString,{value:(this.min+t*this.stepValue).toFixed(e)}))},getCircumference:function(){return 2*Math.PI/this.valuesCount},setScaleSize:function(){var e,t,n,i,a,r,o,s,l,c,u,d,p=g([this.height/2-this.pointLabelFontSize-5,this.width/2]),h=this.width,m=0;for(this.ctx.font=D(this.pointLabelFontSize,this.pointLabelFontStyle,this.pointLabelFontFamily),t=0;t<this.valuesCount;t++)e=this.getPointPosition(t,p),n=this.ctx.measureText(S(this.templateString,{value:this.labels[t]})).width+5,0===t||t===this.valuesCount/2?(i=n/2,e.x+i>h&&(h=e.x+i,a=t),e.x-i<m&&(m=e.x-i,o=t)):t<this.valuesCount/2?e.x+n>h&&(h=e.x+n,a=t):t>this.valuesCount/2&&e.x-n<m&&(m=e.x-n,o=t);l=m,c=Math.ceil(h-this.width),r=this.getIndexAngle(a),s=this.getIndexAngle(o),u=c/Math.sin(r+Math.PI/2),d=l/Math.sin(s+Math.PI/2),u=f(u)?u:0,d=f(d)?d:0,this.drawingArea=p-(d+u)/2,this.setCenterPoint(d,u)},setCenterPoint:function(e,t){var n=this.width-t-this.drawingArea,i=e+this.drawingArea;this.xCenter=(i+n)/2,this.yCenter=this.height/2},getIndexAngle:function(e){var t=2*Math.PI/this.valuesCount;return e*t-Math.PI/2},getPointPosition:function(e,t){var n=this.getIndexAngle(e);return{x:Math.cos(n)*t+this.xCenter,y:Math.sin(n)*t+this.yCenter}},draw:function(){if(this.display){var e=this.ctx;if(a(this.yLabels,function(t,n){if(n>0){var i,a=n*(this.drawingArea/this.steps),r=this.yCenter-a;if(this.lineWidth>0)if(e.strokeStyle=this.lineColor,e.lineWidth=this.lineWidth,this.lineArc)e.beginPath(),e.arc(this.xCenter,this.yCenter,a,0,2*Math.PI),e.closePath(),e.stroke();else{e.beginPath();for(var o=0;o<this.valuesCount;o++)i=this.getPointPosition(o,this.calculateCenterOffset(this.min+n*this.stepValue)),0===o?e.moveTo(i.x,i.y):e.lineTo(i.x,i.y);e.closePath(),e.stroke()}if(this.showLabels){if(e.font=D(this.fontSize,this.fontStyle,this.fontFamily),this.showLabelBackdrop){var s=e.measureText(t).width;e.fillStyle=this.backdropColor,e.fillRect(this.xCenter-s/2-this.backdropPaddingX,r-this.fontSize/2-this.backdropPaddingY,s+2*this.backdropPaddingX,this.fontSize+2*this.backdropPaddingY)}e.textAlign="center",e.textBaseline="middle",e.fillStyle=this.fontColor,e.fillText(t,this.xCenter,r)}}},this),!this.lineArc){e.lineWidth=this.angleLineWidth,e.strokeStyle=this.angleLineColor;for(var t=this.valuesCount-1;t>=0;t--){if(this.angleLineWidth>0){var n=this.getPointPosition(t,this.calculateCenterOffset(this.max));e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(n.x,n.y),e.stroke(),e.closePath()}var i=this.getPointPosition(t,this.calculateCenterOffset(this.max)+5);e.font=D(this.pointLabelFontSize,this.pointLabelFontStyle,this.pointLabelFontFamily),e.fillStyle=this.pointLabelFontColor;var r=this.labels.length,o=this.labels.length/2,s=o/2,l=t<s||t>r-s,c=t===s||t===r-s;0===t?e.textAlign="center":t===o?e.textAlign="center":t<o?e.textAlign="left":e.textAlign="right",c?e.textBaseline="middle":l?e.textBaseline="bottom":e.textBaseline="top",e.fillText(this.labels[t],i.x,i.y)}}}}}),i.addEvent(window,"resize",function(){var e;return function(){clearTimeout(e),e=setTimeout(function(){a(n.instances,function(e){e.options.responsive&&e.resize(e.render,!0)})},50)}}()),h?define(function(){return n}):"object"==typeof module&&module.exports&&(module.exports=n),e.Chart=n,n.noConflict=function(){return e.Chart=t,n}}.call(this),function(){"use strict";var e=this,t=e.Chart,n=t.helpers,i={segmentShowStroke:!0,segmentStrokeColor:"#fff",segmentStrokeWidth:2,percentageInnerCutout:50,animationSteps:100,animationEasing:"easeOutBounce",animateRotate:!0,animateScale:!1,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<segments.length; i++){%><li><span style="background-color:<%=segments[i].fillColor%>"></span><%if(segments[i].label){%><%=segments[i].label%><%}%></li><%}%></ul>'};t.Type.extend({name:"Doughnut",defaults:i,initialize:function(e){this.segments=[],this.outerRadius=(n.min([this.chart.width,this.chart.height])-this.options.segmentStrokeWidth/2)/2,this.SegmentArc=t.Arc.extend({ctx:this.chart.ctx,x:this.chart.width/2,y:this.chart.height/2}),this.options.showTooltips&&n.bindEvents(this,this.options.tooltipEvents,function(e){var t="mouseout"!==e.type?this.getSegmentsAtEvent(e):[];n.each(this.segments,function(e){e.restore(["fillColor"])}),n.each(t,function(e){e.fillColor=e.highlightColor}),this.showTooltip(t)}),this.calculateTotal(e),n.each(e,function(e,t){this.addData(e,t,!0)},this),this.render()},getSegmentsAtEvent:function(e){var t=[],i=n.getRelativePosition(e);return n.each(this.segments,function(e){e.inRange(i.x,i.y)&&t.push(e)},this),t},addData:function(e,t,n){var i=t||this.segments.length;this.segments.splice(i,0,new this.SegmentArc({value:e.value,outerRadius:this.options.animateScale?0:this.outerRadius,innerRadius:this.options.animateScale?0:this.outerRadius/100*this.options.percentageInnerCutout,fillColor:e.color,highlightColor:e.highlight||e.color,showStroke:this.options.segmentShowStroke,strokeWidth:this.options.segmentStrokeWidth,strokeColor:this.options.segmentStrokeColor,startAngle:1.5*Math.PI,circumference:this.options.animateRotate?0:this.calculateCircumference(e.value),label:e.label})),n||(this.reflow(),this.update())},calculateCircumference:function(e){return 2*Math.PI*(e/this.total)},calculateTotal:function(e){this.total=0,n.each(e,function(e){this.total+=e.value},this)},update:function(){this.calculateTotal(this.segments),n.each(this.activeElements,function(e){e.restore(["fillColor"])}),n.each(this.segments,function(e){e.save()}),this.render()},removeData:function(e){var t=n.isNumber(e)?e:this.segments.length-1;this.segments.splice(t,1),this.reflow(),this.update()},reflow:function(){n.extend(this.SegmentArc.prototype,{x:this.chart.width/2,y:this.chart.height/2}),this.outerRadius=(n.min([this.chart.width,this.chart.height])-this.options.segmentStrokeWidth/2)/2,n.each(this.segments,function(e){e.update({outerRadius:this.outerRadius,innerRadius:this.outerRadius/100*this.options.percentageInnerCutout})},this)},draw:function(e){var t=e?e:1;this.clear(),n.each(this.segments,function(e,n){e.transition({circumference:this.calculateCircumference(e.value),outerRadius:this.outerRadius,innerRadius:this.outerRadius/100*this.options.percentageInnerCutout},t),e.endAngle=e.startAngle+e.circumference,e.draw(),0===n&&(e.startAngle=1.5*Math.PI),n<this.segments.length-1&&(this.segments[n+1].startAngle=e.endAngle)},this)}}),t.types.Doughnut.extend({name:"Pie",defaults:n.merge(i,{percentageInnerCutout:0})})}.call(this),function(){var e,t,n,i,a,r,o,s,l=[].slice,c={}.hasOwnProperty,u=function(e,t){function n(){this.constructor=e}for(var i in t)c.call(t,i)&&(e[i]=t[i]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e};o=function(){},t=function(){function e(){}return e.prototype.addEventListener=e.prototype.on,e.prototype.on=function(e,t){return this._callbacks=this._callbacks||{},this._callbacks[e]||(this._callbacks[e]=[]),this._callbacks[e].push(t),this},e.prototype.emit=function(){var e,t,n,i,a,r;if(i=arguments[0],e=2<=arguments.length?l.call(arguments,1):[],this._callbacks=this._callbacks||{},n=this._callbacks[i])for(a=0,r=n.length;a<r;a++)t=n[a],t.apply(this,e);return this},e.prototype.removeListener=e.prototype.off,e.prototype.removeAllListeners=e.prototype.off,e.prototype.removeEventListener=e.prototype.off,e.prototype.off=function(e,t){var n,i,a,r,o;if(!this._callbacks||0===arguments.length)return this._callbacks={},this;if(i=this._callbacks[e],!i)return this;if(1===arguments.length)return delete this._callbacks[e],this;for(a=r=0,o=i.length;r<o;a=++r)if(n=i[a],n===t){i.splice(a,1);break}return this},e}(),e=function(e){function n(e,t){var a,r,o;if(this.element=e,this.version=n.version,this.defaultOptions.previewTemplate=this.defaultOptions.previewTemplate.replace(/\n*/g,""),this.clickableElements=[],this.listeners=[],this.files=[],"string"==typeof this.element&&(this.element=document.querySelector(this.element)),!this.element||null==this.element.nodeType)throw new Error("Invalid dropzone element.");if(this.element.dropzone)throw new Error("Dropzone already attached.");if(n.instances.push(this),this.element.dropzone=this,a=null!=(o=n.optionsForElement(this.element))?o:{},this.options=i({},this.defaultOptions,a,null!=t?t:{}),this.options.forceFallback||!n.isBrowserSupported())return this.options.fallback.call(this);if(null==this.options.url&&(this.options.url=this.element.getAttribute("action")),!this.options.url)throw new Error("No URL provided.");if(this.options.acceptedFiles&&this.options.acceptedMimeTypes)throw new Error("You can't provide both 'acceptedFiles' and 'acceptedMimeTypes'. 'acceptedMimeTypes' is deprecated.");this.options.acceptedMimeTypes&&(this.options.acceptedFiles=this.options.acceptedMimeTypes,delete this.options.acceptedMimeTypes),this.options.method=this.options.method.toUpperCase(),(r=this.getExistingFallback())&&r.parentNode&&r.parentNode.removeChild(r),this.options.previewsContainer!==!1&&(this.options.previewsContainer?this.previewsContainer=n.getElement(this.options.previewsContainer,"previewsContainer"):this.previewsContainer=this.element),this.options.clickable&&(this.options.clickable===!0?this.clickableElements=[this.element]:this.clickableElements=n.getElements(this.options.clickable,"clickable")),this.init()}var i,a;return u(n,e),n.prototype.Emitter=t,n.prototype.events=["drop","dragstart","dragend","dragenter","dragover","dragleave","addedfile","removedfile","thumbnail","error","errormultiple","processing","processingmultiple","uploadprogress","totaluploadprogress","sending","sendingmultiple","success","successmultiple","canceled","canceledmultiple","complete","completemultiple","reset","maxfilesexceeded","maxfilesreached","queuecomplete"],n.prototype.defaultOptions={url:null,method:"post",withCredentials:!1,parallelUploads:2,uploadMultiple:!1,maxFilesize:256,paramName:"file",createImageThumbnails:!0,maxThumbnailFilesize:10,thumbnailWidth:120,thumbnailHeight:120,filesizeBase:1e3,maxFiles:null,filesizeBase:1e3,params:{},clickable:!0,ignoreHiddenFiles:!0,acceptedFiles:null,acceptedMimeTypes:null,autoProcessQueue:!0,autoQueue:!0,addRemoveLinks:!1,previewsContainer:null,capture:null,dictDefaultMessage:"Drop files here to upload",dictFallbackMessage:"Your browser does not support drag'n'drop file uploads.",dictFallbackText:"Please use the fallback form below to upload your files like in the olden days.",dictFileTooBig:"File is too big ({{filesize}}MiB). Max filesize: {{maxFilesize}}MiB.",dictInvalidFileType:"You can't upload files of this type.",dictResponseError:"Server responded with {{statusCode}} code.",dictCancelUpload:"Cancel upload",dictCancelUploadConfirmation:"Are you sure you want to cancel this upload?",dictRemoveFile:"Remove file",dictRemoveFileConfirmation:null,dictMaxFilesExceeded:"You can not upload any more files.",accept:function(e,t){return t()},init:function(){return o},forceFallback:!1,fallback:function(){var e,t,i,a,r,o;for(this.element.className=""+this.element.className+" dz-browser-not-supported",o=this.element.getElementsByTagName("div"),a=0,r=o.length;a<r;a++)e=o[a],/(^| )dz-message($| )/.test(e.className)&&(t=e,e.className="dz-message");return t||(t=n.createElement('<div class="dz-message"><span></span></div>'),this.element.appendChild(t)),i=t.getElementsByTagName("span")[0],i&&(i.textContent=this.options.dictFallbackMessage),this.element.appendChild(this.getFallbackForm())},resize:function(e){var t,n,i;return t={srcX:0,srcY:0,srcWidth:e.width,srcHeight:e.height},n=e.width/e.height,t.optWidth=this.options.thumbnailWidth,t.optHeight=this.options.thumbnailHeight,null==t.optWidth&&null==t.optHeight?(t.optWidth=t.srcWidth,t.optHeight=t.srcHeight):null==t.optWidth?t.optWidth=n*t.optHeight:null==t.optHeight&&(t.optHeight=1/n*t.optWidth),i=t.optWidth/t.optHeight,e.height<t.optHeight||e.width<t.optWidth?(t.trgHeight=t.srcHeight,t.trgWidth=t.srcWidth):n>i?(t.srcHeight=e.height,t.srcWidth=t.srcHeight*i):(t.srcWidth=e.width,t.srcHeight=t.srcWidth/i),t.srcX=(e.width-t.srcWidth)/2,t.srcY=(e.height-t.srcHeight)/2,t},drop:function(e){return this.element.classList.remove("dz-drag-hover")},dragstart:o,dragend:function(e){return this.element.classList.remove("dz-drag-hover")},dragenter:function(e){return this.element.classList.add("dz-drag-hover")},dragover:function(e){return this.element.classList.add("dz-drag-hover")},dragleave:function(e){return this.element.classList.remove("dz-drag-hover")},paste:o,reset:function(){return this.element.classList.remove("dz-started")},addedfile:function(e){var t,i,a,r,o,s,l,c,u,d,p,h,f;if(this.element===this.previewsContainer&&this.element.classList.add("dz-started"),this.previewsContainer){for(e.previewElement=n.createElement(this.options.previewTemplate.trim()),e.previewTemplate=e.previewElement,this.previewsContainer.appendChild(e.previewElement),d=e.previewElement.querySelectorAll("[data-dz-name]"),r=0,l=d.length;r<l;r++)t=d[r],t.textContent=e.name;for(p=e.previewElement.querySelectorAll("[data-dz-size]"),o=0,c=p.length;o<c;o++)t=p[o],t.innerHTML=this.filesize(e.size);for(this.options.addRemoveLinks&&(e._removeLink=n.createElement('<a class="dz-remove" href="javascript:undefined;" data-dz-remove>'+this.options.dictRemoveFile+"</a>"),e.previewElement.appendChild(e._removeLink)),i=function(t){return function(i){return i.preventDefault(),i.stopPropagation(),e.status===n.UPLOADING?n.confirm(t.options.dictCancelUploadConfirmation,function(){return t.removeFile(e)}):t.options.dictRemoveFileConfirmation?n.confirm(t.options.dictRemoveFileConfirmation,function(){return t.removeFile(e)}):t.removeFile(e)}}(this),h=e.previewElement.querySelectorAll("[data-dz-remove]"),f=[],s=0,u=h.length;s<u;s++)a=h[s],f.push(a.addEventListener("click",i));return f}},removedfile:function(e){var t;return e.previewElement&&null!=(t=e.previewElement)&&t.parentNode.removeChild(e.previewElement),this._updateMaxFilesReachedClass()},thumbnail:function(e,t){var n,i,a,r;if(e.previewElement){for(e.previewElement.classList.remove("dz-file-preview"),r=e.previewElement.querySelectorAll("[data-dz-thumbnail]"),i=0,a=r.length;i<a;i++)n=r[i],n.alt=e.name,n.src=t;return setTimeout(function(t){return function(){return e.previewElement.classList.add("dz-image-preview")}}(this),1)}},error:function(e,t){var n,i,a,r,o;if(e.previewElement){for(e.previewElement.classList.add("dz-error"),"String"!=typeof t&&t.error&&(t=t.error),r=e.previewElement.querySelectorAll("[data-dz-errormessage]"),
o=[],i=0,a=r.length;i<a;i++)n=r[i],o.push(n.textContent=t);return o}},errormultiple:o,processing:function(e){if(e.previewElement&&(e.previewElement.classList.add("dz-processing"),e._removeLink))return e._removeLink.textContent=this.options.dictCancelUpload},processingmultiple:o,uploadprogress:function(e,t,n){var i,a,r,o,s;if(e.previewElement){for(o=e.previewElement.querySelectorAll("[data-dz-uploadprogress]"),s=[],a=0,r=o.length;a<r;a++)i=o[a],"PROGRESS"===i.nodeName?s.push(i.value=t):s.push(i.style.width=""+t+"%");return s}},totaluploadprogress:o,sending:o,sendingmultiple:o,success:function(e){if(e.previewElement)return e.previewElement.classList.add("dz-success")},successmultiple:o,canceled:function(e){return this.emit("error",e,"Upload canceled.")},canceledmultiple:o,complete:function(e){if(e._removeLink&&(e._removeLink.textContent=this.options.dictRemoveFile),e.previewElement)return e.previewElement.classList.add("dz-complete")},completemultiple:o,maxfilesexceeded:o,maxfilesreached:o,queuecomplete:o,previewTemplate:'<div class="dz-preview dz-file-preview">\n  <div class="dz-image"><img data-dz-thumbnail /></div>\n  <div class="dz-details">\n    <div class="dz-size"><span data-dz-size></span></div>\n    <div class="dz-filename"><span data-dz-name></span></div>\n  </div>\n  <div class="dz-progress"><span class="dz-upload" data-dz-uploadprogress></span></div>\n  <div class="dz-error-message"><span data-dz-errormessage></span></div>\n  <div class="dz-success-mark">\n    <svg width="54px" height="54px" viewBox="0 0 54 54" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">\n      <title>Check</title>\n      <defs></defs>\n      <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage">\n        <path d="M23.5,31.8431458 L17.5852419,25.9283877 C16.0248253,24.3679711 13.4910294,24.366835 11.9289322,25.9289322 C10.3700136,27.4878508 10.3665912,30.0234455 11.9283877,31.5852419 L20.4147581,40.0716123 C20.5133999,40.1702541 20.6159315,40.2626649 20.7218615,40.3488435 C22.2835669,41.8725651 24.794234,41.8626202 26.3461564,40.3106978 L43.3106978,23.3461564 C44.8771021,21.7797521 44.8758057,19.2483887 43.3137085,17.6862915 C41.7547899,16.1273729 39.2176035,16.1255422 37.6538436,17.6893022 L23.5,31.8431458 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z" id="Oval-2" stroke-opacity="0.198794158" stroke="#747474" fill-opacity="0.816519475" fill="#FFFFFF" sketch:type="MSShapeGroup"></path>\n      </g>\n    </svg>\n  </div>\n  <div class="dz-error-mark">\n    <svg width="54px" height="54px" viewBox="0 0 54 54" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">\n      <title>Error</title>\n      <defs></defs>\n      <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage">\n        <g id="Check-+-Oval-2" sketch:type="MSLayerGroup" stroke="#747474" stroke-opacity="0.198794158" fill="#FFFFFF" fill-opacity="0.816519475">\n          <path d="M32.6568542,29 L38.3106978,23.3461564 C39.8771021,21.7797521 39.8758057,19.2483887 38.3137085,17.6862915 C36.7547899,16.1273729 34.2176035,16.1255422 32.6538436,17.6893022 L27,23.3431458 L21.3461564,17.6893022 C19.7823965,16.1255422 17.2452101,16.1273729 15.6862915,17.6862915 C14.1241943,19.2483887 14.1228979,21.7797521 15.6893022,23.3461564 L21.3431458,29 L15.6893022,34.6538436 C14.1228979,36.2202479 14.1241943,38.7516113 15.6862915,40.3137085 C17.2452101,41.8726271 19.7823965,41.8744578 21.3461564,40.3106978 L27,34.6568542 L32.6538436,40.3106978 C34.2176035,41.8744578 36.7547899,41.8726271 38.3137085,40.3137085 C39.8758057,38.7516113 39.8771021,36.2202479 38.3106978,34.6538436 L32.6568542,29 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z" id="Oval-2" sketch:type="MSShapeGroup"></path>\n        </g>\n      </g>\n    </svg>\n  </div>\n</div>'},i=function(){var e,t,n,i,a,r,o;for(i=arguments[0],n=2<=arguments.length?l.call(arguments,1):[],r=0,o=n.length;r<o;r++){t=n[r];for(e in t)a=t[e],i[e]=a}return i},n.prototype.getAcceptedFiles=function(){var e,t,n,i,a;for(i=this.files,a=[],t=0,n=i.length;t<n;t++)e=i[t],e.accepted&&a.push(e);return a},n.prototype.getRejectedFiles=function(){var e,t,n,i,a;for(i=this.files,a=[],t=0,n=i.length;t<n;t++)e=i[t],e.accepted||a.push(e);return a},n.prototype.getFilesWithStatus=function(e){var t,n,i,a,r;for(a=this.files,r=[],n=0,i=a.length;n<i;n++)t=a[n],t.status===e&&r.push(t);return r},n.prototype.getQueuedFiles=function(){return this.getFilesWithStatus(n.QUEUED)},n.prototype.getUploadingFiles=function(){return this.getFilesWithStatus(n.UPLOADING)},n.prototype.getActiveFiles=function(){var e,t,i,a,r;for(a=this.files,r=[],t=0,i=a.length;t<i;t++)e=a[t],e.status!==n.UPLOADING&&e.status!==n.QUEUED||r.push(e);return r},n.prototype.init=function(){var e,t,i,a,r,o,s;for("form"===this.element.tagName&&this.element.setAttribute("enctype","multipart/form-data"),this.element.classList.contains("dropzone")&&!this.element.querySelector(".dz-message")&&this.element.appendChild(n.createElement('<div class="dz-default dz-message"><span>'+this.options.dictDefaultMessage+"</span></div>")),this.clickableElements.length&&(i=function(e){return function(){return e.hiddenFileInput&&document.body.removeChild(e.hiddenFileInput),e.hiddenFileInput=document.createElement("input"),e.hiddenFileInput.setAttribute("type","file"),(null==e.options.maxFiles||e.options.maxFiles>1)&&e.hiddenFileInput.setAttribute("multiple","multiple"),e.hiddenFileInput.className="dz-hidden-input",null!=e.options.acceptedFiles&&e.hiddenFileInput.setAttribute("accept",e.options.acceptedFiles),null!=e.options.capture&&e.hiddenFileInput.setAttribute("capture",e.options.capture),e.hiddenFileInput.style.visibility="hidden",e.hiddenFileInput.style.position="absolute",e.hiddenFileInput.style.top="0",e.hiddenFileInput.style.left="0",e.hiddenFileInput.style.height="0",e.hiddenFileInput.style.width="0",document.body.appendChild(e.hiddenFileInput),e.hiddenFileInput.addEventListener("change",function(){var t,n,a,r;if(n=e.hiddenFileInput.files,n.length)for(a=0,r=n.length;a<r;a++)t=n[a],e.addFile(t);return i()})}}(this))(),this.URL=null!=(o=window.URL)?o:window.webkitURL,s=this.events,a=0,r=s.length;a<r;a++)e=s[a],this.on(e,this.options[e]);return this.on("uploadprogress",function(e){return function(){return e.updateTotalUploadProgress()}}(this)),this.on("removedfile",function(e){return function(){return e.updateTotalUploadProgress()}}(this)),this.on("canceled",function(e){return function(t){return e.emit("complete",t)}}(this)),this.on("complete",function(e){return function(t){if(0===e.getUploadingFiles().length&&0===e.getQueuedFiles().length)return setTimeout(function(){return e.emit("queuecomplete")},0)}}(this)),t=function(e){return e.stopPropagation(),e.preventDefault?e.preventDefault():e.returnValue=!1},this.listeners=[{element:this.element,events:{dragstart:function(e){return function(t){return e.emit("dragstart",t)}}(this),dragenter:function(e){return function(n){return t(n),e.emit("dragenter",n)}}(this),dragover:function(e){return function(n){var i;try{i=n.dataTransfer.effectAllowed}catch(e){}return n.dataTransfer.dropEffect="move"===i||"linkMove"===i?"move":"copy",t(n),e.emit("dragover",n)}}(this),dragleave:function(e){return function(t){return e.emit("dragleave",t)}}(this),drop:function(e){return function(n){return t(n),e.drop(n)}}(this),dragend:function(e){return function(t){return e.emit("dragend",t)}}(this)}}],this.clickableElements.forEach(function(e){return function(t){return e.listeners.push({element:t,events:{click:function(i){if(t!==e.element||i.target===e.element||n.elementInside(i.target,e.element.querySelector(".dz-message")))return e.hiddenFileInput.click()}}})}}(this)),this.enable(),this.options.init.call(this)},n.prototype.destroy=function(){var e;return this.disable(),this.removeAllFiles(!0),(null!=(e=this.hiddenFileInput)?e.parentNode:void 0)&&(this.hiddenFileInput.parentNode.removeChild(this.hiddenFileInput),this.hiddenFileInput=null),delete this.element.dropzone,n.instances.splice(n.instances.indexOf(this),1)},n.prototype.updateTotalUploadProgress=function(){var e,t,n,i,a,r,o,s;if(i=0,n=0,e=this.getActiveFiles(),e.length){for(s=this.getActiveFiles(),r=0,o=s.length;r<o;r++)t=s[r],i+=t.upload.bytesSent,n+=t.upload.total;a=100*i/n}else a=100;return this.emit("totaluploadprogress",a,n,i)},n.prototype._getParamName=function(e){return"function"==typeof this.options.paramName?this.options.paramName(e):""+this.options.paramName+(this.options.uploadMultiple?"["+e+"]":"")},n.prototype.getFallbackForm=function(){var e,t,i,a;return(e=this.getExistingFallback())?e:(i='<div class="dz-fallback">',this.options.dictFallbackText&&(i+="<p>"+this.options.dictFallbackText+"</p>"),i+='<input type="file" name="'+this._getParamName(0)+'" '+(this.options.uploadMultiple?'multiple="multiple"':void 0)+' /><input type="submit" value="Upload!"></div>',t=n.createElement(i),"FORM"!==this.element.tagName?(a=n.createElement('<form action="'+this.options.url+'" enctype="multipart/form-data" method="'+this.options.method+'"></form>'),a.appendChild(t)):(this.element.setAttribute("enctype","multipart/form-data"),this.element.setAttribute("method",this.options.method)),null!=a?a:t)},n.prototype.getExistingFallback=function(){var e,t,n,i,a,r;for(t=function(e){var t,n,i;for(n=0,i=e.length;n<i;n++)if(t=e[n],/(^| )fallback($| )/.test(t.className))return t},r=["div","form"],i=0,a=r.length;i<a;i++)if(n=r[i],e=t(this.element.getElementsByTagName(n)))return e},n.prototype.setupEventListeners=function(){var e,t,n,i,a,r,o;for(r=this.listeners,o=[],i=0,a=r.length;i<a;i++)e=r[i],o.push(function(){var i,a;i=e.events,a=[];for(t in i)n=i[t],a.push(e.element.addEventListener(t,n,!1));return a}());return o},n.prototype.removeEventListeners=function(){var e,t,n,i,a,r,o;for(r=this.listeners,o=[],i=0,a=r.length;i<a;i++)e=r[i],o.push(function(){var i,a;i=e.events,a=[];for(t in i)n=i[t],a.push(e.element.removeEventListener(t,n,!1));return a}());return o},n.prototype.disable=function(){var e,t,n,i,a;for(this.clickableElements.forEach(function(e){return e.classList.remove("dz-clickable")}),this.removeEventListeners(),i=this.files,a=[],t=0,n=i.length;t<n;t++)e=i[t],a.push(this.cancelUpload(e));return a},n.prototype.enable=function(){return this.clickableElements.forEach(function(e){return e.classList.add("dz-clickable")}),this.setupEventListeners()},n.prototype.filesize=function(e){var t,n,i,a,r,o,s,l;for(o=["TB","GB","MB","KB","b"],i=a=null,n=s=0,l=o.length;s<l;n=++s)if(r=o[n],t=Math.pow(this.options.filesizeBase,4-n)/10,e>=t){i=e/Math.pow(this.options.filesizeBase,4-n),a=r;break}return i=Math.round(10*i)/10,"<strong>"+i+"</strong> "+a},n.prototype._updateMaxFilesReachedClass=function(){return null!=this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?(this.getAcceptedFiles().length===this.options.maxFiles&&this.emit("maxfilesreached",this.files),this.element.classList.add("dz-max-files-reached")):this.element.classList.remove("dz-max-files-reached")},n.prototype.drop=function(e){var t,n;e.dataTransfer&&(this.emit("drop",e),t=e.dataTransfer.files,t.length&&(n=e.dataTransfer.items,n&&n.length&&null!=n[0].webkitGetAsEntry?this._addFilesFromItems(n):this.handleFiles(t)))},n.prototype.paste=function(e){var t,n;if(null!=(null!=e&&null!=(n=e.clipboardData)?n.items:void 0))return this.emit("paste",e),t=e.clipboardData.items,t.length?this._addFilesFromItems(t):void 0},n.prototype.handleFiles=function(e){var t,n,i,a;for(a=[],n=0,i=e.length;n<i;n++)t=e[n],a.push(this.addFile(t));return a},n.prototype._addFilesFromItems=function(e){var t,n,i,a,r;for(r=[],i=0,a=e.length;i<a;i++)n=e[i],null!=n.webkitGetAsEntry&&(t=n.webkitGetAsEntry())?t.isFile?r.push(this.addFile(n.getAsFile())):t.isDirectory?r.push(this._addFilesFromDirectory(t,t.name)):r.push(void 0):null!=n.getAsFile&&(null==n.kind||"file"===n.kind)?r.push(this.addFile(n.getAsFile())):r.push(void 0);return r},n.prototype._addFilesFromDirectory=function(e,t){var n,i;return n=e.createReader(),i=function(e){return function(n){var i,a,r;for(a=0,r=n.length;a<r;a++)i=n[a],i.isFile?i.file(function(n){if(!e.options.ignoreHiddenFiles||"."!==n.name.substring(0,1))return n.fullPath=""+t+"/"+n.name,e.addFile(n)}):i.isDirectory&&e._addFilesFromDirectory(i,""+t+"/"+i.name)}}(this),n.readEntries(i,function(e){return"undefined"!=typeof console&&null!==console&&"function"==typeof console.log?console.log(e):void 0})},n.prototype.accept=function(e,t){return e.size>1024*this.options.maxFilesize*1024?t(this.options.dictFileTooBig.replace("{{filesize}}",Math.round(e.size/1024/10.24)/100).replace("{{maxFilesize}}",this.options.maxFilesize)):n.isValidFile(e,this.options.acceptedFiles)?null!=this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?(t(this.options.dictMaxFilesExceeded.replace("{{maxFiles}}",this.options.maxFiles)),this.emit("maxfilesexceeded",e)):this.options.accept.call(this,e,t):t(this.options.dictInvalidFileType)},n.prototype.addFile=function(e){return e.upload={progress:0,total:e.size,bytesSent:0},this.files.push(e),e.status=n.ADDED,this.emit("addedfile",e),this._enqueueThumbnail(e),this.accept(e,function(t){return function(n){return n?(e.accepted=!1,t._errorProcessing([e],n)):(e.accepted=!0,t.options.autoQueue&&t.enqueueFile(e)),t._updateMaxFilesReachedClass()}}(this))},n.prototype.enqueueFiles=function(e){var t,n,i;for(n=0,i=e.length;n<i;n++)t=e[n],this.enqueueFile(t);return null},n.prototype.enqueueFile=function(e){if(e.status!==n.ADDED||e.accepted!==!0)throw new Error("This file can't be queued because it has already been processed or was rejected.");if(e.status=n.QUEUED,this.options.autoProcessQueue)return setTimeout(function(e){return function(){return e.processQueue()}}(this),0)},n.prototype._thumbnailQueue=[],n.prototype._processingThumbnail=!1,n.prototype._enqueueThumbnail=function(e){if(this.options.createImageThumbnails&&e.type.match(/image.*/)&&e.size<=1024*this.options.maxThumbnailFilesize*1024)return this._thumbnailQueue.push(e),setTimeout(function(e){return function(){return e._processThumbnailQueue()}}(this),0)},n.prototype._processThumbnailQueue=function(){if(!this._processingThumbnail&&0!==this._thumbnailQueue.length)return this._processingThumbnail=!0,this.createThumbnail(this._thumbnailQueue.shift(),function(e){return function(){return e._processingThumbnail=!1,e._processThumbnailQueue()}}(this))},n.prototype.removeFile=function(e){if(e.status===n.UPLOADING&&this.cancelUpload(e),this.files=s(this.files,e),this.emit("removedfile",e),0===this.files.length)return this.emit("reset")},n.prototype.removeAllFiles=function(e){var t,i,a,r;for(null==e&&(e=!1),r=this.files.slice(),i=0,a=r.length;i<a;i++)t=r[i],(t.status!==n.UPLOADING||e)&&this.removeFile(t);return null},n.prototype.createThumbnail=function(e,t){var n;return n=new FileReader,n.onload=function(i){return function(){var a;return"image/svg+xml"===e.type?(i.emit("thumbnail",e,n.result),void(null!=t&&t())):(a=document.createElement("img"),a.onload=function(){var n,o,s,l,c,u,d,p;if(e.width=a.width,e.height=a.height,s=i.options.resize.call(i,e),null==s.trgWidth&&(s.trgWidth=s.optWidth),null==s.trgHeight&&(s.trgHeight=s.optHeight),n=document.createElement("canvas"),o=n.getContext("2d"),n.width=s.trgWidth,n.height=s.trgHeight,r(o,a,null!=(c=s.srcX)?c:0,null!=(u=s.srcY)?u:0,s.srcWidth,s.srcHeight,null!=(d=s.trgX)?d:0,null!=(p=s.trgY)?p:0,s.trgWidth,s.trgHeight),l=n.toDataURL("image/png"),i.emit("thumbnail",e,l),null!=t)return t()},a.onerror=t,a.src=n.result)}}(this),n.readAsDataURL(e)},n.prototype.processQueue=function(){var e,t,n,i;if(t=this.options.parallelUploads,n=this.getUploadingFiles().length,e=n,!(n>=t)&&(i=this.getQueuedFiles(),i.length>0)){if(this.options.uploadMultiple)return this.processFiles(i.slice(0,t-n));for(;e<t;){if(!i.length)return;this.processFile(i.shift()),e++}}},n.prototype.processFile=function(e){return this.processFiles([e])},n.prototype.processFiles=function(e){var t,i,a;for(i=0,a=e.length;i<a;i++)t=e[i],t.processing=!0,t.status=n.UPLOADING,this.emit("processing",t);return this.options.uploadMultiple&&this.emit("processingmultiple",e),this.uploadFiles(e)},n.prototype._getFilesWithXhr=function(e){var t,n;return n=function(){var n,i,a,r;for(a=this.files,r=[],n=0,i=a.length;n<i;n++)t=a[n],t.xhr===e&&r.push(t);return r}.call(this)},n.prototype.cancelUpload=function(e){var t,i,a,r,o,s,l;if(e.status===n.UPLOADING){for(i=this._getFilesWithXhr(e.xhr),a=0,o=i.length;a<o;a++)t=i[a],t.status=n.CANCELED;for(e.xhr.abort(),r=0,s=i.length;r<s;r++)t=i[r],this.emit("canceled",t);this.options.uploadMultiple&&this.emit("canceledmultiple",i)}else(l=e.status)!==n.ADDED&&l!==n.QUEUED||(e.status=n.CANCELED,this.emit("canceled",e),this.options.uploadMultiple&&this.emit("canceledmultiple",[e]));if(this.options.autoProcessQueue)return this.processQueue()},a=function(){var e,t;return t=arguments[0],e=2<=arguments.length?l.call(arguments,1):[],"function"==typeof t?t.apply(this,e):t},n.prototype.uploadFile=function(e){return this.uploadFiles([e])},n.prototype.uploadFiles=function(e){var t,r,o,s,l,c,u,d,p,h,f,m,g,v,b,y,w,S,k,A,x,_,C,T,M,E,P,D,$,I,L,F,O,R;for(k=new XMLHttpRequest,A=0,T=e.length;A<T;A++)t=e[A],t.xhr=k;m=a(this.options.method,e),w=a(this.options.url,e),k.open(m,w,!0),k.withCredentials=!!this.options.withCredentials,b=null,o=function(n){return function(){var i,a,r;for(r=[],i=0,a=e.length;i<a;i++)t=e[i],r.push(n._errorProcessing(e,b||n.options.dictResponseError.replace("{{statusCode}}",k.status),k));return r}}(this),y=function(n){return function(i){var a,r,o,s,l,c,u,d,p;if(null!=i)for(r=100*i.loaded/i.total,o=0,c=e.length;o<c;o++)t=e[o],t.upload={progress:r,total:i.total,bytesSent:i.loaded};else{for(a=!0,r=100,s=0,u=e.length;s<u;s++)t=e[s],100===t.upload.progress&&t.upload.bytesSent===t.upload.total||(a=!1),t.upload.progress=r,t.upload.bytesSent=t.upload.total;if(a)return}for(p=[],l=0,d=e.length;l<d;l++)t=e[l],p.push(n.emit("uploadprogress",t,r,t.upload.bytesSent));return p}}(this),k.onload=function(t){return function(i){var a;if((!e[0]||e[0].status!==n.CANCELED)&&4===k.readyState){if(b=k.responseText,k.getResponseHeader("content-type")&&~k.getResponseHeader("content-type").indexOf("application/json"))try{b=JSON.parse(b)}catch(e){i=e,b="Invalid JSON response from server."}return y(),200<=(a=k.status)&&a<300?t._finished(e,b,i):o()}}}(this),k.onerror=function(t){return function(){if(e[0].status!==n.CANCELED)return o()}}(this),v=null!=($=k.upload)?$:k,v.onprogress=y,c={Accept:"application/json","Cache-Control":"no-cache","X-Requested-With":"XMLHttpRequest"},this.options.headers&&i(c,this.options.headers);for(s in c)l=c[s],k.setRequestHeader(s,l);if(r=new FormData,this.options.params){I=this.options.params;for(f in I)S=I[f],r.append(f,S)}for(x=0,M=e.length;x<M;x++)t=e[x],this.emit("sending",t,k,r);if(this.options.uploadMultiple&&this.emit("sendingmultiple",e,k,r),"FORM"===this.element.tagName)for(L=this.element.querySelectorAll("input, textarea, select, button"),_=0,E=L.length;_<E;_++)if(d=L[_],p=d.getAttribute("name"),h=d.getAttribute("type"),"SELECT"===d.tagName&&d.hasAttribute("multiple"))for(F=d.options,C=0,P=F.length;C<P;C++)g=F[C],g.selected&&r.append(p,g.value);else(!h||"checkbox"!==(O=h.toLowerCase())&&"radio"!==O||d.checked)&&r.append(p,d.value);for(u=D=0,R=e.length-1;0<=R?D<=R:D>=R;u=0<=R?++D:--D)"undefined"!=typeof e[u]?r.append(this._getParamName(u),e[u],e[u].name):r.append(this._getParamName(u),e[u],"");return k.send(r)},n.prototype._finished=function(e,t,i){var a,r,o;for(r=0,o=e.length;r<o;r++)a=e[r],a.status=n.SUCCESS,this.emit("success",a,t,i),this.emit("complete",a);if(this.options.uploadMultiple&&(this.emit("successmultiple",e,t,i),this.emit("completemultiple",e)),this.options.autoProcessQueue)return this.processQueue()},n.prototype._errorProcessing=function(e,t,i){var a,r,o;for(r=0,o=e.length;r<o;r++)a=e[r],a.status=n.ERROR,this.emit("error",a,t,i),this.emit("complete",a);if(this.options.uploadMultiple&&(this.emit("errormultiple",e,t,i),this.emit("completemultiple",e)),this.options.autoProcessQueue)return this.processQueue()},n}(t),e.version="4.0.0",e.options={},e.optionsForElement=function(t){return t.getAttribute("id")?e.options[n(t.getAttribute("id"))]:void 0},e.instances=[],e.forElement=function(e){if("string"==typeof e&&(e=document.querySelector(e)),null==(null!=e?e.dropzone:void 0))throw new Error("No Dropzone found for given element. This is probably because you're trying to access it before Dropzone had the time to initialize. Use the `init` option to setup any additional observers on your Dropzone.");return e.dropzone},e.autoDiscover=!0,e.discover=function(){var t,n,i,a,r,o;for(document.querySelectorAll?i=document.querySelectorAll(".dropzone"):(i=[],t=function(e){var t,n,a,r;for(r=[],n=0,a=e.length;n<a;n++)t=e[n],/(^| )dropzone($| )/.test(t.className)?r.push(i.push(t)):r.push(void 0);return r},t(document.getElementsByTagName("div")),t(document.getElementsByTagName("form"))),o=[],a=0,r=i.length;a<r;a++)n=i[a],e.optionsForElement(n)!==!1?o.push(new e(n)):o.push(void 0);return o},e.blacklistedBrowsers=[/opera.*Macintosh.*version\/12/i],e.isBrowserSupported=function(){var t,n,i,a,r;if(t=!0,window.File&&window.FileReader&&window.FileList&&window.Blob&&window.FormData&&document.querySelector)if("classList"in document.createElement("a"))for(r=e.blacklistedBrowsers,i=0,a=r.length;i<a;i++)n=r[i],n.test(navigator.userAgent)&&(t=!1);else t=!1;else t=!1;return t},s=function(e,t){var n,i,a,r;for(r=[],i=0,a=e.length;i<a;i++)n=e[i],n!==t&&r.push(n);return r},n=function(e){return e.replace(/[\-_](\w)/g,function(e){return e.charAt(1).toUpperCase()})},e.createElement=function(e){var t;return t=document.createElement("div"),t.innerHTML=e,t.childNodes[0]},e.elementInside=function(e,t){if(e===t)return!0;for(;e=e.parentNode;)if(e===t)return!0;return!1},e.getElement=function(e,t){var n;if("string"==typeof e?n=document.querySelector(e):null!=e.nodeType&&(n=e),null==n)throw new Error("Invalid `"+t+"` option provided. Please provide a CSS selector or a plain HTML element.");return n},e.getElements=function(e,t){var n,i,a,r,o,s,l,c;if(e instanceof Array){a=[];try{for(r=0,s=e.length;r<s;r++)i=e[r],a.push(this.getElement(i,t))}catch(e){n=e,a=null}}else if("string"==typeof e)for(a=[],c=document.querySelectorAll(e),o=0,l=c.length;o<l;o++)i=c[o],a.push(i);else null!=e.nodeType&&(a=[e]);if(null==a||!a.length)throw new Error("Invalid `"+t+"` option provided. Please provide a CSS selector, a plain HTML element or a list of those.");return a},e.confirm=function(e,t,n){return window.confirm(e)?t():null!=n?n():void 0},e.isValidFile=function(e,t){var n,i,a,r,o;if(!t)return!0;for(t=t.split(","),i=e.type,n=i.replace(/\/.*$/,""),r=0,o=t.length;r<o;r++)if(a=t[r],a=a.trim(),"."===a.charAt(0)){if(e.name.toLowerCase().indexOf(a.toLowerCase(),e.name.length-a.length)!==-1)return!0}else if(/\/\*$/.test(a)){if(n===a.replace(/\/.*$/,""))return!0}else if(i===a)return!0;return!1},"undefined"!=typeof jQuery&&null!==jQuery&&(jQuery.fn.dropzone=function(t){return this.each(function(){return new e(this,t)})}),"undefined"!=typeof module&&null!==module?module.exports=e:window.Dropzone=e,e.ADDED="added",e.QUEUED="queued",e.ACCEPTED=e.QUEUED,e.UPLOADING="uploading",e.PROCESSING=e.UPLOADING,e.CANCELED="canceled",e.ERROR="error",e.SUCCESS="success",a=function(e){var t,n,i,a,r,o,s,l,c,u;for(s=e.naturalWidth,o=e.naturalHeight,n=document.createElement("canvas"),n.width=1,n.height=o,i=n.getContext("2d"),i.drawImage(e,0,0),a=i.getImageData(0,0,1,o).data,u=0,r=o,l=o;l>u;)t=a[4*(l-1)+3],0===t?r=l:u=l,l=r+u>>1;return c=l/o,0===c?1:c},r=function(e,t,n,i,r,o,s,l,c,u){var d;return d=a(t),e.drawImage(t,n,i,r,o,s,l,c,u/d)},i=function(e,t){var n,i,a,r,o,s,l,c,u;if(a=!1,u=!0,i=e.document,c=i.documentElement,n=i.addEventListener?"addEventListener":"attachEvent",l=i.addEventListener?"removeEventListener":"detachEvent",s=i.addEventListener?"":"on",r=function(n){if("readystatechange"!==n.type||"complete"===i.readyState)return("load"===n.type?e:i)[l](s+n.type,r,!1),!a&&(a=!0)?t.call(e,n.type||n):void 0},o=function(){var e;try{c.doScroll("left")}catch(t){return e=t,void setTimeout(o,50)}return r("poll")},"complete"!==i.readyState){if(i.createEventObject&&c.doScroll){try{u=!e.frameElement}catch(e){}u&&o()}return i[n](s+"DOMContentLoaded",r,!1),i[n](s+"readystatechange",r,!1),e[n](s+"load",r,!1)}},e._autoDiscoverFunction=function(){if(e.autoDiscover)return e.discover()},i(window,e._autoDiscoverFunction)}.call(this),function(){"use strict";function e(t,i){function a(e,t){return function(){return e.apply(t,arguments)}}var r;if(i=i||{},this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.touchBoundary=i.touchBoundary||10,this.layer=t,this.tapDelay=i.tapDelay||200,this.tapTimeout=i.tapTimeout||700,!e.notNeeded(t)){for(var o=["onMouse","onClick","onTouchStart","onTouchMove","onTouchEnd","onTouchCancel"],s=this,l=0,c=o.length;l<c;l++)s[o[l]]=a(s[o[l]],s);n&&(t.addEventListener("mouseover",this.onMouse,!0),t.addEventListener("mousedown",this.onMouse,!0),t.addEventListener("mouseup",this.onMouse,!0)),t.addEventListener("click",this.onClick,!0),t.addEventListener("touchstart",this.onTouchStart,!1),t.addEventListener("touchmove",this.onTouchMove,!1),t.addEventListener("touchend",this.onTouchEnd,!1),t.addEventListener("touchcancel",this.onTouchCancel,!1),Event.prototype.stopImmediatePropagation||(t.removeEventListener=function(e,n,i){var a=Node.prototype.removeEventListener;"click"===e?a.call(t,e,n.hijacked||n,i):a.call(t,e,n,i)},t.addEventListener=function(e,n,i){var a=Node.prototype.addEventListener;"click"===e?a.call(t,e,n.hijacked||(n.hijacked=function(e){e.propagationStopped||n(e)}),i):a.call(t,e,n,i)}),"function"==typeof t.onclick&&(r=t.onclick,t.addEventListener("click",function(e){r(e)},!1),t.onclick=null)}}var t=navigator.userAgent.indexOf("Windows Phone")>=0,n=navigator.userAgent.indexOf("Android")>0&&!t,i=/iP(ad|hone|od)/.test(navigator.userAgent)&&!t,a=i&&/OS 4_\d(_\d)?/.test(navigator.userAgent),r=i&&/OS [6-7]_\d/.test(navigator.userAgent),o=navigator.userAgent.indexOf("BB10")>0;e.prototype.needsClick=function(e){switch(e.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(e.disabled)return!0;break;case"input":if(i&&"file"===e.type||e.disabled)return!0;break;case"label":case"iframe":case"video":return!0}return/\bneedsclick\b/.test(e.className)},e.prototype.needsFocus=function(e){switch(e.nodeName.toLowerCase()){case"textarea":return!0;case"select":return!n;case"input":switch(e.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!e.disabled&&!e.readOnly;default:return/\bneedsfocus\b/.test(e.className)}},e.prototype.sendClick=function(e,t){var n,i;document.activeElement&&document.activeElement!==e&&document.activeElement.blur(),i=t.changedTouches[0],n=document.createEvent("MouseEvents"),n.initMouseEvent(this.determineEventType(e),!0,!0,window,1,i.screenX,i.screenY,i.clientX,i.clientY,!1,!1,!1,!1,0,null),n.forwardedTouchEvent=!0,e.dispatchEvent(n)},e.prototype.determineEventType=function(e){return n&&"select"===e.tagName.toLowerCase()?"mousedown":"click"},e.prototype.focus=function(e){var t;i&&e.setSelectionRange&&0!==e.type.indexOf("date")&&"time"!==e.type&&"month"!==e.type?(t=e.value.length,e.setSelectionRange(t,t)):e.focus()},e.prototype.updateScrollParent=function(e){var t,n;if(t=e.fastClickScrollParent,!t||!t.contains(e)){n=e;do{if(n.scrollHeight>n.offsetHeight){t=n,e.fastClickScrollParent=n;break}n=n.parentElement}while(n)}t&&(t.fastClickLastScrollTop=t.scrollTop)},e.prototype.getTargetElementFromEventTarget=function(e){return e.nodeType===Node.TEXT_NODE?e.parentNode:e},e.prototype.onTouchStart=function(e){var t,n,r;if(e.targetTouches.length>1)return!0;if(t=this.getTargetElementFromEventTarget(e.target),n=e.targetTouches[0],i){if(r=window.getSelection(),r.rangeCount&&!r.isCollapsed)return!0;if(!a){if(n.identifier&&n.identifier===this.lastTouchIdentifier)return e.preventDefault(),!1;this.lastTouchIdentifier=n.identifier,this.updateScrollParent(t)}}return this.trackingClick=!0,this.trackingClickStart=e.timeStamp,this.targetElement=t,this.touchStartX=n.pageX,this.touchStartY=n.pageY,e.timeStamp-this.lastClickTime<this.tapDelay&&e.preventDefault(),!0},e.prototype.touchHasMoved=function(e){var t=e.changedTouches[0],n=this.touchBoundary;return Math.abs(t.pageX-this.touchStartX)>n||Math.abs(t.pageY-this.touchStartY)>n},e.prototype.onTouchMove=function(e){return!this.trackingClick||((this.targetElement!==this.getTargetElementFromEventTarget(e.target)||this.touchHasMoved(e))&&(this.trackingClick=!1,this.targetElement=null),!0)},e.prototype.findControl=function(e){return void 0!==e.control?e.control:e.htmlFor?document.getElementById(e.htmlFor):e.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")},e.prototype.onTouchEnd=function(e){var t,o,s,l,c,u=this.targetElement;if(!this.trackingClick)return!0;if(e.timeStamp-this.lastClickTime<this.tapDelay)return this.cancelNextClick=!0,!0;if(e.timeStamp-this.trackingClickStart>this.tapTimeout)return!0;if(this.cancelNextClick=!1,this.lastClickTime=e.timeStamp,o=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,r&&(c=e.changedTouches[0],u=document.elementFromPoint(c.pageX-window.pageXOffset,c.pageY-window.pageYOffset)||u,u.fastClickScrollParent=this.targetElement.fastClickScrollParent),s=u.tagName.toLowerCase(),"label"===s){if(t=this.findControl(u)){if(this.focus(u),n)return!1;u=t}}else if(this.needsFocus(u))return e.timeStamp-o>100||i&&window.top!==window&&"input"===s?(this.targetElement=null,!1):(this.focus(u),this.sendClick(u,e),i&&"select"===s||(this.targetElement=null,e.preventDefault()),!1);return!(!i||a||(l=u.fastClickScrollParent,!l||l.fastClickLastScrollTop===l.scrollTop))||(this.needsClick(u)||(e.preventDefault(),this.sendClick(u,e)),!1)},e.prototype.onTouchCancel=function(){this.trackingClick=!1,this.targetElement=null},e.prototype.onMouse=function(e){return!this.targetElement||(!!e.forwardedTouchEvent||(!e.cancelable||(!(!this.needsClick(this.targetElement)||this.cancelNextClick)||(e.stopImmediatePropagation?e.stopImmediatePropagation():e.propagationStopped=!0,e.stopPropagation(),e.preventDefault(),!1))))},e.prototype.onClick=function(e){var t;return this.trackingClick?(this.targetElement=null,this.trackingClick=!1,!0):"submit"===e.target.type&&0===e.detail||(t=this.onMouse(e),t||(this.targetElement=null),t)},e.prototype.destroy=function(){var e=this.layer;n&&(e.removeEventListener("mouseover",this.onMouse,!0),e.removeEventListener("mousedown",this.onMouse,!0),e.removeEventListener("mouseup",this.onMouse,!0)),e.removeEventListener("click",this.onClick,!0),e.removeEventListener("touchstart",this.onTouchStart,!1),e.removeEventListener("touchmove",this.onTouchMove,!1),e.removeEventListener("touchend",this.onTouchEnd,!1),e.removeEventListener("touchcancel",this.onTouchCancel,!1)},e.notNeeded=function(e){var t,i,a,r;if("undefined"==typeof window.ontouchstart)return!0;if(i=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1]){if(!n)return!0;if(t=document.querySelector("meta[name=viewport]")){if(t.content.indexOf("user-scalable=no")!==-1)return!0;if(i>31&&document.documentElement.scrollWidth<=window.outerWidth)return!0}}if(o&&(a=navigator.userAgent.match(/Version\/([0-9]*)\.([0-9]*)/),a[1]>=10&&a[2]>=3&&(t=document.querySelector("meta[name=viewport]")))){if(t.content.indexOf("user-scalable=no")!==-1)return!0;if(document.documentElement.scrollWidth<=window.outerWidth)return!0;
}return"none"===e.style.msTouchAction||"manipulation"===e.style.touchAction||(r=+(/Firefox\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1],!!(r>=27&&(t=document.querySelector("meta[name=viewport]"),t&&(t.content.indexOf("user-scalable=no")!==-1||document.documentElement.scrollWidth<=window.outerWidth)))||("none"===e.style.touchAction||"manipulation"===e.style.touchAction))},e.attach=function(t,n){return new e(t,n)},"function"==typeof define&&"object"==typeof define.amd&&define.amd?define(function(){return e}):"undefined"!=typeof module&&module.exports?(module.exports=e.attach,module.exports.FastClick=e):window.FastClick=e}();var saveAs=saveAs||function(e){"use strict";if(!("undefined"==typeof e||"undefined"!=typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent))){var t=e.document,n=function(){return e.URL||e.webkitURL||e},i=t.createElementNS("http://www.w3.org/1999/xhtml","a"),a="download"in i,r=function(e){var t=new MouseEvent("click");e.dispatchEvent(t)},o=/constructor/i.test(e.HTMLElement),s=function(t){(e.setImmediate||e.setTimeout)(function(){throw t},0)},l="application/octet-stream",c=4e4,u=function(e){var t=function(){"string"==typeof e?n().revokeObjectURL(e):e.remove()};setTimeout(t,c)},d=function(e,t,n){t=[].concat(t);for(var i=t.length;i--;){var a=e["on"+t[i]];if("function"==typeof a)try{a.call(e,n||e)}catch(e){s(e)}}},p=function(e){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob([String.fromCharCode(65279),e],{type:e.type}):e},h=function(t,s,c){c||(t=p(t));var h,f=this,m=t.type,g=m===l,v=function(){d(f,"writestart progress write writeend".split(" "))},b=function(){if(g&&o&&e.FileReader){var i=new FileReader;return i.onloadend=function(){var t=i.result;e.location.href="data:attachment/file"+t.slice(t.search(/[,;]/)),f.readyState=f.DONE,v()},i.readAsDataURL(t),void(f.readyState=f.INIT)}if(h||(h=n().createObjectURL(t)),g)e.location.href=h;else{var a=e.open(h,"_blank");a||(e.location.href=h)}f.readyState=f.DONE,v(),u(h)};return f.readyState=f.INIT,a?(h=n().createObjectURL(t),void setTimeout(function(){i.href=h,i.download=s,r(i),v(),u(h),f.readyState=f.DONE})):void b()},f=h.prototype,m=function(e,t,n){return new h(e,t||e.name||"download",n)};return"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob?function(e,t,n){return t=t||e.name||"download",n||(e=p(e)),navigator.msSaveOrOpenBlob(e,t)}:(f.abort=function(){},f.readyState=f.INIT=0,f.WRITING=1,f.DONE=2,f.error=f.onwritestart=f.onprogress=f.onwrite=f.onabort=f.onerror=f.onwriteend=null,m)}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content);"undefined"!=typeof module&&module.exports?module.exports.saveAs=saveAs:"undefined"!=typeof define&&null!==define&&null!==define.amd&&define([],function(){return saveAs}),function(){"use strict";angular.module("http-auth-interceptor",["http-auth-interceptor-buffer"]).factory("authService",["$rootScope","httpBuffer",function(e,t){return{loginConfirmed:function(n,i){var a=i||function(e){return e};e.$broadcast("event:auth-loginConfirmed",n),t.retryAll(a)},loginCancelled:function(n,i){t.rejectAll(i),e.$broadcast("event:auth-loginCancelled",n)}}}]).config(["$httpProvider",function(e){e.interceptors.push(["$rootScope","$q","httpBuffer",function(e,t,n){return{responseError:function(i){if(401===i.status&&!i.config.ignoreAuthModule){var a=t.defer();return n.append(i.config,a),e.$broadcast("event:auth-loginRequired",i),a.promise}return t.reject(i)}}}])}]),angular.module("http-auth-interceptor-buffer",[]).factory("httpBuffer",["$injector",function(e){function t(t,i){function a(e){i.resolve(e)}function r(e){i.reject(e)}n=n||e.get("$http"),n(t).then(a,r)}var n,i=[];return{append:function(e,t){i.push({config:e,deferred:t})},rejectAll:function(e){if(e)for(var t=0;t<i.length;++t)i[t].deferred.reject(e);i=[]},retryAll:function(e){for(var n=0;n<i.length;++n)t(e(i[n].config),i[n].deferred);i=[]}}}])}(),function(e,t,n){!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):jQuery&&!jQuery.fn.sparkline&&e(jQuery)}(function(i){"use strict";var a,r,o,s,l,c,u,d,p,h,f,m,g,v,b,y,w,S,k,A,x,_,C,T,M,E,P,D,$,I,L,F,O={},R=0;a=function(){return{common:{type:"line",lineColor:"#00f",fillColor:"#cdf",defaultPixelsPerValue:3,width:"auto",height:"auto",composite:!1,tagValuesAttribute:"values",tagOptionsPrefix:"spark",enableTagOptions:!1,enableHighlight:!0,highlightLighten:1.4,tooltipSkipNull:!0,tooltipPrefix:"",tooltipSuffix:"",disableHiddenCheck:!1,numberFormatter:!1,numberDigitGroupCount:3,numberDigitGroupSep:",",numberDecimalMark:".",disableTooltips:!1,disableInteraction:!1},line:{spotColor:"#f80",highlightSpotColor:"#5f5",highlightLineColor:"#f22",spotRadius:1.5,minSpotColor:"#f80",maxSpotColor:"#f80",lineWidth:1,normalRangeMin:n,normalRangeMax:n,normalRangeColor:"#ccc",drawNormalOnTop:!1,chartRangeMin:n,chartRangeMax:n,chartRangeMinX:n,chartRangeMaxX:n,tooltipFormat:new o('<span style="color: {{color}}">&#9679;</span> {{prefix}}{{y}}{{suffix}}')},bar:{barColor:"#3366cc",negBarColor:"#f44",stackedBarColor:["#3366cc","#dc3912","#ff9900","#109618","#66aa00","#dd4477","#0099c6","#990099"],zeroColor:n,nullColor:n,zeroAxis:!0,barWidth:4,barSpacing:1,chartRangeMax:n,chartRangeMin:n,chartRangeClip:!1,colorMap:n,tooltipFormat:new o('<span style="color: {{color}}">&#9679;</span> {{prefix}}{{value}}{{suffix}}')},tristate:{barWidth:4,barSpacing:1,posBarColor:"#6f6",negBarColor:"#f44",zeroBarColor:"#999",colorMap:{},tooltipFormat:new o('<span style="color: {{color}}">&#9679;</span> {{value:map}}'),tooltipValueLookups:{map:{"-1":"Loss",0:"Draw",1:"Win"}}},discrete:{lineHeight:"auto",thresholdColor:n,thresholdValue:0,chartRangeMax:n,chartRangeMin:n,chartRangeClip:!1,tooltipFormat:new o("{{prefix}}{{value}}{{suffix}}")},bullet:{targetColor:"#f33",targetWidth:3,performanceColor:"#33f",rangeColors:["#d3dafe","#a8b6ff","#7f94ff"],base:n,tooltipFormat:new o("{{fieldkey:fields}} - {{value}}"),tooltipValueLookups:{fields:{r:"Range",p:"Performance",t:"Target"}}},pie:{offset:0,sliceColors:["#3366cc","#dc3912","#ff9900","#109618","#66aa00","#dd4477","#0099c6","#990099"],borderWidth:0,borderColor:"#000",tooltipFormat:new o('<span style="color: {{color}}">&#9679;</span> {{value}} ({{percent.1}}%)')},box:{raw:!1,boxLineColor:"#000",boxFillColor:"#cdf",whiskerColor:"#000",outlierLineColor:"#333",outlierFillColor:"#fff",medianColor:"#f00",showOutliers:!0,outlierIQR:1.5,spotRadius:1.5,target:n,targetColor:"#4a2",chartRangeMax:n,chartRangeMin:n,tooltipFormat:new o("{{field:fields}}: {{value}}"),tooltipFormatFieldlistKey:"field",tooltipValueLookups:{fields:{lq:"Lower Quartile",med:"Median",uq:"Upper Quartile",lo:"Left Outlier",ro:"Right Outlier",lw:"Left Whisker",rw:"Right Whisker"}}}}},E='.jqstooltip { position: absolute;left: 0px;top: 0px;visibility: hidden;background: rgb(0, 0, 0) transparent;background-color: rgba(0,0,0,0.6);filter:progid:DXImageTransform.Microsoft.gradient(startColorstr=#99000000, endColorstr=#99000000);-ms-filter: "progid:DXImageTransform.Microsoft.gradient(startColorstr=#99000000, endColorstr=#99000000)";color: white;font: 10px arial, san serif;text-align: left;white-space: nowrap;padding: 5px;border: 1px solid white;z-index: 10000;}.jqsfield { color: white;font: 10px arial, san serif;text-align: left;}',r=function(){var e,t;return e=function(){this.init.apply(this,arguments)},arguments.length>1?(arguments[0]?(e.prototype=i.extend(new arguments[0],arguments[arguments.length-1]),e._super=arguments[0].prototype):e.prototype=arguments[arguments.length-1],arguments.length>2&&(t=Array.prototype.slice.call(arguments,1,-1),t.unshift(e.prototype),i.extend.apply(i,t))):e.prototype=arguments[0],e.prototype.cls=e,e},i.SPFormatClass=o=r({fre:/\{\{([\w.]+?)(:(.+?))?\}\}/g,precre:/(\w+)\.(\d+)/,init:function(e,t){this.format=e,this.fclass=t},render:function(e,t,i){var a,r,o,s,l,c=this,u=e;return this.format.replace(this.fre,function(){var e;return r=arguments[1],o=arguments[3],a=c.precre.exec(r),a?(l=a[2],r=a[1]):l=!1,s=u[r],s===n?"":o&&t&&t[o]?(e=t[o],e.get?t[o].get(s)||s:t[o][s]||s):(p(s)&&(s=i.get("numberFormatter")?i.get("numberFormatter")(s):v(s,l,i.get("numberDigitGroupCount"),i.get("numberDigitGroupSep"),i.get("numberDecimalMark"))),s)})}}),i.spformat=function(e,t){return new o(e,t)},s=function(e,t,n){return e<t?t:e>n?n:e},l=function(e,n){var i;return 2===n?(i=t.floor(e.length/2),e.length%2?e[i]:(e[i-1]+e[i])/2):e.length%2?(i=(e.length*n+n)/4,i%1?(e[t.floor(i)]+e[t.floor(i)-1])/2:e[i-1]):(i=(e.length*n+2)/4,i%1?(e[t.floor(i)]+e[t.floor(i)-1])/2:e[i-1])},c=function(e){var t;switch(e){case"undefined":e=n;break;case"null":e=null;break;case"true":e=!0;break;case"false":e=!1;break;default:t=parseFloat(e),e==t&&(e=t)}return e},u=function(e){var t,n=[];for(t=e.length;t--;)n[t]=c(e[t]);return n},d=function(e,t){var n,i,a=[];for(n=0,i=e.length;n<i;n++)e[n]!==t&&a.push(e[n]);return a},p=function(e){return!isNaN(parseFloat(e))&&isFinite(e)},v=function(e,t,n,a,r){var o,s;for(e=(t===!1?parseFloat(e).toString():e.toFixed(t)).split(""),o=(o=i.inArray(".",e))<0?e.length:o,o<e.length&&(e[o]=r),s=o-n;s>0;s-=n)e.splice(s,0,a);return e.join("")},h=function(e,t,n){var i;for(i=t.length;i--;)if((!n||null!==t[i])&&t[i]!==e)return!1;return!0},f=function(e){var t,n=0;for(t=e.length;t--;)n+="number"==typeof e[t]?e[t]:0;return n},g=function(e){return i.isArray(e)?e:[e]},m=function(t){var n;e.createStyleSheet?e.createStyleSheet().cssText=t:(n=e.createElement("style"),n.type="text/css",e.getElementsByTagName("head")[0].appendChild(n),n["string"==typeof e.body.style.WebkitAppearance?"innerText":"innerHTML"]=t)},i.fn.simpledraw=function(t,a,r,o){var s,l;if(r&&(s=this.data("_jqs_vcanvas")))return s;if(i.fn.sparkline.canvas===!1)return!1;if(i.fn.sparkline.canvas===n){var c=e.createElement("canvas");if(c.getContext&&c.getContext("2d"))i.fn.sparkline.canvas=function(e,t,n,i){return new I(e,t,n,i)};else{if(!e.namespaces||e.namespaces.v)return i.fn.sparkline.canvas=!1,!1;e.namespaces.add("v","urn:schemas-microsoft-com:vml","#default#VML"),i.fn.sparkline.canvas=function(e,t,n,i){return new L(e,t,n)}}}return t===n&&(t=i(this).innerWidth()),a===n&&(a=i(this).innerHeight()),s=i.fn.sparkline.canvas(t,a,this,o),l=i(this).data("_jqs_mhandler"),l&&l.registerCanvas(s),s},i.fn.cleardraw=function(){var e=this.data("_jqs_vcanvas");e&&e.reset()},i.RangeMapClass=b=r({init:function(e){var t,n,i=[];for(t in e)e.hasOwnProperty(t)&&"string"==typeof t&&t.indexOf(":")>-1&&(n=t.split(":"),n[0]=0===n[0].length?-(1/0):parseFloat(n[0]),n[1]=0===n[1].length?1/0:parseFloat(n[1]),n[2]=e[t],i.push(n));this.map=e,this.rangelist=i||!1},get:function(e){var t,i,a,r=this.rangelist;if((a=this.map[e])!==n)return a;if(r)for(t=r.length;t--;)if(i=r[t],i[0]<=e&&i[1]>=e)return i[2];return n}}),i.range_map=function(e){return new b(e)},y=r({init:function(e,t){var n=i(e);this.$el=n,this.options=t,this.currentPageX=0,this.currentPageY=0,this.el=e,this.splist=[],this.tooltip=null,this.over=!1,this.displayTooltips=!t.get("disableTooltips"),this.highlightEnabled=!t.get("disableHighlight")},registerSparkline:function(e){this.splist.push(e),this.over&&this.updateDisplay()},registerCanvas:function(e){var t=i(e.canvas);this.canvas=e,this.$canvas=t,t.mouseenter(i.proxy(this.mouseenter,this)),t.mouseleave(i.proxy(this.mouseleave,this)),t.click(i.proxy(this.mouseclick,this))},reset:function(e){this.splist=[],this.tooltip&&e&&(this.tooltip.remove(),this.tooltip=n)},mouseclick:function(e){var t=i.Event("sparklineClick");t.originalEvent=e,t.sparklines=this.splist,this.$el.trigger(t)},mouseenter:function(t){i(e.body).unbind("mousemove.jqs"),i(e.body).bind("mousemove.jqs",i.proxy(this.mousemove,this)),this.over=!0,this.currentPageX=t.pageX,this.currentPageY=t.pageY,this.currentEl=t.target,!this.tooltip&&this.displayTooltips&&(this.tooltip=new w(this.options),this.tooltip.updatePosition(t.pageX,t.pageY)),this.updateDisplay()},mouseleave:function(){i(e.body).unbind("mousemove.jqs");var t,n,a=this.splist,r=a.length,o=!1;for(this.over=!1,this.currentEl=null,this.tooltip&&(this.tooltip.remove(),this.tooltip=null),n=0;n<r;n++)t=a[n],t.clearRegionHighlight()&&(o=!0);o&&this.canvas.render()},mousemove:function(e){this.currentPageX=e.pageX,this.currentPageY=e.pageY,this.currentEl=e.target,this.tooltip&&this.tooltip.updatePosition(e.pageX,e.pageY),this.updateDisplay()},updateDisplay:function(){var e,t,n,a,r,o=this.splist,s=o.length,l=!1,c=this.$canvas.offset(),u=this.currentPageX-c.left,d=this.currentPageY-c.top;if(this.over){for(n=0;n<s;n++)t=o[n],a=t.setRegionHighlight(this.currentEl,u,d),a&&(l=!0);if(l){if(r=i.Event("sparklineRegionChange"),r.sparklines=this.splist,this.$el.trigger(r),this.tooltip){for(e="",n=0;n<s;n++)t=o[n],e+=t.getCurrentRegionTooltip();this.tooltip.setContent(e)}this.disableHighlight||this.canvas.render()}null===a&&this.mouseleave()}}}),w=r({sizeStyle:"position: static !important;display: block !important;visibility: hidden !important;float: left !important;",init:function(t){var n,a=t.get("tooltipClassname","jqstooltip"),r=this.sizeStyle;this.container=t.get("tooltipContainer")||e.body,this.tooltipOffsetX=t.get("tooltipOffsetX",10),this.tooltipOffsetY=t.get("tooltipOffsetY",12),i("#jqssizetip").remove(),i("#jqstooltip").remove(),this.sizetip=i("<div/>",{id:"jqssizetip",style:r,class:a}),this.tooltip=i("<div/>",{id:"jqstooltip",class:a}).appendTo(this.container),n=this.tooltip.offset(),this.offsetLeft=n.left,this.offsetTop=n.top,this.hidden=!0,i(window).unbind("resize.jqs scroll.jqs"),i(window).bind("resize.jqs scroll.jqs",i.proxy(this.updateWindowDims,this)),this.updateWindowDims()},updateWindowDims:function(){this.scrollTop=i(window).scrollTop(),this.scrollLeft=i(window).scrollLeft(),this.scrollRight=this.scrollLeft+i(window).width(),this.updatePosition()},getSize:function(e){this.sizetip.html(e).appendTo(this.container),this.width=this.sizetip.width()+1,this.height=this.sizetip.height(),this.sizetip.remove()},setContent:function(e){return e?(this.getSize(e),this.tooltip.html(e).css({width:this.width,height:this.height,visibility:"visible"}),void(this.hidden&&(this.hidden=!1,this.updatePosition()))):(this.tooltip.css("visibility","hidden"),void(this.hidden=!0))},updatePosition:function(e,t){if(e===n){if(this.mousex===n)return;e=this.mousex-this.offsetLeft,t=this.mousey-this.offsetTop}else this.mousex=e-=this.offsetLeft,this.mousey=t-=this.offsetTop;this.height&&this.width&&!this.hidden&&(t-=this.height+this.tooltipOffsetY,e+=this.tooltipOffsetX,t<this.scrollTop&&(t=this.scrollTop),e<this.scrollLeft?e=this.scrollLeft:e+this.width>this.scrollRight&&(e=this.scrollRight-this.width),this.tooltip.css({left:e,top:t}))},remove:function(){this.tooltip.remove(),this.sizetip.remove(),this.sizetip=this.tooltip=n,i(window).unbind("resize.jqs scroll.jqs")}}),P=function(){m(E)},i(P),F=[],i.fn.sparkline=function(t,a){return this.each(function(){var r,o,s=new i.fn.sparkline.options(this,a),l=i(this);if(r=function(){var a,r,o,c,u,d,p;return"html"===t||t===n?(p=this.getAttribute(s.get("tagValuesAttribute")),p!==n&&null!==p||(p=l.html()),a=p.replace(/(^\s*<!--)|(-->\s*$)|\s+/g,"").split(",")):a=t,r="auto"===s.get("width")?a.length*s.get("defaultPixelsPerValue"):s.get("width"),"auto"===s.get("height")?s.get("composite")&&i.data(this,"_jqs_vcanvas")||(c=e.createElement("span"),c.innerHTML="a",l.html(c),o=i(c).innerHeight()||i(c).height(),i(c).remove(),c=null):o=s.get("height"),s.get("disableInteraction")?u=!1:(u=i.data(this,"_jqs_mhandler"),u?s.get("composite")||u.reset():(u=new y(this,s),i.data(this,"_jqs_mhandler",u))),s.get("composite")&&!i.data(this,"_jqs_vcanvas")?void(i.data(this,"_jqs_errnotify")||(alert("Attempted to attach a composite sparkline to an element with no existing sparkline"),i.data(this,"_jqs_errnotify",!0))):(d=new(i.fn.sparkline[s.get("type")])(this,a,s,r,o),d.render(),void(u&&u.registerSparkline(d)))},i(this).html()&&!s.get("disableHiddenCheck")&&i(this).is(":hidden")||!i(this).parents("body").length){if(!s.get("composite")&&i.data(this,"_jqs_pending"))for(o=F.length;o;o--)F[o-1][0]==this&&F.splice(o-1,1);F.push([this,r]),i.data(this,"_jqs_pending",!0)}else r.call(this)})},i.fn.sparkline.defaults=a(),i.sparkline_display_visible=function(){var e,t,n,a=[];for(t=0,n=F.length;t<n;t++)e=F[t][0],i(e).is(":visible")&&!i(e).parents().is(":hidden")?(F[t][1].call(e),i.data(F[t][0],"_jqs_pending",!1),a.push(t)):i(e).closest("html").length||i.data(e,"_jqs_pending")||(i.data(F[t][0],"_jqs_pending",!1),a.push(t));for(t=a.length;t;t--)F.splice(a[t-1],1)},i.fn.sparkline.options=r({init:function(e,t){var n,a,r,o;this.userOptions=t=t||{},this.tag=e,this.tagValCache={},a=i.fn.sparkline.defaults,r=a.common,this.tagOptionsPrefix=t.enableTagOptions&&(t.tagOptionsPrefix||r.tagOptionsPrefix),o=this.getTagSetting("type"),n=o===O?a[t.type||r.type]:a[o],this.mergedOptions=i.extend({},r,n,t)},getTagSetting:function(e){var t,i,a,r,o=this.tagOptionsPrefix;if(o===!1||o===n)return O;if(this.tagValCache.hasOwnProperty(e))t=this.tagValCache.key;else{if(t=this.tag.getAttribute(o+e),t===n||null===t)t=O;else if("["===t.substr(0,1))for(t=t.substr(1,t.length-2).split(","),i=t.length;i--;)t[i]=c(t[i].replace(/(^\s*)|(\s*$)/g,""));else if("{"===t.substr(0,1))for(a=t.substr(1,t.length-2).split(","),t={},i=a.length;i--;)r=a[i].split(":",2),t[r[0].replace(/(^\s*)|(\s*$)/g,"")]=c(r[1].replace(/(^\s*)|(\s*$)/g,""));else t=c(t);this.tagValCache.key=t}return t},get:function(e,t){var i,a=this.getTagSetting(e);return a!==O?a:(i=this.mergedOptions[e])===n?t:i}}),i.fn.sparkline._base=r({disabled:!1,init:function(e,t,a,r,o){this.el=e,this.$el=i(e),this.values=t,this.options=a,this.width=r,this.height=o,this.currentRegion=n},initTarget:function(){var e=!this.options.get("disableInteraction");(this.target=this.$el.simpledraw(this.width,this.height,this.options.get("composite"),e))?(this.canvasWidth=this.target.pixelWidth,this.canvasHeight=this.target.pixelHeight):this.disabled=!0},render:function(){return!this.disabled||(this.el.innerHTML="",!1)},getRegion:function(e,t){},setRegionHighlight:function(e,t,i){var a,r=this.currentRegion,o=!this.options.get("disableHighlight");return t>this.canvasWidth||i>this.canvasHeight||t<0||i<0?null:(a=this.getRegion(e,t,i),r!==a&&(r!==n&&o&&this.removeHighlight(),this.currentRegion=a,a!==n&&o&&this.renderHighlight(),!0))},clearRegionHighlight:function(){return this.currentRegion!==n&&(this.removeHighlight(),this.currentRegion=n,!0)},renderHighlight:function(){this.changeHighlight(!0)},removeHighlight:function(){this.changeHighlight(!1)},changeHighlight:function(e){},getCurrentRegionTooltip:function(){var e,t,a,r,s,l,c,u,d,p,h,f,m,g,v=this.options,b="",y=[];if(this.currentRegion===n)return"";if(e=this.getCurrentRegionFields(),h=v.get("tooltipFormatter"))return h(this,v,e);if(v.get("tooltipChartTitle")&&(b+='<div class="jqs jqstitle">'+v.get("tooltipChartTitle")+"</div>\n"),t=this.options.get("tooltipFormat"),!t)return"";if(i.isArray(t)||(t=[t]),i.isArray(e)||(e=[e]),c=this.options.get("tooltipFormatFieldlist"),u=this.options.get("tooltipFormatFieldlistKey"),c&&u){for(d=[],l=e.length;l--;)p=e[l][u],(g=i.inArray(p,c))!=-1&&(d[g]=e[l]);e=d}for(a=t.length,m=e.length,l=0;l<a;l++)for(f=t[l],"string"==typeof f&&(f=new o(f)),r=f.fclass||"jqsfield",g=0;g<m;g++)e[g].isNull&&v.get("tooltipSkipNull")||(i.extend(e[g],{prefix:v.get("tooltipPrefix"),suffix:v.get("tooltipSuffix")}),s=f.render(e[g],v.get("tooltipValueLookups"),v),y.push('<div class="'+r+'">'+s+"</div>"));return y.length?b+y.join("\n"):""},getCurrentRegionFields:function(){},calcHighlightColor:function(e,n){var i,a,r,o,l=n.get("highlightColor"),c=n.get("highlightLighten");if(l)return l;if(c&&(i=/^#([0-9a-f])([0-9a-f])([0-9a-f])$/i.exec(e)||/^#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})$/i.exec(e))){for(r=[],a=4===e.length?16:1,o=0;o<3;o++)r[o]=s(t.round(parseInt(i[o+1],16)*a*c),0,255);return"rgb("+r.join(",")+")"}return e}}),S={changeHighlight:function(e){var t,n=this.currentRegion,a=this.target,r=this.regionShapes[n];r&&(t=this.renderRegion(n,e),i.isArray(t)||i.isArray(r)?(a.replaceWithShapes(r,t),this.regionShapes[n]=i.map(t,function(e){return e.id})):(a.replaceWithShape(r,t),this.regionShapes[n]=t.id))},render:function(){var e,t,n,a,r=this.values,o=this.target,s=this.regionShapes;if(this.cls._super.render.call(this)){for(n=r.length;n--;)if(e=this.renderRegion(n))if(i.isArray(e)){for(t=[],a=e.length;a--;)e[a].append(),t.push(e[a].id);s[n]=t}else e.append(),s[n]=e.id;else s[n]=null;o.render()}}},i.fn.sparkline.line=k=r(i.fn.sparkline._base,{type:"line",init:function(e,t,n,i,a){k._super.init.call(this,e,t,n,i,a),this.vertices=[],this.regionMap=[],this.xvalues=[],this.yvalues=[],this.yminmax=[],this.hightlightSpotId=null,this.lastShapeId=null,this.initTarget()},getRegion:function(e,t,i){var a,r=this.regionMap;for(a=r.length;a--;)if(null!==r[a]&&t>=r[a][0]&&t<=r[a][1])return r[a][2];return n},getCurrentRegionFields:function(){var e=this.currentRegion;return{isNull:null===this.yvalues[e],x:this.xvalues[e],y:this.yvalues[e],color:this.options.get("lineColor"),fillColor:this.options.get("fillColor"),offset:e}},renderHighlight:function(){var e,t,i=this.currentRegion,a=this.target,r=this.vertices[i],o=this.options,s=o.get("spotRadius"),l=o.get("highlightSpotColor"),c=o.get("highlightLineColor");r&&(s&&l&&(e=a.drawCircle(r[0],r[1],s,n,l),this.highlightSpotId=e.id,a.insertAfterShape(this.lastShapeId,e)),c&&(t=a.drawLine(r[0],this.canvasTop,r[0],this.canvasTop+this.canvasHeight,c),this.highlightLineId=t.id,a.insertAfterShape(this.lastShapeId,t)))},removeHighlight:function(){var e=this.target;this.highlightSpotId&&(e.removeShapeId(this.highlightSpotId),this.highlightSpotId=null),this.highlightLineId&&(e.removeShapeId(this.highlightLineId),this.highlightLineId=null)},scanValues:function(){var e,n,i,a,r,o=this.values,s=o.length,l=this.xvalues,c=this.yvalues,u=this.yminmax;for(e=0;e<s;e++)n=o[e],i="string"==typeof o[e],a="object"==typeof o[e]&&o[e]instanceof Array,r=i&&o[e].split(":"),i&&2===r.length?(l.push(Number(r[0])),c.push(Number(r[1])),u.push(Number(r[1]))):a?(l.push(n[0]),c.push(n[1]),u.push(n[1])):(l.push(e),null===o[e]||"null"===o[e]?c.push(null):(c.push(Number(n)),u.push(Number(n))));this.options.get("xvalues")&&(l=this.options.get("xvalues")),this.maxy=this.maxyorg=t.max.apply(t,u),this.miny=this.minyorg=t.min.apply(t,u),this.maxx=t.max.apply(t,l),this.minx=t.min.apply(t,l),this.xvalues=l,this.yvalues=c,this.yminmax=u},processRangeOptions:function(){var e=this.options,t=e.get("normalRangeMin"),i=e.get("normalRangeMax");t!==n&&(t<this.miny&&(this.miny=t),i>this.maxy&&(this.maxy=i)),e.get("chartRangeMin")!==n&&(e.get("chartRangeClip")||e.get("chartRangeMin")<this.miny)&&(this.miny=e.get("chartRangeMin")),e.get("chartRangeMax")!==n&&(e.get("chartRangeClip")||e.get("chartRangeMax")>this.maxy)&&(this.maxy=e.get("chartRangeMax")),e.get("chartRangeMinX")!==n&&(e.get("chartRangeClipX")||e.get("chartRangeMinX")<this.minx)&&(this.minx=e.get("chartRangeMinX")),e.get("chartRangeMaxX")!==n&&(e.get("chartRangeClipX")||e.get("chartRangeMaxX")>this.maxx)&&(this.maxx=e.get("chartRangeMaxX"))},drawNormalRange:function(e,i,a,r,o){var s=this.options.get("normalRangeMin"),l=this.options.get("normalRangeMax"),c=i+t.round(a-a*((l-this.miny)/o)),u=t.round(a*(l-s)/o);this.target.drawRect(e,c,r,u,n,this.options.get("normalRangeColor")).append()},render:function(){var e,a,r,o,s,l,c,u,d,p,h,f,m,g,v,y,w,S,A,x,_,C,T,M,E,P=this.options,D=this.target,$=this.canvasWidth,I=this.canvasHeight,L=this.vertices,F=P.get("spotRadius"),O=this.regionMap;if(k._super.render.call(this)&&(this.scanValues(),this.processRangeOptions(),T=this.xvalues,M=this.yvalues,this.yminmax.length&&!(this.yvalues.length<2))){for(o=s=0,e=this.maxx-this.minx===0?1:this.maxx-this.minx,a=this.maxy-this.miny===0?1:this.maxy-this.miny,r=this.yvalues.length-1,F&&($<4*F||I<4*F)&&(F=0),F&&(_=P.get("highlightSpotColor")&&!P.get("disableInteraction"),(_||P.get("minSpotColor")||P.get("spotColor")&&M[r]===this.miny)&&(I-=t.ceil(F)),(_||P.get("maxSpotColor")||P.get("spotColor")&&M[r]===this.maxy)&&(I-=t.ceil(F),o+=t.ceil(F)),(_||(P.get("minSpotColor")||P.get("maxSpotColor"))&&(M[0]===this.miny||M[0]===this.maxy))&&(s+=t.ceil(F),$-=t.ceil(F)),(_||P.get("spotColor")||P.get("minSpotColor")||P.get("maxSpotColor")&&(M[r]===this.miny||M[r]===this.maxy))&&($-=t.ceil(F))),I--,P.get("normalRangeMin")===n||P.get("drawNormalOnTop")||this.drawNormalRange(s,o,I,$,a),c=[],u=[c],g=v=null,y=M.length,E=0;E<y;E++)d=T[E],h=T[E+1],p=M[E],f=s+t.round((d-this.minx)*($/e)),m=E<y-1?s+t.round((h-this.minx)*($/e)):$,v=f+(m-f)/2,O[E]=[g||0,v,E],g=v,null===p?E&&(null!==M[E-1]&&(c=[],u.push(c)),L.push(null)):(p<this.miny&&(p=this.miny),p>this.maxy&&(p=this.maxy),c.length||c.push([f,o+I]),l=[f,o+t.round(I-I*((p-this.miny)/a))],c.push(l),L.push(l));for(w=[],S=[],A=u.length,E=0;E<A;E++)c=u[E],c.length&&(P.get("fillColor")&&(c.push([c[c.length-1][0],o+I]),S.push(c.slice(0)),c.pop()),c.length>2&&(c[0]=[c[0][0],c[1][1]]),w.push(c));for(A=S.length,E=0;E<A;E++)D.drawShape(S[E],P.get("fillColor"),P.get("fillColor")).append();for(P.get("normalRangeMin")!==n&&P.get("drawNormalOnTop")&&this.drawNormalRange(s,o,I,$,a),A=w.length,E=0;E<A;E++)D.drawShape(w[E],P.get("lineColor"),n,P.get("lineWidth")).append();if(F&&P.get("valueSpots"))for(x=P.get("valueSpots"),x.get===n&&(x=new b(x)),E=0;E<y;E++)C=x.get(M[E]),C&&D.drawCircle(s+t.round((T[E]-this.minx)*($/e)),o+t.round(I-I*((M[E]-this.miny)/a)),F,n,C).append();F&&P.get("spotColor")&&null!==M[r]&&D.drawCircle(s+t.round((T[T.length-1]-this.minx)*($/e)),o+t.round(I-I*((M[r]-this.miny)/a)),F,n,P.get("spotColor")).append(),this.maxy!==this.minyorg&&(F&&P.get("minSpotColor")&&(d=T[i.inArray(this.minyorg,M)],D.drawCircle(s+t.round((d-this.minx)*($/e)),o+t.round(I-I*((this.minyorg-this.miny)/a)),F,n,P.get("minSpotColor")).append()),F&&P.get("maxSpotColor")&&(d=T[i.inArray(this.maxyorg,M)],D.drawCircle(s+t.round((d-this.minx)*($/e)),o+t.round(I-I*((this.maxyorg-this.miny)/a)),F,n,P.get("maxSpotColor")).append())),this.lastShapeId=D.getLastShapeId(),this.canvasTop=o,D.render()}}}),i.fn.sparkline.bar=A=r(i.fn.sparkline._base,S,{type:"bar",init:function(e,a,r,o,l){var p,h,f,m,g,v,y,w,S,k,x,_,C,T,M,E,P,D,$,I,L,F,O=parseInt(r.get("barWidth"),10),R=parseInt(r.get("barSpacing"),10),N=r.get("chartRangeMin"),z=r.get("chartRangeMax"),U=r.get("chartRangeClip"),B=1/0,q=-(1/0);for(A._super.init.call(this,e,a,r,o,l),v=0,y=a.length;v<y;v++)I=a[v],p="string"==typeof I&&I.indexOf(":")>-1,(p||i.isArray(I))&&(M=!0,p&&(I=a[v]=u(I.split(":"))),I=d(I,null),h=t.min.apply(t,I),f=t.max.apply(t,I),h<B&&(B=h),f>q&&(q=f));this.stacked=M,this.regionShapes={},this.barWidth=O,this.barSpacing=R,this.totalBarWidth=O+R,this.width=o=a.length*O+(a.length-1)*R,this.initTarget(),U&&(C=N===n?-(1/0):N,T=z===n?1/0:z),g=[],m=M?[]:g;var H=[],W=[];for(v=0,y=a.length;v<y;v++)if(M)for(E=a[v],a[v]=$=[],H[v]=0,m[v]=W[v]=0,P=0,D=E.length;P<D;P++)I=$[P]=U?s(E[P],C,T):E[P],null!==I&&(I>0&&(H[v]+=I),B<0&&q>0?I<0?W[v]+=t.abs(I):m[v]+=I:m[v]+=t.abs(I-(I<0?q:B)),g.push(I));else I=U?s(a[v],C,T):a[v],I=a[v]=c(I),null!==I&&g.push(I);this.max=_=t.max.apply(t,g),this.min=x=t.min.apply(t,g),this.stackMax=q=M?t.max.apply(t,H):_,this.stackMin=B=M?t.min.apply(t,g):x,r.get("chartRangeMin")!==n&&(r.get("chartRangeClip")||r.get("chartRangeMin")<x)&&(x=r.get("chartRangeMin")),r.get("chartRangeMax")!==n&&(r.get("chartRangeClip")||r.get("chartRangeMax")>_)&&(_=r.get("chartRangeMax")),this.zeroAxis=S=r.get("zeroAxis",!0),k=x<=0&&_>=0&&S?0:0==S?x:x>0?x:_,this.xaxisOffset=k,w=M?t.max.apply(t,m)+t.max.apply(t,W):_-x,this.canvasHeightEf=S&&x<0?this.canvasHeight-2:this.canvasHeight-1,x<k?(F=M&&_>=0?q:_,L=(F-k)/w*this.canvasHeight,L!==t.ceil(L)&&(this.canvasHeightEf-=2,L=t.ceil(L))):L=this.canvasHeight,this.yoffset=L,i.isArray(r.get("colorMap"))?(this.colorMapByIndex=r.get("colorMap"),this.colorMapByValue=null):(this.colorMapByIndex=null,this.colorMapByValue=r.get("colorMap"),this.colorMapByValue&&this.colorMapByValue.get===n&&(this.colorMapByValue=new b(this.colorMapByValue))),this.range=w},getRegion:function(e,i,a){var r=t.floor(i/this.totalBarWidth);return r<0||r>=this.values.length?n:r},getCurrentRegionFields:function(){var e,t,n=this.currentRegion,i=g(this.values[n]),a=[];for(t=i.length;t--;)e=i[t],a.push({isNull:null===e,value:e,color:this.calcColor(t,e,n),offset:n});return a},calcColor:function(e,t,a){var r,o,s=this.colorMapByIndex,l=this.colorMapByValue,c=this.options;return r=this.stacked?c.get("stackedBarColor"):t<0?c.get("negBarColor"):c.get("barColor"),0===t&&c.get("zeroColor")!==n&&(r=c.get("zeroColor")),l&&(o=l.get(t))?r=o:s&&s.length>a&&(r=s[a]),i.isArray(r)?r[e%r.length]:r},renderRegion:function(e,a){var r,o,s,l,c,u,d,p,f,m,g=this.values[e],v=this.options,b=this.xaxisOffset,y=[],w=this.range,S=this.stacked,k=this.target,A=e*this.totalBarWidth,x=this.canvasHeightEf,_=this.yoffset;if(g=i.isArray(g)?g:[g],d=g.length,p=g[0],l=h(null,g),m=h(b,g,!0),l)return v.get("nullColor")?(s=a?v.get("nullColor"):this.calcHighlightColor(v.get("nullColor"),v),r=_>0?_-1:_,k.drawRect(A,r,this.barWidth-1,0,s,s)):n;for(c=_,u=0;u<d;u++){if(p=g[u],S&&p===b){if(!m||f)continue;f=!0}o=w>0?t.floor(x*(t.abs(p-b)/w))+1:1,p<b||p===b&&0===_?(r=c,c+=o):(r=_-o,_-=o),s=this.calcColor(u,p,e),a&&(s=this.calcHighlightColor(s,v)),y.push(k.drawRect(A,r,this.barWidth-1,o-1,s,s))}return 1===y.length?y[0]:y}}),i.fn.sparkline.tristate=x=r(i.fn.sparkline._base,S,{type:"tristate",init:function(e,t,a,r,o){var s=parseInt(a.get("barWidth"),10),l=parseInt(a.get("barSpacing"),10);x._super.init.call(this,e,t,a,r,o),this.regionShapes={},this.barWidth=s,this.barSpacing=l,this.totalBarWidth=s+l,this.values=i.map(t,Number),this.width=r=t.length*s+(t.length-1)*l,i.isArray(a.get("colorMap"))?(this.colorMapByIndex=a.get("colorMap"),this.colorMapByValue=null):(this.colorMapByIndex=null,this.colorMapByValue=a.get("colorMap"),this.colorMapByValue&&this.colorMapByValue.get===n&&(this.colorMapByValue=new b(this.colorMapByValue))),this.initTarget()},getRegion:function(e,n,i){return t.floor(n/this.totalBarWidth)},getCurrentRegionFields:function(){var e=this.currentRegion;return{isNull:this.values[e]===n,value:this.values[e],color:this.calcColor(this.values[e],e),offset:e}},calcColor:function(e,t){var n,i,a=this.values,r=this.options,o=this.colorMapByIndex,s=this.colorMapByValue;return n=s&&(i=s.get(e))?i:o&&o.length>t?o[t]:a[t]<0?r.get("negBarColor"):a[t]>0?r.get("posBarColor"):r.get("zeroBarColor")},renderRegion:function(e,n){var i,a,r,o,s,l,c=this.values,u=this.options,d=this.target;if(i=d.pixelHeight,r=t.round(i/2),o=e*this.totalBarWidth,c[e]<0?(s=r,a=r-1):c[e]>0?(s=0,a=r-1):(s=r-1,a=2),l=this.calcColor(c[e],e),null!==l)return n&&(l=this.calcHighlightColor(l,u)),d.drawRect(o,s,this.barWidth-1,a-1,l,l)}}),i.fn.sparkline.discrete=_=r(i.fn.sparkline._base,S,{type:"discrete",init:function(e,a,r,o,s){_._super.init.call(this,e,a,r,o,s),this.regionShapes={},this.values=a=i.map(a,Number),this.min=t.min.apply(t,a),this.max=t.max.apply(t,a),this.range=this.max-this.min,this.width=o="auto"===r.get("width")?2*a.length:this.width,this.interval=t.floor(o/a.length),this.itemWidth=o/a.length,r.get("chartRangeMin")!==n&&(r.get("chartRangeClip")||r.get("chartRangeMin")<this.min)&&(this.min=r.get("chartRangeMin")),r.get("chartRangeMax")!==n&&(r.get("chartRangeClip")||r.get("chartRangeMax")>this.max)&&(this.max=r.get("chartRangeMax")),this.initTarget(),this.target&&(this.lineHeight="auto"===r.get("lineHeight")?t.round(.3*this.canvasHeight):r.get("lineHeight"))},getRegion:function(e,n,i){return t.floor(n/this.itemWidth)},getCurrentRegionFields:function(){var e=this.currentRegion;return{isNull:this.values[e]===n,value:this.values[e],offset:e}},renderRegion:function(e,n){var i,a,r,o,l=this.values,c=this.options,u=this.min,d=this.max,p=this.range,h=this.interval,f=this.target,m=this.canvasHeight,g=this.lineHeight,v=m-g;return a=s(l[e],u,d),o=e*h,i=t.round(v-v*((a-u)/p)),r=c.get("thresholdColor")&&a<c.get("thresholdValue")?c.get("thresholdColor"):c.get("lineColor"),
n&&(r=this.calcHighlightColor(r,c)),f.drawLine(o,i,o,i+g,r)}}),i.fn.sparkline.bullet=C=r(i.fn.sparkline._base,{type:"bullet",init:function(e,i,a,r,o){var s,l,c;C._super.init.call(this,e,i,a,r,o),this.values=i=u(i),c=i.slice(),c[0]=null===c[0]?c[2]:c[0],c[1]=null===i[1]?c[2]:c[1],s=t.min.apply(t,i),l=t.max.apply(t,i),s=a.get("base")===n?s<0?s:0:a.get("base"),this.min=s,this.max=l,this.range=l-s,this.shapes={},this.valueShapes={},this.regiondata={},this.width=r="auto"===a.get("width")?"4.0em":r,this.target=this.$el.simpledraw(r,o,a.get("composite")),i.length||(this.disabled=!0),this.initTarget()},getRegion:function(e,t,i){var a=this.target.getShapeAt(e,t,i);return a!==n&&this.shapes[a]!==n?this.shapes[a]:n},getCurrentRegionFields:function(){var e=this.currentRegion;return{fieldkey:e.substr(0,1),value:this.values[e.substr(1)],region:e}},changeHighlight:function(e){var t,n=this.currentRegion,i=this.valueShapes[n];switch(delete this.shapes[i],n.substr(0,1)){case"r":t=this.renderRange(n.substr(1),e);break;case"p":t=this.renderPerformance(e);break;case"t":t=this.renderTarget(e)}this.valueShapes[n]=t.id,this.shapes[t.id]=n,this.target.replaceWithShape(i,t)},renderRange:function(e,n){var i=this.values[e],a=t.round(this.canvasWidth*((i-this.min)/this.range)),r=this.options.get("rangeColors")[e-2];return n&&(r=this.calcHighlightColor(r,this.options)),this.target.drawRect(0,0,a-1,this.canvasHeight-1,r,r)},renderPerformance:function(e){var n=this.values[1],i=t.round(this.canvasWidth*((n-this.min)/this.range)),a=this.options.get("performanceColor");return e&&(a=this.calcHighlightColor(a,this.options)),this.target.drawRect(0,t.round(.3*this.canvasHeight),i-1,t.round(.4*this.canvasHeight)-1,a,a)},renderTarget:function(e){var n=this.values[0],i=t.round(this.canvasWidth*((n-this.min)/this.range)-this.options.get("targetWidth")/2),a=t.round(.1*this.canvasHeight),r=this.canvasHeight-2*a,o=this.options.get("targetColor");return e&&(o=this.calcHighlightColor(o,this.options)),this.target.drawRect(i,a,this.options.get("targetWidth")-1,r-1,o,o)},render:function(){var e,t,n=this.values.length,i=this.target;if(C._super.render.call(this)){for(e=2;e<n;e++)t=this.renderRange(e).append(),this.shapes[t.id]="r"+e,this.valueShapes["r"+e]=t.id;null!==this.values[1]&&(t=this.renderPerformance().append(),this.shapes[t.id]="p1",this.valueShapes.p1=t.id),null!==this.values[0]&&(t=this.renderTarget().append(),this.shapes[t.id]="t0",this.valueShapes.t0=t.id),i.render()}}}),i.fn.sparkline.pie=T=r(i.fn.sparkline._base,{type:"pie",init:function(e,n,a,r,o){var s,l=0;if(T._super.init.call(this,e,n,a,r,o),this.shapes={},this.valueShapes={},this.values=n=i.map(n,Number),"auto"===a.get("width")&&(this.width=this.height),n.length>0)for(s=n.length;s--;)l+=n[s];this.total=l,this.initTarget(),this.radius=t.floor(t.min(this.canvasWidth,this.canvasHeight)/2)},getRegion:function(e,t,i){var a=this.target.getShapeAt(e,t,i);return a!==n&&this.shapes[a]!==n?this.shapes[a]:n},getCurrentRegionFields:function(){var e=this.currentRegion;return{isNull:this.values[e]===n,value:this.values[e],percent:this.values[e]/this.total*100,color:this.options.get("sliceColors")[e%this.options.get("sliceColors").length],offset:e}},changeHighlight:function(e){var t=this.currentRegion,n=this.renderSlice(t,e),i=this.valueShapes[t];delete this.shapes[i],this.target.replaceWithShape(i,n),this.valueShapes[t]=n.id,this.shapes[n.id]=t},renderSlice:function(e,i){var a,r,o,s,l,c=this.target,u=this.options,d=this.radius,p=u.get("borderWidth"),h=u.get("offset"),f=2*t.PI,m=this.values,g=this.total,v=h?2*t.PI*(h/360):0;for(s=m.length,o=0;o<s;o++){if(a=v,r=v,g>0&&(r=v+f*(m[o]/g)),e===o)return l=u.get("sliceColors")[o%u.get("sliceColors").length],i&&(l=this.calcHighlightColor(l,u)),c.drawPieSlice(d,d,d-p,a,r,n,l);v=r}},render:function(){var e,i,a=this.target,r=this.values,o=this.options,s=this.radius,l=o.get("borderWidth");if(T._super.render.call(this)){for(l&&a.drawCircle(s,s,t.floor(s-l/2),o.get("borderColor"),n,l).append(),i=r.length;i--;)r[i]&&(e=this.renderSlice(i).append(),this.valueShapes[i]=e.id,this.shapes[e.id]=i);a.render()}}}),i.fn.sparkline.box=M=r(i.fn.sparkline._base,{type:"box",init:function(e,t,n,a,r){M._super.init.call(this,e,t,n,a,r),this.values=i.map(t,Number),this.width="auto"===n.get("width")?"4.0em":a,this.initTarget(),this.values.length||(this.disabled=1)},getRegion:function(){return 1},getCurrentRegionFields:function(){var e=[{field:"lq",value:this.quartiles[0]},{field:"med",value:this.quartiles[1]},{field:"uq",value:this.quartiles[2]}];return this.loutlier!==n&&e.push({field:"lo",value:this.loutlier}),this.routlier!==n&&e.push({field:"ro",value:this.routlier}),this.lwhisker!==n&&e.push({field:"lw",value:this.lwhisker}),this.rwhisker!==n&&e.push({field:"rw",value:this.rwhisker}),e},render:function(){var e,i,a,r,o,s,c,u,d,p,h,f=this.target,m=this.values,g=m.length,v=this.options,b=this.canvasWidth,y=this.canvasHeight,w=v.get("chartRangeMin")===n?t.min.apply(t,m):v.get("chartRangeMin"),S=v.get("chartRangeMax")===n?t.max.apply(t,m):v.get("chartRangeMax"),k=0;if(M._super.render.call(this)){if(v.get("raw"))v.get("showOutliers")&&m.length>5?(i=m[0],e=m[1],r=m[2],o=m[3],s=m[4],c=m[5],u=m[6]):(e=m[0],r=m[1],o=m[2],s=m[3],c=m[4]);else if(m.sort(function(e,t){return e-t}),r=l(m,1),o=l(m,2),s=l(m,3),a=s-r,v.get("showOutliers")){for(e=c=n,d=0;d<g;d++)e===n&&m[d]>r-a*v.get("outlierIQR")&&(e=m[d]),m[d]<s+a*v.get("outlierIQR")&&(c=m[d]);i=m[0],u=m[g-1]}else e=m[0],c=m[g-1];this.quartiles=[r,o,s],this.lwhisker=e,this.rwhisker=c,this.loutlier=i,this.routlier=u,h=b/(S-w+1),v.get("showOutliers")&&(k=t.ceil(v.get("spotRadius")),b-=2*t.ceil(v.get("spotRadius")),h=b/(S-w+1),i<e&&f.drawCircle((i-w)*h+k,y/2,v.get("spotRadius"),v.get("outlierLineColor"),v.get("outlierFillColor")).append(),u>c&&f.drawCircle((u-w)*h+k,y/2,v.get("spotRadius"),v.get("outlierLineColor"),v.get("outlierFillColor")).append()),f.drawRect(t.round((r-w)*h+k),t.round(.1*y),t.round((s-r)*h),t.round(.8*y),v.get("boxLineColor"),v.get("boxFillColor")).append(),f.drawLine(t.round((e-w)*h+k),t.round(y/2),t.round((r-w)*h+k),t.round(y/2),v.get("lineColor")).append(),f.drawLine(t.round((e-w)*h+k),t.round(y/4),t.round((e-w)*h+k),t.round(y-y/4),v.get("whiskerColor")).append(),f.drawLine(t.round((c-w)*h+k),t.round(y/2),t.round((s-w)*h+k),t.round(y/2),v.get("lineColor")).append(),f.drawLine(t.round((c-w)*h+k),t.round(y/4),t.round((c-w)*h+k),t.round(y-y/4),v.get("whiskerColor")).append(),f.drawLine(t.round((o-w)*h+k),t.round(.1*y),t.round((o-w)*h+k),t.round(.9*y),v.get("medianColor")).append(),v.get("target")&&(p=t.ceil(v.get("spotRadius")),f.drawLine(t.round((v.get("target")-w)*h+k),t.round(y/2-p),t.round((v.get("target")-w)*h+k),t.round(y/2+p),v.get("targetColor")).append(),f.drawLine(t.round((v.get("target")-w)*h+k-p),t.round(y/2),t.round((v.get("target")-w)*h+k+p),t.round(y/2),v.get("targetColor")).append()),f.render()}}}),D=r({init:function(e,t,n,i){this.target=e,this.id=t,this.type=n,this.args=i},append:function(){return this.target.appendShape(this),this}}),$=r({_pxregex:/(\d+)(px)?\s*$/i,init:function(e,t,n){e&&(this.width=e,this.height=t,this.target=n,this.lastShapeId=null,n[0]&&(n=n[0]),i.data(n,"_jqs_vcanvas",this))},drawLine:function(e,t,n,i,a,r){return this.drawShape([[e,t],[n,i]],a,r)},drawShape:function(e,t,n,i){return this._genShape("Shape",[e,t,n,i])},drawCircle:function(e,t,n,i,a,r){return this._genShape("Circle",[e,t,n,i,a,r])},drawPieSlice:function(e,t,n,i,a,r,o){return this._genShape("PieSlice",[e,t,n,i,a,r,o])},drawRect:function(e,t,n,i,a,r){return this._genShape("Rect",[e,t,n,i,a,r])},getElement:function(){return this.canvas},getLastShapeId:function(){return this.lastShapeId},reset:function(){alert("reset not implemented")},_insert:function(e,t){i(t).html(e)},_calculatePixelDims:function(e,t,n){var a;a=this._pxregex.exec(t),a?this.pixelHeight=a[1]:this.pixelHeight=i(n).height(),a=this._pxregex.exec(e),a?this.pixelWidth=a[1]:this.pixelWidth=i(n).width()},_genShape:function(e,t){var n=R++;return t.unshift(n),new D(this,n,e,t)},appendShape:function(e){alert("appendShape not implemented")},replaceWithShape:function(e,t){alert("replaceWithShape not implemented")},insertAfterShape:function(e,t){alert("insertAfterShape not implemented")},removeShapeId:function(e){alert("removeShapeId not implemented")},getShapeAt:function(e,t,n){alert("getShapeAt not implemented")},render:function(){alert("render not implemented")}}),I=r($,{init:function(t,a,r,o){I._super.init.call(this,t,a,r),this.canvas=e.createElement("canvas"),r[0]&&(r=r[0]),i.data(r,"_jqs_vcanvas",this),i(this.canvas).css({display:"inline-block",width:t,height:a,verticalAlign:"top"}),this._insert(this.canvas,r),this._calculatePixelDims(t,a,this.canvas),this.canvas.width=this.pixelWidth,this.canvas.height=this.pixelHeight,this.interact=o,this.shapes={},this.shapeseq=[],this.currentTargetShapeId=n,i(this.canvas).css({width:this.pixelWidth,height:this.pixelHeight})},_getContext:function(e,t,i){var a=this.canvas.getContext("2d");return e!==n&&(a.strokeStyle=e),a.lineWidth=i===n?1:i,t!==n&&(a.fillStyle=t),a},reset:function(){var e=this._getContext();e.clearRect(0,0,this.pixelWidth,this.pixelHeight),this.shapes={},this.shapeseq=[],this.currentTargetShapeId=n},_drawShape:function(e,t,i,a,r){var o,s,l=this._getContext(i,a,r);for(l.beginPath(),l.moveTo(t[0][0]+.5,t[0][1]+.5),o=1,s=t.length;o<s;o++)l.lineTo(t[o][0]+.5,t[o][1]+.5);i!==n&&l.stroke(),a!==n&&l.fill(),this.targetX!==n&&this.targetY!==n&&l.isPointInPath(this.targetX,this.targetY)&&(this.currentTargetShapeId=e)},_drawCircle:function(e,i,a,r,o,s,l){var c=this._getContext(o,s,l);c.beginPath(),c.arc(i,a,r,0,2*t.PI,!1),this.targetX!==n&&this.targetY!==n&&c.isPointInPath(this.targetX,this.targetY)&&(this.currentTargetShapeId=e),o!==n&&c.stroke(),s!==n&&c.fill()},_drawPieSlice:function(e,t,i,a,r,o,s,l){var c=this._getContext(s,l);c.beginPath(),c.moveTo(t,i),c.arc(t,i,a,r,o,!1),c.lineTo(t,i),c.closePath(),s!==n&&c.stroke(),l&&c.fill(),this.targetX!==n&&this.targetY!==n&&c.isPointInPath(this.targetX,this.targetY)&&(this.currentTargetShapeId=e)},_drawRect:function(e,t,n,i,a,r,o){return this._drawShape(e,[[t,n],[t+i,n],[t+i,n+a],[t,n+a],[t,n]],r,o)},appendShape:function(e){return this.shapes[e.id]=e,this.shapeseq.push(e.id),this.lastShapeId=e.id,e.id},replaceWithShape:function(e,t){var n,i=this.shapeseq;for(this.shapes[t.id]=t,n=i.length;n--;)i[n]==e&&(i[n]=t.id);delete this.shapes[e]},replaceWithShapes:function(e,t){var n,i,a,r=this.shapeseq,o={};for(i=e.length;i--;)o[e[i]]=!0;for(i=r.length;i--;)n=r[i],o[n]&&(r.splice(i,1),delete this.shapes[n],a=i);for(i=t.length;i--;)r.splice(a,0,t[i].id),this.shapes[t[i].id]=t[i]},insertAfterShape:function(e,t){var n,i=this.shapeseq;for(n=i.length;n--;)if(i[n]===e)return i.splice(n+1,0,t.id),void(this.shapes[t.id]=t)},removeShapeId:function(e){var t,n=this.shapeseq;for(t=n.length;t--;)if(n[t]===e){n.splice(t,1);break}delete this.shapes[e]},getShapeAt:function(e,t,n){return this.targetX=t,this.targetY=n,this.render(),this.currentTargetShapeId},render:function(){var e,t,n,i=this.shapeseq,a=this.shapes,r=i.length,o=this._getContext();for(o.clearRect(0,0,this.pixelWidth,this.pixelHeight),n=0;n<r;n++)e=i[n],t=a[e],this["_draw"+t.type].apply(this,t.args);this.interact||(this.shapes={},this.shapeseq=[])}}),L=r($,{init:function(t,n,a){var r;L._super.init.call(this,t,n,a),a[0]&&(a=a[0]),i.data(a,"_jqs_vcanvas",this),this.canvas=e.createElement("span"),i(this.canvas).css({display:"inline-block",position:"relative",overflow:"hidden",width:t,height:n,margin:"0px",padding:"0px",verticalAlign:"top"}),this._insert(this.canvas,a),this._calculatePixelDims(t,n,this.canvas),this.canvas.width=this.pixelWidth,this.canvas.height=this.pixelHeight,r='<v:group coordorigin="0 0" coordsize="'+this.pixelWidth+" "+this.pixelHeight+'" style="position:absolute;top:0;left:0;width:'+this.pixelWidth+"px;height="+this.pixelHeight+'px;"></v:group>',this.canvas.insertAdjacentHTML("beforeEnd",r),this.group=i(this.canvas).children()[0],this.rendered=!1,this.prerender=""},_drawShape:function(e,t,i,a,r){var o,s,l,c,u,d,p,h=[];for(p=0,d=t.length;p<d;p++)h[p]=""+t[p][0]+","+t[p][1];return o=h.splice(0,1),r=r===n?1:r,s=i===n?' stroked="false" ':' strokeWeight="'+r+'px" strokeColor="'+i+'" ',l=a===n?' filled="false"':' fillColor="'+a+'" filled="true" ',c=h[0]===h[h.length-1]?"x ":"",u='<v:shape coordorigin="0 0" coordsize="'+this.pixelWidth+" "+this.pixelHeight+'"  id="jqsshape'+e+'" '+s+l+' style="position:absolute;left:0px;top:0px;height:'+this.pixelHeight+"px;width:"+this.pixelWidth+'px;padding:0px;margin:0px;"  path="m '+o+" l "+h.join(", ")+" "+c+'e"> </v:shape>'},_drawCircle:function(e,t,i,a,r,o,s){var l,c,u;return t-=a,i-=a,l=r===n?' stroked="false" ':' strokeWeight="'+s+'px" strokeColor="'+r+'" ',c=o===n?' filled="false"':' fillColor="'+o+'" filled="true" ',u='<v:oval  id="jqsshape'+e+'" '+l+c+' style="position:absolute;top:'+i+"px; left:"+t+"px; width:"+2*a+"px; height:"+2*a+'px"></v:oval>'},_drawPieSlice:function(e,i,a,r,o,s,l,c){var u,d,p,h,f,m,g,v;if(o===s)return"";if(s-o===2*t.PI&&(o=0,s=2*t.PI),d=i+t.round(t.cos(o)*r),p=a+t.round(t.sin(o)*r),h=i+t.round(t.cos(s)*r),f=a+t.round(t.sin(s)*r),d===h&&p===f){if(s-o<t.PI)return"";d=h=i+r,p=f=a}return d===h&&p===f&&s-o<t.PI?"":(u=[i-r,a-r,i+r,a+r,d,p,h,f],m=l===n?' stroked="false" ':' strokeWeight="1px" strokeColor="'+l+'" ',g=c===n?' filled="false"':' fillColor="'+c+'" filled="true" ',v='<v:shape coordorigin="0 0" coordsize="'+this.pixelWidth+" "+this.pixelHeight+'"  id="jqsshape'+e+'" '+m+g+' style="position:absolute;left:0px;top:0px;height:'+this.pixelHeight+"px;width:"+this.pixelWidth+'px;padding:0px;margin:0px;"  path="m '+i+","+a+" wa "+u.join(", ")+' x e"> </v:shape>')},_drawRect:function(e,t,n,i,a,r,o){return this._drawShape(e,[[t,n],[t,n+a],[t+i,n+a],[t+i,n],[t,n]],r,o)},reset:function(){this.group.innerHTML=""},appendShape:function(e){var t=this["_draw"+e.type].apply(this,e.args);return this.rendered?this.group.insertAdjacentHTML("beforeEnd",t):this.prerender+=t,this.lastShapeId=e.id,e.id},replaceWithShape:function(e,t){var n=i("#jqsshape"+e),a=this["_draw"+t.type].apply(this,t.args);n[0].outerHTML=a},replaceWithShapes:function(e,t){var n,a=i("#jqsshape"+e[0]),r="",o=t.length;for(n=0;n<o;n++)r+=this["_draw"+t[n].type].apply(this,t[n].args);for(a[0].outerHTML=r,n=1;n<e.length;n++)i("#jqsshape"+e[n]).remove()},insertAfterShape:function(e,t){var n=i("#jqsshape"+e),a=this["_draw"+t.type].apply(this,t.args);n[0].insertAdjacentHTML("afterEnd",a)},removeShapeId:function(e){var t=i("#jqsshape"+e);this.group.removeChild(t[0])},getShapeAt:function(e,t,n){var i=e.id.substr(8);return i},render:function(){this.rendered||(this.group.innerHTML=this.prerender,this.rendered=!0)}})})}(document,Math),function(){"use strict";angular.module("angular-loading-bar",["cfp.loadingBarInterceptor"]),angular.module("chieffancypants.loadingBar",["cfp.loadingBarInterceptor"]),angular.module("cfp.loadingBarInterceptor",["cfp.loadingBar"]).config(["$httpProvider",function(e){var t=["$q","$cacheFactory","$timeout","$rootScope","cfpLoadingBar",function(t,n,i,a,r){function o(){i.cancel(l),r.complete(),u=0,c=0}function s(t){var i,a=n.get("$http"),r=e.defaults;!t.cache&&!r.cache||t.cache===!1||"GET"!==t.method&&"JSONP"!==t.method||(i=angular.isObject(t.cache)?t.cache:angular.isObject(r.cache)?r.cache:a);var o=void 0!==i&&void 0!==i.get(t.url);return void 0!==t.cached&&o!==t.cached?t.cached:(t.cached=o,o)}var l,c=0,u=0,d=r.latencyThreshold;return{request:function(e){return e.ignoreLoadingBar||s(e)||(a.$broadcast("cfpLoadingBar:loading",{url:e.url}),0===c&&(l=i(function(){r.start()},d)),c++,r.set(u/c)),e},response:function(e){return e.config.ignoreLoadingBar||s(e.config)||(u++,a.$broadcast("cfpLoadingBar:loaded",{url:e.config.url}),u>=c?o():r.set(u/c)),e},responseError:function(e){return e.config.ignoreLoadingBar||s(e.config)||(u++,a.$broadcast("cfpLoadingBar:loaded",{url:e.config.url}),u>=c?o():r.set(u/c)),t.reject(e)}}}];e.interceptors.push(t)}]),angular.module("cfp.loadingBar",[]).provider("cfpLoadingBar",function(){this.includeSpinner=!0,this.includeBar=!0,this.latencyThreshold=100,this.startSize=.02,this.parentSelector="body",this.spinnerTemplate='<div id="loading-bar-spinner"><div class="spinner-icon"></div></div>',this.$get=["$injector","$document","$timeout","$rootScope",function(e,t,n,i){function a(){u||(u=e.get("$animate"));var a=t.find(h);n.cancel(p),v||(i.$broadcast("cfpLoadingBar:started"),v=!0,w&&u.enter(f,a),y&&u.enter(g,a),r(S))}function r(e){if(v){var t=100*e+"%";m.css("width",t),b=e,n.cancel(d),d=n(function(){o()},250)}}function o(){if(!(s()>=1)){var e=0,t=s();e=t>=0&&t<.25?(3*Math.random()+3)/100:t>=.25&&t<.65?3*Math.random()/100:t>=.65&&t<.9?2*Math.random()/100:t>=.9&&t<.99?.005:0;var n=s()+e;r(n)}}function s(){return b}function l(){b=0,v=!1}function c(){u||(u=e.get("$animate")),i.$broadcast("cfpLoadingBar:completed"),r(1),n.cancel(p),p=n(function(){var e=u.leave(f,l);e&&e.then&&e.then(l),u.leave(g)},500)}var u,d,p,h=this.parentSelector,f=angular.element('<div id="loading-bar"><div class="bar"><div class="peg"></div></div></div>'),m=f.find("div").eq(0),g=angular.element(this.spinnerTemplate),v=!1,b=0,y=this.includeSpinner,w=this.includeBar,S=this.startSize;return{start:a,set:r,status:s,inc:o,complete:c,includeSpinner:this.includeSpinner,latencyThreshold:this.latencyThreshold,parentSelector:this.parentSelector,startSize:this.startSize}}]})}(),function(e){function t(e,t,n){var i,a,r,o,h,f,m,g,v,b=0,y=[],w=0,S=!1,k=[],_=[],C=!1;if(n=n||{},i=n.encoding||"UTF8",v=n.numRounds||1,r=p(t,i),v!==parseInt(v,10)||1>v)throw Error("numRounds must a integer >= 1");if(0!==e.lastIndexOf("SHA-",0))throw Error("Chosen SHA variant is not supported");if(f=function(t,n){return x(t,n,e)},m=function(t,n,i,a){var r,o;if("SHA-224"!==e&&"SHA-256"!==e)throw Error("Unexpected error in SHA-2 implementation");for(r=(n+65>>>9<<4)+15,o=16;t.length<=r;)t.push(0);for(t[n>>>5]|=128<<24-n%32,n+=i,t[r]=4294967295&n,t[r-1]=n/4294967296|0,i=t.length,n=0;n<i;n+=o)a=x(t.slice(n,n+o),a,e);if("SHA-224"===e)t=[a[0],a[1],a[2],a[3],a[4],a[5],a[6]];else{if("SHA-256"!==e)throw Error("Unexpected error in SHA-2 implementation");t=a}return t},g=function(e){return e.slice()},"SHA-224"===e)h=512,o=224;else{if("SHA-256"!==e)throw Error("Chosen SHA variant is not supported");h=512,o=256}a=A(e),this.setHMACKey=function(t,n,r){var o;if(!0===S)throw Error("HMAC key already set");if(!0===C)throw Error("Cannot set HMAC key after calling update");if(i=(r||{}).encoding||"UTF8",n=p(n,i)(t),t=n.binLen,n=n.value,o=h>>>3,r=o/4-1,o<t/8){for(n=m(n,t,0,A(e));n.length<=r;)n.push(0);n[r]&=4294967040}else if(o>t/8){for(;n.length<=r;)n.push(0);n[r]&=4294967040}for(t=0;t<=r;t+=1)k[t]=909522486^n[t],_[t]=1549556828^n[t];a=f(k,a),b=h,S=!0},this.update=function(e){var t,n,i,o=0,s=h>>>5;for(t=r(e,y,w),e=t.binLen,n=t.value,t=e>>>5,i=0;i<t;i+=s)o+h<=e&&(a=f(n.slice(i,i+s),a),o+=h);b+=o,y=n.slice(o>>>5),w=e%h,C=!0},this.getHash=function(t,n){var i,r,p,h;if(!0===S)throw Error("Cannot call getHash after setting HMAC key");switch(p=d(n),t){case"HEX":i=function(e){return s(e,o,p)};break;case"B64":i=function(e){return l(e,o,p)};break;case"BYTES":i=function(e){return c(e,o)};break;case"ARRAYBUFFER":try{r=new ArrayBuffer(0)}catch(e){throw Error("ARRAYBUFFER not supported by this environment")}i=function(e){return u(e,o)};break;default:throw Error("format must be HEX, B64, BYTES, or ARRAYBUFFER")}for(h=m(y.slice(),w,b,g(a)),r=1;r<v;r+=1)h=m(h,o,0,A(e));return i(h)},this.getHMAC=function(t,n){var i,r,p,v;if(!1===S)throw Error("Cannot call getHMAC without first setting HMAC key");switch(p=d(n),t){case"HEX":i=function(e){return s(e,o,p)};break;case"B64":i=function(e){return l(e,o,p)};break;case"BYTES":i=function(e){return c(e,o)};break;case"ARRAYBUFFER":try{i=new ArrayBuffer(0)}catch(e){throw Error("ARRAYBUFFER not supported by this environment")}i=function(e){return u(e,o)};break;default:throw Error("outputFormat must be HEX, B64, BYTES, or ARRAYBUFFER")}return r=m(y.slice(),w,b,g(a)),v=f(_,A(e)),v=m(r,o,h,v),i(v)}}function n(){}function i(e,t,n){var i,a,r,o,s,l=e.length;if(t=t||[0],n=n||0,s=n>>>3,0!==l%2)throw Error("String of HEX type must be in byte increments");for(i=0;i<l;i+=2){if(a=parseInt(e.substr(i,2),16),isNaN(a))throw Error("String of HEX type contains invalid characters");for(o=(i>>>1)+s,r=o>>>2;t.length<=r;)t.push(0);t[r]|=a<<8*(3-o%4)}return{value:t,binLen:4*l+n}}function a(e,t,n){var i,a,r,o,s=[],s=t||[0];for(n=n||0,a=n>>>3,i=0;i<e.length;i+=1)t=e.charCodeAt(i),o=i+a,r=o>>>2,s.length<=r&&s.push(0),s[r]|=t<<8*(3-o%4);return{value:s,binLen:8*e.length+n}}function r(e,t,n){var i,a,r,o,s,l,c=[],u=0,c=t||[0];if(n=n||0,t=n>>>3,-1===e.search(/^[a-zA-Z0-9=+\/]+$/))throw Error("Invalid character in base-64 string");if(a=e.indexOf("="),e=e.replace(/\=/g,""),-1!==a&&a<e.length)throw Error("Invalid '=' found in base-64 string");for(a=0;a<e.length;a+=4){for(s=e.substr(a,4),r=o=0;r<s.length;r+=1)i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(s[r]),o|=i<<18-6*r;for(r=0;r<s.length-1;r+=1){for(l=u+t,i=l>>>2;c.length<=i;)c.push(0);c[i]|=(o>>>16-8*r&255)<<8*(3-l%4),u+=1}}return{value:c,binLen:8*u+n}}function o(e,t,n){var i,a,r,o=[],o=t||[0];for(n=n||0,i=n>>>3,t=0;t<e.byteLength;t+=1)r=t+i,a=r>>>2,o.length<=a&&o.push(0),o[a]|=e[t]<<8*(3-r%4);return{value:o,binLen:8*e.byteLength+n}}function s(e,t,n){var i="";t/=8;var a,r;for(a=0;a<t;a+=1)r=e[a>>>2]>>>8*(3-a%4),i+="0123456789abcdef".charAt(r>>>4&15)+"0123456789abcdef".charAt(15&r);return n.outputUpper?i.toUpperCase():i}function l(e,t,n){var i,a,r,o="",s=t/8;for(i=0;i<s;i+=3)for(a=i+1<s?e[i+1>>>2]:0,r=i+2<s?e[i+2>>>2]:0,r=(e[i>>>2]>>>8*(3-i%4)&255)<<16|(a>>>8*(3-(i+1)%4)&255)<<8|r>>>8*(3-(i+2)%4)&255,a=0;4>a;a+=1)o+=8*i+6*a<=t?"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(r>>>6*(3-a)&63):n.b64Pad;return o}function c(e,t){var n,i,a="",r=t/8;for(n=0;n<r;n+=1)i=e[n>>>2]>>>8*(3-n%4)&255,a+=String.fromCharCode(i);return a}function u(e,t){var n,i=t/8,a=new ArrayBuffer(i);for(n=0;n<i;n+=1)a[n]=e[n>>>2]>>>8*(3-n%4)&255;return a}function d(e){var t={outputUpper:!1,b64Pad:"=",shakeLen:-1};if(e=e||{},t.outputUpper=e.outputUpper||!1,!0===e.hasOwnProperty("b64Pad")&&(t.b64Pad=e.b64Pad),"boolean"!=typeof t.outputUpper)throw Error("Invalid outputUpper formatting option");if("string"!=typeof t.b64Pad)throw Error("Invalid b64Pad formatting option");return t}function p(e,t){var n;switch(t){case"UTF8":case"UTF16BE":case"UTF16LE":break;default:throw Error("encoding must be UTF8, UTF16BE, or UTF16LE")}switch(e){case"HEX":n=i;break;case"TEXT":n=function(e,n,i){var a,r,o,s,l,c=[],u=[],d=0,c=n||[0];if(n=i||0,o=n>>>3,"UTF8"===t)for(a=0;a<e.length;a+=1)for(i=e.charCodeAt(a),u=[],128>i?u.push(i):2048>i?(u.push(192|i>>>6),u.push(128|63&i)):55296>i||57344<=i?u.push(224|i>>>12,128|i>>>6&63,128|63&i):(a+=1,i=65536+((1023&i)<<10|1023&e.charCodeAt(a)),u.push(240|i>>>18,128|i>>>12&63,128|i>>>6&63,128|63&i)),r=0;r<u.length;r+=1){for(l=d+o,s=l>>>2;c.length<=s;)c.push(0);c[s]|=u[r]<<8*(3-l%4),d+=1}else if("UTF16BE"===t||"UTF16LE"===t)for(a=0;a<e.length;a+=1){for(i=e.charCodeAt(a),"UTF16LE"===t&&(r=255&i,i=r<<8|i>>>8),l=d+o,s=l>>>2;c.length<=s;)c.push(0);c[s]|=i<<8*(2-l%4),d+=2}return{value:c,binLen:8*d+n}};break;case"B64":n=r;break;case"BYTES":n=a;break;case"ARRAYBUFFER":try{n=new ArrayBuffer(0)}catch(e){throw Error("ARRAYBUFFER not supported by this environment")}n=o;break;default:throw Error("format must be HEX, TEXT, B64, BYTES, or ARRAYBUFFER")}return n}function h(e,t){return e>>>t|e<<32-t}function f(e,t,n){return e&t^~e&n}function m(e,t,n){return e&t^e&n^t&n}function g(e){return h(e,2)^h(e,13)^h(e,22)}function v(e){return h(e,6)^h(e,11)^h(e,25)}function b(e){return h(e,7)^h(e,18)^e>>>3}function y(e){return h(e,17)^h(e,19)^e>>>10}function w(e,t){var n=(65535&e)+(65535&t);return((e>>>16)+(t>>>16)+(n>>>16)&65535)<<16|65535&n}function S(e,t,n,i){var a=(65535&e)+(65535&t)+(65535&n)+(65535&i);return((e>>>16)+(t>>>16)+(n>>>16)+(i>>>16)+(a>>>16)&65535)<<16|65535&a}function k(e,t,n,i,a){var r=(65535&e)+(65535&t)+(65535&n)+(65535&i)+(65535&a);return((e>>>16)+(t>>>16)+(n>>>16)+(i>>>16)+(a>>>16)+(r>>>16)&65535)<<16|65535&r}function A(e){var t,i=[];if(0!==e.lastIndexOf("SHA-",0))throw Error("No SHA variants supported");switch(i=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428],t=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],e){case"SHA-224":break;case"SHA-256":i=t;break;case"SHA-384":i=[new n,new n,new n,new n,new n,new n,new n,new n];break;case"SHA-512":i=[new n,new n,new n,new n,new n,new n,new n,new n];break;default:throw Error("Unknown SHA variant")}return i}function x(e,t,n){var i,a,r,o,s,l,c,u,d,p,h,A,x,C,T,M,E,P,D,$,I,L,F,O=[];if("SHA-224"!==n&&"SHA-256"!==n)throw Error("Unexpected error in SHA-2 implementation");for(p=64,A=1,L=Number,x=w,C=S,T=k,M=b,E=y,P=g,D=v,I=m,$=f,F=_,n=t[0],i=t[1],a=t[2],r=t[3],o=t[4],s=t[5],l=t[6],c=t[7],h=0;h<p;h+=1)16>h?(d=h*A,u=e.length<=d?0:e[d],d=e.length<=d+1?0:e[d+1],O[h]=new L(u,d)):O[h]=C(E(O[h-2]),O[h-7],M(O[h-15]),O[h-16]),u=T(c,D(o),$(o,s,l),F[h],O[h]),d=x(P(n),I(n,i,a)),c=l,l=s,s=o,o=x(r,u),r=a,a=i,i=n,n=x(u,d);return t[0]=x(n,t[0]),t[1]=x(i,t[1]),t[2]=x(a,t[2]),t[3]=x(r,t[3]),t[4]=x(o,t[4]),t[5]=x(s,t[5]),t[6]=x(l,t[6]),t[7]=x(c,t[7]),t}var _;_=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],"function"==typeof define&&define.amd?define(function(){return t}):"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(module.exports=t),exports=t):e.jsSHA=t}(this),function(e){"use strict";angular.module("tmh.dynamicLocale",[]).provider("tmhDynamicLocale",function(){function e(e,t,n,i){var a=document.createElement("script"),r=document.getElementsByTagName("body")[0],o=!1;a.type="text/javascript",a.readyState?a.onreadystatechange=function(){"complete"!==a.readyState&&"loaded"!==a.readyState||(a.onreadystatechange=null,i(function(){o||(o=!0,r.removeChild(a),t())},30,!1))}:(a.onload=function(){o||(o=!0,r.removeChild(a),t())},a.onerror=function(){o||(o=!0,r.removeChild(a),n())}),a.src=e,a.async=!1,r.appendChild(a)}function t(t,n,r,o,c,u,d){function p(e,t){a===r&&(angular.forEach(e,function(n,i){t[i]?angular.isArray(t[i])&&(e[i].length=t[i].length):delete e[i]}),angular.forEach(t,function(n,i){angular.isArray(t[i])||angular.isObject(t[i])?(e[i]||(e[i]=angular.isArray(t[i])?[]:{}),p(e[i],t[i])):e[i]=t[i]}))}if(l[r])return l[r];var h,f=c.defer();return r===a?f.resolve(n):(h=u.get(r))?(a=r,o.$evalAsync(function(){p(n,h),o.$broadcast("$localeChangeSuccess",r,n),i.put(s,r),f.resolve(n)})):(a=r,l[r]=f.promise,e(t,function(){var e=angular.injector(["ngLocale"]),t=e.get("$locale");p(n,t),u.put(r,t),delete l[r],o.$apply(function(){o.$broadcast("$localeChangeSuccess",r,n),i.put(s,r),f.resolve(n)})},function(){delete l[r],o.$apply(function(){o.$broadcast("$localeChangeError",r),f.reject(r)})},d)),f.promise}var n,i,a,r="angular/i18n/angular-locale_{{locale}}.js",o="tmhDynamicLocaleStorageCache",s="tmhDynamicLocale.locale",l={};this.localeLocationPattern=function(e){return e?(r=e,this):r},this.useStorage=function(e){o=e},this.useCookieStorage=function(){this.useStorage("$cookieStore")},this.defaultLocale=function(e){n=e},this.$get=["$rootScope","$injector","$interpolate","$locale","$q","tmhDynamicLocaleCache","$timeout",function(e,a,l,c,u,d,p){var h=l(r);return i=a.get(o),e.$evalAsync(function(){var a;(a=i.get(s)||n)&&t(h({locale:a}),c,a,e,u,d,p)}),{set:function(n){return t(h({locale:n}),c,n,e,u,d,p)}}}]}).provider("tmhDynamicLocaleCache",function(){this.$get=["$cacheFactory",function(e){return e("tmh.dynamicLocales")}]}).provider("tmhDynamicLocaleStorageCache",function(){this.$get=["$cacheFactory",function(e){return e("tmh.dynamicLocales.store")}]}).run(["tmhDynamicLocale",angular.noop])}(window),angular.module("ui.bootstrap",["ui.bootstrap.tpls","ui.bootstrap.datepicker","ui.bootstrap.dateparser","ui.bootstrap.isClass","ui.bootstrap.datepickerPopup","ui.bootstrap.position","ui.bootstrap.dropdown","ui.bootstrap.multiMap","ui.bootstrap.modal","ui.bootstrap.stackedMap","ui.bootstrap.typeahead","ui.bootstrap.debounce","ui.bootstrap.tabs"]),angular.module("ui.bootstrap.tpls",["uib/template/datepicker/datepicker.html","uib/template/datepicker/day.html","uib/template/datepicker/month.html","uib/template/datepicker/year.html","uib/template/datepickerPopup/popup.html","uib/template/modal/window.html","uib/template/typeahead/typeahead-match.html","uib/template/typeahead/typeahead-popup.html","uib/template/tabs/tab.html","uib/template/tabs/tabset.html"]),angular.module("ui.bootstrap.datepicker",["ui.bootstrap.dateparser","ui.bootstrap.isClass"]).value("$datepickerSuppressError",!1).value("$datepickerLiteralWarning",!0).constant("uibDatepickerConfig",{datepickerMode:"day",formatDay:"dd",formatMonth:"MMMM",formatYear:"yyyy",formatDayHeader:"EEE",formatDayTitle:"MMMM yyyy",formatMonthTitle:"yyyy",maxDate:null,maxMode:"year",minDate:null,minMode:"day",monthColumns:3,ngModelOptions:{},shortcutPropagation:!1,showWeeks:!0,yearColumns:5,yearRows:4}).controller("UibDatepickerController",["$scope","$element","$attrs","$parse","$interpolate","$locale","$log","dateFilter","uibDatepickerConfig","$datepickerLiteralWarning","$datepickerSuppressError","uibDateParser",function(e,t,n,i,a,r,o,s,l,c,u,d){function p(t){e.datepickerMode=t,e.datepickerOptions.datepickerMode=t}function h(t){var n;if(angular.version.minor<6)n=t.$options||e.datepickerOptions.ngModelOptions||l.ngModelOptions||{},n.getOption=function(e){return n[e]};else{var i=t.$options.getOption("timezone")||(e.datepickerOptions.ngModelOptions?e.datepickerOptions.ngModelOptions.timezone:null)||(l.ngModelOptions?l.ngModelOptions.timezone:null);n=t.$options.createChild(l.ngModelOptions).createChild(e.datepickerOptions.ngModelOptions).createChild(t.$options).createChild({timezone:i})}return n}var f=this,m={$setViewValue:angular.noop},g={},v=[];t.addClass("uib-datepicker"),n.$set("role","application"),e.datepickerOptions||(e.datepickerOptions={}),this.modes=["day","month","year"],["customClass","dateDisabled","datepickerMode","formatDay","formatDayHeader","formatDayTitle","formatMonth","formatMonthTitle","formatYear","maxDate","maxMode","minDate","minMode","monthColumns","showWeeks","shortcutPropagation","startingDay","yearColumns","yearRows"].forEach(function(t){switch(t){case"customClass":case"dateDisabled":e[t]=e.datepickerOptions[t]||angular.noop;break;case"datepickerMode":e.datepickerMode=angular.isDefined(e.datepickerOptions.datepickerMode)?e.datepickerOptions.datepickerMode:l.datepickerMode;break;case"formatDay":case"formatDayHeader":case"formatDayTitle":case"formatMonth":case"formatMonthTitle":case"formatYear":f[t]=angular.isDefined(e.datepickerOptions[t])?a(e.datepickerOptions[t])(e.$parent):l[t];break;case"monthColumns":case"showWeeks":case"shortcutPropagation":case"yearColumns":case"yearRows":f[t]=angular.isDefined(e.datepickerOptions[t])?e.datepickerOptions[t]:l[t];break;case"startingDay":f.startingDay=angular.isDefined(e.datepickerOptions.startingDay)?e.datepickerOptions.startingDay:angular.isNumber(l.startingDay)?l.startingDay:(r.DATETIME_FORMATS.FIRSTDAYOFWEEK+8)%7;break;case"maxDate":case"minDate":e.$watch("datepickerOptions."+t,function(e){
e?angular.isDate(e)?f[t]=d.fromTimezone(new Date(e),g.getOption("timezone")):(c&&o.warn("Literal date support has been deprecated, please switch to date object usage"),f[t]=new Date(s(e,"medium"))):f[t]=l[t]?d.fromTimezone(new Date(l[t]),g.getOption("timezone")):null,f.refreshView()});break;case"maxMode":case"minMode":e.datepickerOptions[t]?e.$watch(function(){return e.datepickerOptions[t]},function(n){f[t]=e[t]=angular.isDefined(n)?n:e.datepickerOptions[t],("minMode"===t&&f.modes.indexOf(e.datepickerOptions.datepickerMode)<f.modes.indexOf(f[t])||"maxMode"===t&&f.modes.indexOf(e.datepickerOptions.datepickerMode)>f.modes.indexOf(f[t]))&&(e.datepickerMode=f[t],e.datepickerOptions.datepickerMode=f[t])}):f[t]=e[t]=l[t]||null}}),e.uniqueId="datepicker-"+e.$id+"-"+Math.floor(1e4*Math.random()),e.disabled=angular.isDefined(n.disabled)||!1,angular.isDefined(n.ngDisabled)&&v.push(e.$parent.$watch(n.ngDisabled,function(t){e.disabled=t,f.refreshView()})),e.isActive=function(t){return 0===f.compare(t.date,f.activeDate)&&(e.activeDateId=t.uid,!0)},this.init=function(t){m=t,g=h(m),e.datepickerOptions.initDate?(f.activeDate=d.fromTimezone(e.datepickerOptions.initDate,g.getOption("timezone"))||new Date,e.$watch("datepickerOptions.initDate",function(e){e&&(m.$isEmpty(m.$modelValue)||m.$invalid)&&(f.activeDate=d.fromTimezone(e,g.getOption("timezone")),f.refreshView())})):f.activeDate=new Date;var n=m.$modelValue?new Date(m.$modelValue):new Date;this.activeDate=isNaN(n)?d.fromTimezone(new Date,g.getOption("timezone")):d.fromTimezone(n,g.getOption("timezone")),m.$render=function(){f.render()}},this.render=function(){if(m.$viewValue){var e=new Date(m.$viewValue),t=!isNaN(e);t?this.activeDate=d.fromTimezone(e,g.getOption("timezone")):u||o.error('Datepicker directive: "ng-model" value must be a Date object')}this.refreshView()},this.refreshView=function(){if(this.element){e.selectedDt=null,this._refreshView(),e.activeDt&&(e.activeDateId=e.activeDt.uid);var t=m.$viewValue?new Date(m.$viewValue):null;t=d.fromTimezone(t,g.getOption("timezone")),m.$setValidity("dateDisabled",!t||this.element&&!this.isDisabled(t))}},this.createDateObject=function(t,n){var i=m.$viewValue?new Date(m.$viewValue):null;i=d.fromTimezone(i,g.getOption("timezone"));var a=new Date;a=d.fromTimezone(a,g.getOption("timezone"));var r=this.compare(t,a),o={date:t,label:d.filter(t,n),selected:i&&0===this.compare(t,i),disabled:this.isDisabled(t),past:0>r,current:0===r,future:r>0,customClass:this.customClass(t)||null};return i&&0===this.compare(t,i)&&(e.selectedDt=o),f.activeDate&&0===this.compare(o.date,f.activeDate)&&(e.activeDt=o),o},this.isDisabled=function(t){return e.disabled||this.minDate&&this.compare(t,this.minDate)<0||this.maxDate&&this.compare(t,this.maxDate)>0||e.dateDisabled&&e.dateDisabled({date:t,mode:e.datepickerMode})},this.customClass=function(t){return e.customClass({date:t,mode:e.datepickerMode})},this.split=function(e,t){for(var n=[];e.length>0;)n.push(e.splice(0,t));return n},e.select=function(t){if(e.datepickerMode===f.minMode){var n=m.$viewValue?d.fromTimezone(new Date(m.$viewValue),g.getOption("timezone")):new Date(0,0,0,0,0,0,0);n.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),n=d.toTimezone(n,g.getOption("timezone")),m.$setViewValue(n),m.$render()}else f.activeDate=t,p(f.modes[f.modes.indexOf(e.datepickerMode)-1]),e.$emit("uib:datepicker.mode");e.$broadcast("uib:datepicker.focus")},e.move=function(e){var t=f.activeDate.getFullYear()+e*(f.step.years||0),n=f.activeDate.getMonth()+e*(f.step.months||0);f.activeDate.setFullYear(t,n,1),f.refreshView()},e.toggleMode=function(t){t=t||1,e.datepickerMode===f.maxMode&&1===t||e.datepickerMode===f.minMode&&-1===t||(p(f.modes[f.modes.indexOf(e.datepickerMode)+t]),e.$emit("uib:datepicker.mode"))},e.keys={13:"enter",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down"};var b=function(){f.element[0].focus()};e.$on("uib:datepicker.focus",b),e.keydown=function(t){var n=e.keys[t.which];if(n&&!t.shiftKey&&!t.altKey&&!e.disabled)if(t.preventDefault(),f.shortcutPropagation||t.stopPropagation(),"enter"===n||"space"===n){if(f.isDisabled(f.activeDate))return;e.select(f.activeDate)}else!t.ctrlKey||"up"!==n&&"down"!==n?(f.handleKeyDown(n,t),f.refreshView()):e.toggleMode("up"===n?1:-1)},t.on("keydown",function(t){e.$apply(function(){e.keydown(t)})}),e.$on("$destroy",function(){for(;v.length;)v.shift()()})}]).controller("UibDaypickerController",["$scope","$element","dateFilter",function(e,t,n){function i(e,t){return 1!==t||e%4!==0||e%100===0&&e%400!==0?r[t]:29}function a(e){var t=new Date(e);t.setDate(t.getDate()+4-(t.getDay()||7));var n=t.getTime();return t.setMonth(0),t.setDate(1),Math.floor(Math.round((n-t)/864e5)/7)+1}var r=[31,28,31,30,31,30,31,31,30,31,30,31];this.step={months:1},this.element=t,this.init=function(t){angular.extend(t,this),e.showWeeks=t.showWeeks,t.refreshView()},this.getDates=function(e,t){for(var n,i=new Array(t),a=new Date(e),r=0;t>r;)n=new Date(a),i[r++]=n,a.setDate(a.getDate()+1);return i},this._refreshView=function(){var t=this.activeDate.getFullYear(),i=this.activeDate.getMonth(),r=new Date(this.activeDate);r.setFullYear(t,i,1);var o=this.startingDay-r.getDay(),s=o>0?7-o:-o,l=new Date(r);s>0&&l.setDate(-s+1);for(var c=this.getDates(l,42),u=0;42>u;u++)c[u]=angular.extend(this.createDateObject(c[u],this.formatDay),{secondary:c[u].getMonth()!==i,uid:e.uniqueId+"-"+u});e.labels=new Array(7);for(var d=0;7>d;d++)e.labels[d]={abbr:n(c[d].date,this.formatDayHeader),full:n(c[d].date,"EEEE")};if(e.title=n(this.activeDate,this.formatDayTitle),e.rows=this.split(c,7),e.showWeeks){e.weekNumbers=[];for(var p=(11-this.startingDay)%7,h=e.rows.length,f=0;h>f;f++)e.weekNumbers.push(a(e.rows[f][p].date))}},this.compare=function(e,t){var n=new Date(e.getFullYear(),e.getMonth(),e.getDate()),i=new Date(t.getFullYear(),t.getMonth(),t.getDate());return n.setFullYear(e.getFullYear()),i.setFullYear(t.getFullYear()),n-i},this.handleKeyDown=function(e){var t=this.activeDate.getDate();if("left"===e)t-=1;else if("up"===e)t-=7;else if("right"===e)t+=1;else if("down"===e)t+=7;else if("pageup"===e||"pagedown"===e){var n=this.activeDate.getMonth()+("pageup"===e?-1:1);this.activeDate.setMonth(n,1),t=Math.min(i(this.activeDate.getFullYear(),this.activeDate.getMonth()),t)}else"home"===e?t=1:"end"===e&&(t=i(this.activeDate.getFullYear(),this.activeDate.getMonth()));this.activeDate.setDate(t)}}]).controller("UibMonthpickerController",["$scope","$element","dateFilter",function(e,t,n){this.step={years:1},this.element=t,this.init=function(e){angular.extend(e,this),e.refreshView()},this._refreshView=function(){for(var t,i=new Array(12),a=this.activeDate.getFullYear(),r=0;12>r;r++)t=new Date(this.activeDate),t.setFullYear(a,r,1),i[r]=angular.extend(this.createDateObject(t,this.formatMonth),{uid:e.uniqueId+"-"+r});e.title=n(this.activeDate,this.formatMonthTitle),e.rows=this.split(i,this.monthColumns),e.yearHeaderColspan=this.monthColumns>3?this.monthColumns-2:1},this.compare=function(e,t){var n=new Date(e.getFullYear(),e.getMonth()),i=new Date(t.getFullYear(),t.getMonth());return n.setFullYear(e.getFullYear()),i.setFullYear(t.getFullYear()),n-i},this.handleKeyDown=function(e){var t=this.activeDate.getMonth();if("left"===e)t-=1;else if("up"===e)t-=this.monthColumns;else if("right"===e)t+=1;else if("down"===e)t+=this.monthColumns;else if("pageup"===e||"pagedown"===e){var n=this.activeDate.getFullYear()+("pageup"===e?-1:1);this.activeDate.setFullYear(n)}else"home"===e?t=0:"end"===e&&(t=11);this.activeDate.setMonth(t)}}]).controller("UibYearpickerController",["$scope","$element","dateFilter",function(e,t){function n(e){return parseInt((e-1)/a,10)*a+1}var i,a;this.element=t,this.yearpickerInit=function(){i=this.yearColumns,a=this.yearRows*i,this.step={years:a}},this._refreshView=function(){for(var t,r=new Array(a),o=0,s=n(this.activeDate.getFullYear());a>o;o++)t=new Date(this.activeDate),t.setFullYear(s+o,0,1),r[o]=angular.extend(this.createDateObject(t,this.formatYear),{uid:e.uniqueId+"-"+o});e.title=[r[0].label,r[a-1].label].join(" - "),e.rows=this.split(r,i),e.columns=i},this.compare=function(e,t){return e.getFullYear()-t.getFullYear()},this.handleKeyDown=function(e){var t=this.activeDate.getFullYear();"left"===e?t-=1:"up"===e?t-=i:"right"===e?t+=1:"down"===e?t+=i:"pageup"===e||"pagedown"===e?t+=("pageup"===e?-1:1)*a:"home"===e?t=n(this.activeDate.getFullYear()):"end"===e&&(t=n(this.activeDate.getFullYear())+a-1),this.activeDate.setFullYear(t)}}]).directive("uibDatepicker",function(){return{templateUrl:function(e,t){return t.templateUrl||"uib/template/datepicker/datepicker.html"},scope:{datepickerOptions:"=?"},require:["uibDatepicker","^ngModel"],restrict:"A",controller:"UibDatepickerController",controllerAs:"datepicker",link:function(e,t,n,i){var a=i[0],r=i[1];a.init(r)}}}).directive("uibDaypicker",function(){return{templateUrl:function(e,t){return t.templateUrl||"uib/template/datepicker/day.html"},require:["^uibDatepicker","uibDaypicker"],restrict:"A",controller:"UibDaypickerController",link:function(e,t,n,i){var a=i[0],r=i[1];r.init(a)}}}).directive("uibMonthpicker",function(){return{templateUrl:function(e,t){return t.templateUrl||"uib/template/datepicker/month.html"},require:["^uibDatepicker","uibMonthpicker"],restrict:"A",controller:"UibMonthpickerController",link:function(e,t,n,i){var a=i[0],r=i[1];r.init(a)}}}).directive("uibYearpicker",function(){return{templateUrl:function(e,t){return t.templateUrl||"uib/template/datepicker/year.html"},require:["^uibDatepicker","uibYearpicker"],restrict:"A",controller:"UibYearpickerController",link:function(e,t,n,i){var a=i[0];angular.extend(a,i[1]),a.yearpickerInit(),a.refreshView()}}}),angular.module("ui.bootstrap.dateparser",[]).service("uibDateParser",["$log","$locale","dateFilter","orderByFilter","filterFilter",function(e,t,n,i,a){function r(e){return a(b,{key:e},!0)[0]}function o(e){var t=[],n=e.split(""),a=e.indexOf("'");if(a>-1){var r=!1;e=e.split("");for(var o=a;o<e.length;o++)r?("'"===e[o]&&(o+1<e.length&&"'"===e[o+1]?(e[o+1]="$",n[o+1]=""):(n[o]="",r=!1)),e[o]="$"):"'"===e[o]&&(e[o]="$",n[o]="",r=!0);e=e.join("")}return angular.forEach(b,function(i){var a=e.indexOf(i.key);if(a>-1){e=e.split(""),n[a]="("+i.regex+")",e[a]="$";for(var r=a+1,o=a+i.key.length;o>r;r++)n[r]="",e[r]="$";e=e.join(""),t.push({index:a,key:i.key,apply:i.apply,matcher:i.regex})}}),{regex:new RegExp("^"+n.join("")+"$"),map:i(t,"index")}}function s(e){for(var t,n,i=[],a=0;a<e.length;)if(angular.isNumber(n)){if("'"===e.charAt(a))(a+1>=e.length||"'"!==e.charAt(a+1))&&(i.push(l(e,n,a)),n=null);else if(a===e.length)for(;n<e.length;)t=c(e,n),i.push(t),n=t.endIdx;a++}else"'"!==e.charAt(a)?(t=c(e,a),i.push(t.parser),a=t.endIdx):(n=a,a++);return i}function l(e,t,n){return function(){return e.substr(t+1,n-t-1)}}function c(e,t){for(var n=e.substr(t),i=0;i<b.length;i++)if(new RegExp("^"+b[i].key).test(n)){var a=b[i];return{endIdx:t+a.key.length,parser:a.formatter}}return{endIdx:t+1,parser:function(){return n.charAt(0)}}}function u(e,t,n){return!(1>n)&&(1===t&&n>28?29===n&&(e%4===0&&e%100!==0||e%400===0):3!==t&&5!==t&&8!==t&&10!==t||31>n)}function d(e){return parseInt(e,10)}function p(e,t){return e&&t?g(e,t):e}function h(e,t){return e&&t?g(e,t,!0):e}function f(e,t){e=e.replace(/:/g,"");var n=Date.parse("Jan 01, 1970 00:00:00 "+e)/6e4;return isNaN(n)?t:n}function m(e,t){return e=new Date(e.getTime()),e.setMinutes(e.getMinutes()+t),e}function g(e,t,n){n=n?-1:1;var i=e.getTimezoneOffset(),a=f(t,i);return m(e,n*(a-i))}var v,b,y=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g;this.init=function(){v=t.id,this.parsers={},this.formatters={},b=[{key:"yyyy",regex:"\\d{4}",apply:function(e){this.year=+e},formatter:function(e){var t=new Date;return t.setFullYear(Math.abs(e.getFullYear())),n(t,"yyyy")}},{key:"yy",regex:"\\d{2}",apply:function(e){e=+e,this.year=69>e?e+2e3:e+1900},formatter:function(e){var t=new Date;return t.setFullYear(Math.abs(e.getFullYear())),n(t,"yy")}},{key:"y",regex:"\\d{1,4}",apply:function(e){this.year=+e},formatter:function(e){var t=new Date;return t.setFullYear(Math.abs(e.getFullYear())),n(t,"y")}},{key:"M!",regex:"0?[1-9]|1[0-2]",apply:function(e){this.month=e-1},formatter:function(e){var t=e.getMonth();return/^[0-9]$/.test(t)?n(e,"MM"):n(e,"M")}},{key:"MMMM",regex:t.DATETIME_FORMATS.MONTH.join("|"),apply:function(e){this.month=t.DATETIME_FORMATS.MONTH.indexOf(e)},formatter:function(e){return n(e,"MMMM")}},{key:"MMM",regex:t.DATETIME_FORMATS.SHORTMONTH.join("|"),apply:function(e){this.month=t.DATETIME_FORMATS.SHORTMONTH.indexOf(e)},formatter:function(e){return n(e,"MMM")}},{key:"MM",regex:"0[1-9]|1[0-2]",apply:function(e){this.month=e-1},formatter:function(e){return n(e,"MM")}},{key:"M",regex:"[1-9]|1[0-2]",apply:function(e){this.month=e-1},formatter:function(e){return n(e,"M")}},{key:"d!",regex:"[0-2]?[0-9]{1}|3[0-1]{1}",apply:function(e){this.date=+e},formatter:function(e){var t=e.getDate();return/^[1-9]$/.test(t)?n(e,"dd"):n(e,"d")}},{key:"dd",regex:"[0-2][0-9]{1}|3[0-1]{1}",apply:function(e){this.date=+e},formatter:function(e){return n(e,"dd")}},{key:"d",regex:"[1-2]?[0-9]{1}|3[0-1]{1}",apply:function(e){this.date=+e},formatter:function(e){return n(e,"d")}},{key:"EEEE",regex:t.DATETIME_FORMATS.DAY.join("|"),formatter:function(e){return n(e,"EEEE")}},{key:"EEE",regex:t.DATETIME_FORMATS.SHORTDAY.join("|"),formatter:function(e){return n(e,"EEE")}},{key:"HH",regex:"(?:0|1)[0-9]|2[0-3]",apply:function(e){this.hours=+e},formatter:function(e){return n(e,"HH")}},{key:"hh",regex:"0[0-9]|1[0-2]",apply:function(e){this.hours=+e},formatter:function(e){return n(e,"hh")}},{key:"H",regex:"1?[0-9]|2[0-3]",apply:function(e){this.hours=+e},formatter:function(e){return n(e,"H")}},{key:"h",regex:"[0-9]|1[0-2]",apply:function(e){this.hours=+e},formatter:function(e){return n(e,"h")}},{key:"mm",regex:"[0-5][0-9]",apply:function(e){this.minutes=+e},formatter:function(e){return n(e,"mm")}},{key:"m",regex:"[0-9]|[1-5][0-9]",apply:function(e){this.minutes=+e},formatter:function(e){return n(e,"m")}},{key:"sss",regex:"[0-9][0-9][0-9]",apply:function(e){this.milliseconds=+e},formatter:function(e){return n(e,"sss")}},{key:"ss",regex:"[0-5][0-9]",apply:function(e){this.seconds=+e},formatter:function(e){return n(e,"ss")}},{key:"s",regex:"[0-9]|[1-5][0-9]",apply:function(e){this.seconds=+e},formatter:function(e){return n(e,"s")}},{key:"a",regex:t.DATETIME_FORMATS.AMPMS.join("|"),apply:function(e){12===this.hours&&(this.hours=0),"PM"===e&&(this.hours+=12)},formatter:function(e){return n(e,"a")}},{key:"Z",regex:"[+-]\\d{4}",apply:function(e){var t=e.match(/([+-])(\d{2})(\d{2})/),n=t[1],i=t[2],a=t[3];this.hours+=d(n+i),this.minutes+=d(n+a)},formatter:function(e){return n(e,"Z")}},{key:"ww",regex:"[0-4][0-9]|5[0-3]",formatter:function(e){return n(e,"ww")}},{key:"w",regex:"[0-9]|[1-4][0-9]|5[0-3]",formatter:function(e){return n(e,"w")}},{key:"GGGG",regex:t.DATETIME_FORMATS.ERANAMES.join("|").replace(/\s/g,"\\s"),formatter:function(e){return n(e,"GGGG")}},{key:"GGG",regex:t.DATETIME_FORMATS.ERAS.join("|"),formatter:function(e){return n(e,"GGG")}},{key:"GG",regex:t.DATETIME_FORMATS.ERAS.join("|"),formatter:function(e){return n(e,"GG")}},{key:"G",regex:t.DATETIME_FORMATS.ERAS.join("|"),formatter:function(e){return n(e,"G")}}],angular.version.major>=1&&angular.version.minor>4&&b.push({key:"LLLL",regex:t.DATETIME_FORMATS.STANDALONEMONTH.join("|"),apply:function(e){this.month=t.DATETIME_FORMATS.STANDALONEMONTH.indexOf(e)},formatter:function(e){return n(e,"LLLL")}})},this.init(),this.getParser=function(e){var t=r(e);return t&&t.apply||null},this.overrideParser=function(e,t){var n=r(e);n&&angular.isFunction(t)&&(this.parsers={},n.apply=t)}.bind(this),this.filter=function(e,n){if(!angular.isDate(e)||isNaN(e)||!n)return"";n=t.DATETIME_FORMATS[n]||n,t.id!==v&&this.init(),this.formatters[n]||(this.formatters[n]=s(n));var i=this.formatters[n];return i.reduce(function(t,n){return t+n(e)},"")},this.parse=function(n,i,a){if(!angular.isString(n)||!i)return n;i=t.DATETIME_FORMATS[i]||i,i=i.replace(y,"\\$&"),t.id!==v&&this.init(),this.parsers[i]||(this.parsers[i]=o(i,"apply"));var r=this.parsers[i],s=r.regex,l=r.map,c=n.match(s),d=!1;if(c&&c.length){var p,h;angular.isDate(a)&&!isNaN(a.getTime())?p={year:a.getFullYear(),month:a.getMonth(),date:a.getDate(),hours:a.getHours(),minutes:a.getMinutes(),seconds:a.getSeconds(),milliseconds:a.getMilliseconds()}:(a&&e.warn("dateparser:","baseDate is not a valid date"),p={year:1900,month:0,date:1,hours:0,minutes:0,seconds:0,milliseconds:0});for(var f=1,m=c.length;m>f;f++){var g=l[f-1];"Z"===g.matcher&&(d=!0),g.apply&&g.apply.call(p,c[f])}var b=d?Date.prototype.setUTCFullYear:Date.prototype.setFullYear,w=d?Date.prototype.setUTCHours:Date.prototype.setHours;return u(p.year,p.month,p.date)&&(!angular.isDate(a)||isNaN(a.getTime())||d?(h=new Date(0),b.call(h,p.year,p.month,p.date),w.call(h,p.hours||0,p.minutes||0,p.seconds||0,p.milliseconds||0)):(h=new Date(a),b.call(h,p.year,p.month,p.date),w.call(h,p.hours,p.minutes,p.seconds,p.milliseconds))),h}},this.toTimezone=p,this.fromTimezone=h,this.timezoneToOffset=f,this.addDateMinutes=m,this.convertTimezoneToLocal=g}]),angular.module("ui.bootstrap.isClass",[]).directive("uibIsClass",["$animate",function(e){var t=/^\s*([\s\S]+?)\s+on\s+([\s\S]+?)\s*$/,n=/^\s*([\s\S]+?)\s+for\s+([\s\S]+?)\s*$/;return{restrict:"A",compile:function(i,a){function r(e,t){l.push(e),c.push({scope:e,element:t}),f.forEach(function(t){o(t,e)}),e.$on("$destroy",s)}function o(t,i){var a=t.match(n),r=i.$eval(a[1]),o=a[2],s=u[t];if(!s){var l=function(t){var n=null;c.some(function(e){var i=e.scope.$eval(p);return i===t?(n=e,!0):void 0}),s.lastActivated!==n&&(s.lastActivated&&e.removeClass(s.lastActivated.element,r),n&&e.addClass(n.element,r),s.lastActivated=n)};u[t]=s={lastActivated:null,scope:i,watchFn:l,compareWithExp:o,watcher:i.$watch(o,l)}}s.watchFn(i.$eval(o))}function s(e){var t=e.targetScope,n=l.indexOf(t);if(l.splice(n,1),c.splice(n,1),l.length){var i=l[0];angular.forEach(u,function(e){e.scope===t&&(e.watcher=i.$watch(e.compareWithExp,e.watchFn),e.scope=i)})}else u={}}var l=[],c=[],u={},d=a.uibIsClass.match(t),p=d[2],h=d[1],f=h.split(",");return r}}}]),angular.module("ui.bootstrap.datepickerPopup",["ui.bootstrap.datepicker","ui.bootstrap.position"]).value("$datepickerPopupLiteralWarning",!0).constant("uibDatepickerPopupConfig",{altInputFormats:[],appendToBody:!1,clearText:"Clear",closeOnDateSelection:!0,closeText:"Done",currentText:"Today",datepickerPopup:"yyyy-MM-dd",datepickerPopupTemplateUrl:"uib/template/datepickerPopup/popup.html",datepickerTemplateUrl:"uib/template/datepicker/datepicker.html",html5Types:{date:"yyyy-MM-dd","datetime-local":"yyyy-MM-ddTHH:mm:ss.sss",month:"yyyy-MM"},onOpenFocus:!0,showButtonBar:!0,placement:"auto bottom-left"}).controller("UibDatepickerPopupController",["$scope","$element","$attrs","$compile","$log","$parse","$window","$document","$rootScope","$uibPosition","dateFilter","uibDateParser","uibDatepickerPopupConfig","$timeout","uibDatepickerConfig","$datepickerPopupLiteralWarning",function(e,t,n,i,a,r,o,s,l,c,u,d,p,h,f,m){function g(t){var n=d.parse(t,A,e.date);if(isNaN(n))for(var i=0;i<F.length;i++)if(n=d.parse(t,F[i],e.date),!isNaN(n))return n;return n}function v(e){if(angular.isNumber(e)&&(e=new Date(e)),!e)return null;if(angular.isDate(e)&&!isNaN(e))return e;if(angular.isString(e)){var t=g(e);if(!isNaN(t))return d.toTimezone(t,I.getOption("timezone"))}return I.getOption("allowInvalid")?e:void 0}function b(e,t){var i=e||t;return!n.ngRequired&&!i||(angular.isNumber(i)&&(i=new Date(i)),!i||(!(!angular.isDate(i)||isNaN(i))||!!angular.isString(i)&&!isNaN(g(i))))}function y(n){if(e.isOpen||!e.disabled){var i=L[0],a=t[0].contains(n.target),r=void 0!==i.contains&&i.contains(n.target);!e.isOpen||a||r||e.$apply(function(){e.isOpen=!1})}}function w(n){27===n.which&&e.isOpen?(n.preventDefault(),n.stopPropagation(),e.$apply(function(){e.isOpen=!1}),t[0].focus()):40!==n.which||e.isOpen||(n.preventDefault(),n.stopPropagation(),e.$apply(function(){e.isOpen=!0}))}function S(){if(e.isOpen){var i=angular.element(L[0].querySelector(".uib-datepicker-popup")),a=n.popupPlacement?n.popupPlacement:p.placement,r=c.positionElements(t,i,a,_);i.css({top:r.top+"px",left:r.left+"px"}),i.hasClass("uib-position-measure")&&i.removeClass("uib-position-measure")}}function k(e){var t;return angular.version.minor<6?(t=angular.isObject(e.$options)?e.$options:{timezone:null},t.getOption=function(e){return t[e]}):t=e.$options,t}var A,x,_,C,T,M,E,P,D,$,I,L,F,O=!1,R=[];this.init=function(a){if($=a,I=k($),x=angular.isDefined(n.closeOnDateSelection)?e.$parent.$eval(n.closeOnDateSelection):p.closeOnDateSelection,_=angular.isDefined(n.datepickerAppendToBody)?e.$parent.$eval(n.datepickerAppendToBody):p.appendToBody,C=angular.isDefined(n.onOpenFocus)?e.$parent.$eval(n.onOpenFocus):p.onOpenFocus,T=angular.isDefined(n.datepickerPopupTemplateUrl)?n.datepickerPopupTemplateUrl:p.datepickerPopupTemplateUrl,M=angular.isDefined(n.datepickerTemplateUrl)?n.datepickerTemplateUrl:p.datepickerTemplateUrl,F=angular.isDefined(n.altInputFormats)?e.$parent.$eval(n.altInputFormats):p.altInputFormats,e.showButtonBar=angular.isDefined(n.showButtonBar)?e.$parent.$eval(n.showButtonBar):p.showButtonBar,p.html5Types[n.type]?(A=p.html5Types[n.type],O=!0):(A=n.uibDatepickerPopup||p.datepickerPopup,n.$observe("uibDatepickerPopup",function(e){var t=e||p.datepickerPopup;if(t!==A&&(A=t,$.$modelValue=null,!A))throw new Error("uibDatepickerPopup must have a date format specified.")})),!A)throw new Error("uibDatepickerPopup must have a date format specified.");if(O&&n.uibDatepickerPopup)throw new Error("HTML5 date input types do not support custom formats.");E=angular.element("<div uib-datepicker-popup-wrap><div uib-datepicker></div></div>"),E.attr({"ng-model":"date","ng-change":"dateSelection(date)","template-url":T}),P=angular.element(E.children()[0]),P.attr("template-url",M),e.datepickerOptions||(e.datepickerOptions={}),O&&"month"===n.type&&(e.datepickerOptions.datepickerMode="month",e.datepickerOptions.minMode="month"),P.attr("datepicker-options","datepickerOptions"),O?$.$formatters.push(function(t){return e.date=d.fromTimezone(t,I.getOption("timezone")),t}):($.$$parserName="date",$.$validators.date=b,$.$parsers.unshift(v),$.$formatters.push(function(t){return $.$isEmpty(t)?(e.date=t,t):(angular.isNumber(t)&&(t=new Date(t)),e.date=d.fromTimezone(t,I.getOption("timezone")),d.filter(e.date,A))})),$.$viewChangeListeners.push(function(){e.date=g($.$viewValue)}),t.on("keydown",w),L=i(E)(e),E.remove(),_?s.find("body").append(L):t.after(L),e.$on("$destroy",function(){for(e.isOpen===!0&&(l.$$phase||e.$apply(function(){e.isOpen=!1})),L.remove(),t.off("keydown",w),s.off("click",y),D&&D.off("scroll",S),angular.element(o).off("resize",S);R.length;)R.shift()()})},e.getText=function(t){return e[t+"Text"]||p[t+"Text"]},e.isDisabled=function(t){"today"===t&&(t=d.fromTimezone(new Date,I.getOption("timezone")));var n={};return angular.forEach(["minDate","maxDate"],function(t){e.datepickerOptions[t]?angular.isDate(e.datepickerOptions[t])?n[t]=new Date(e.datepickerOptions[t]):(m&&a.warn("Literal date support has been deprecated, please switch to date object usage"),n[t]=new Date(u(e.datepickerOptions[t],"medium"))):n[t]=null}),e.datepickerOptions&&n.minDate&&e.compare(t,n.minDate)<0||n.maxDate&&e.compare(t,n.maxDate)>0},e.compare=function(e,t){return new Date(e.getFullYear(),e.getMonth(),e.getDate())-new Date(t.getFullYear(),t.getMonth(),t.getDate())},e.dateSelection=function(n){e.date=n;var i=e.date?d.filter(e.date,A):null;t.val(i),$.$setViewValue(i),x&&(e.isOpen=!1,t[0].focus())},e.keydown=function(n){27===n.which&&(n.stopPropagation(),e.isOpen=!1,t[0].focus())},e.select=function(t,n){if(n.stopPropagation(),"today"===t){var i=new Date;angular.isDate(e.date)?(t=new Date(e.date),t.setFullYear(i.getFullYear(),i.getMonth(),i.getDate())):(t=d.fromTimezone(i,I.getOption("timezone")),t.setHours(0,0,0,0))}e.dateSelection(t)},e.close=function(n){n.stopPropagation(),e.isOpen=!1,t[0].focus()},e.disabled=angular.isDefined(n.disabled)||!1,n.ngDisabled&&R.push(e.$parent.$watch(r(n.ngDisabled),function(t){e.disabled=t})),e.$watch("isOpen",function(i){i?e.disabled?e.isOpen=!1:h(function(){S(),C&&e.$broadcast("uib:datepicker.focus"),s.on("click",y);var i=n.popupPlacement?n.popupPlacement:p.placement;_||c.parsePlacement(i)[2]?(D=D||angular.element(c.scrollParent(t)),D&&D.on("scroll",S)):D=null,angular.element(o).on("resize",S)},0,!1):(s.off("click",y),D&&D.off("scroll",S),angular.element(o).off("resize",S))}),e.$on("uib:datepicker.mode",function(){h(S,0,!1)})}]).directive("uibDatepickerPopup",function(){return{require:["ngModel","uibDatepickerPopup"],controller:"UibDatepickerPopupController",scope:{datepickerOptions:"=?",isOpen:"=?",currentText:"@",clearText:"@",closeText:"@"},link:function(e,t,n,i){var a=i[0],r=i[1];r.init(a)}}}).directive("uibDatepickerPopupWrap",function(){return{restrict:"A",transclude:!0,templateUrl:function(e,t){return t.templateUrl||"uib/template/datepickerPopup/popup.html"}}}),angular.module("ui.bootstrap.position",[]).factory("$uibPosition",["$document","$window",function(e,t){var n,i,a={normal:/(auto|scroll)/,hidden:/(auto|scroll|hidden)/},r={auto:/\s?auto?\s?/i,primary:/^(top|bottom|left|right)$/,secondary:/^(top|bottom|left|right|center)$/,vertical:/^(top|bottom)$/},o=/(HTML|BODY)/;return{getRawNode:function(e){return e.nodeName?e:e[0]||e},parseStyle:function(e){return e=parseFloat(e),isFinite(e)?e:0},offsetParent:function(n){function i(e){return"static"===(t.getComputedStyle(e).position||"static")}n=this.getRawNode(n);for(var a=n.offsetParent||e[0].documentElement;a&&a!==e[0].documentElement&&i(a);)a=a.offsetParent;return a||e[0].documentElement},scrollbarWidth:function(a){if(a){if(angular.isUndefined(i)){var r=e.find("body");r.addClass("uib-position-body-scrollbar-measure"),i=t.innerWidth-r[0].clientWidth,i=isFinite(i)?i:0,r.removeClass("uib-position-body-scrollbar-measure")}return i}if(angular.isUndefined(n)){var o=angular.element('<div class="uib-position-scrollbar-measure"></div>');e.find("body").append(o),n=o[0].offsetWidth-o[0].clientWidth,n=isFinite(n)?n:0,o.remove()}return n},scrollbarPadding:function(e){e=this.getRawNode(e);var n=t.getComputedStyle(e),i=this.parseStyle(n.paddingRight),a=this.parseStyle(n.paddingBottom),r=this.scrollParent(e,!1,!0),s=this.scrollbarWidth(o.test(r.tagName));return{scrollbarWidth:s,widthOverflow:r.scrollWidth>r.clientWidth,right:i+s,originalRight:i,heightOverflow:r.scrollHeight>r.clientHeight,bottom:a+s,originalBottom:a}},isScrollable:function(e,n){e=this.getRawNode(e);var i=n?a.hidden:a.normal,r=t.getComputedStyle(e);return i.test(r.overflow+r.overflowY+r.overflowX)},scrollParent:function(n,i,r){n=this.getRawNode(n);var o=i?a.hidden:a.normal,s=e[0].documentElement,l=t.getComputedStyle(n);if(r&&o.test(l.overflow+l.overflowY+l.overflowX))return n;var c="absolute"===l.position,u=n.parentElement||s;if(u===s||"fixed"===l.position)return s;for(;u.parentElement&&u!==s;){var d=t.getComputedStyle(u);if(c&&"static"!==d.position&&(c=!1),!c&&o.test(d.overflow+d.overflowY+d.overflowX))break;u=u.parentElement}return u},position:function(n,i){n=this.getRawNode(n);var a=this.offset(n);if(i){var r=t.getComputedStyle(n);a.top-=this.parseStyle(r.marginTop),a.left-=this.parseStyle(r.marginLeft)}var o=this.offsetParent(n),s={top:0,left:0};return o!==e[0].documentElement&&(s=this.offset(o),s.top+=o.clientTop-o.scrollTop,s.left+=o.clientLeft-o.scrollLeft),{width:Math.round(angular.isNumber(a.width)?a.width:n.offsetWidth),height:Math.round(angular.isNumber(a.height)?a.height:n.offsetHeight),top:Math.round(a.top-s.top),left:Math.round(a.left-s.left)}},offset:function(n){n=this.getRawNode(n);var i=n.getBoundingClientRect();return{width:Math.round(angular.isNumber(i.width)?i.width:n.offsetWidth),height:Math.round(angular.isNumber(i.height)?i.height:n.offsetHeight),top:Math.round(i.top+(t.pageYOffset||e[0].documentElement.scrollTop)),left:Math.round(i.left+(t.pageXOffset||e[0].documentElement.scrollLeft))}},viewportOffset:function(n,i,a){n=this.getRawNode(n),a=a!==!1;var r=n.getBoundingClientRect(),o={top:0,left:0,bottom:0,right:0},s=i?e[0].documentElement:this.scrollParent(n),l=s.getBoundingClientRect();if(o.top=l.top+s.clientTop,o.left=l.left+s.clientLeft,s===e[0].documentElement&&(o.top+=t.pageYOffset,o.left+=t.pageXOffset),o.bottom=o.top+s.clientHeight,o.right=o.left+s.clientWidth,a){var c=t.getComputedStyle(s);o.top+=this.parseStyle(c.paddingTop),o.bottom-=this.parseStyle(c.paddingBottom),o.left+=this.parseStyle(c.paddingLeft),o.right-=this.parseStyle(c.paddingRight)}return{top:Math.round(r.top-o.top),bottom:Math.round(o.bottom-r.bottom),left:Math.round(r.left-o.left),right:Math.round(o.right-r.right)}},parsePlacement:function(e){var t=r.auto.test(e);return t&&(e=e.replace(r.auto,"")),e=e.split("-"),e[0]=e[0]||"top",r.primary.test(e[0])||(e[0]="top"),e[1]=e[1]||"center",r.secondary.test(e[1])||(e[1]="center"),e[2]=!!t,e},positionElements:function(e,n,i,a){e=this.getRawNode(e),n=this.getRawNode(n);var o=angular.isDefined(n.offsetWidth)?n.offsetWidth:n.prop("offsetWidth"),s=angular.isDefined(n.offsetHeight)?n.offsetHeight:n.prop("offsetHeight");i=this.parsePlacement(i);var l=a?this.offset(e):this.position(e),c={top:0,left:0,placement:""};if(i[2]){var u=this.viewportOffset(e,a),d=t.getComputedStyle(n),p={width:o+Math.round(Math.abs(this.parseStyle(d.marginLeft)+this.parseStyle(d.marginRight))),height:s+Math.round(Math.abs(this.parseStyle(d.marginTop)+this.parseStyle(d.marginBottom)))};if(i[0]="top"===i[0]&&p.height>u.top&&p.height<=u.bottom?"bottom":"bottom"===i[0]&&p.height>u.bottom&&p.height<=u.top?"top":"left"===i[0]&&p.width>u.left&&p.width<=u.right?"right":"right"===i[0]&&p.width>u.right&&p.width<=u.left?"left":i[0],i[1]="top"===i[1]&&p.height-l.height>u.bottom&&p.height-l.height<=u.top?"bottom":"bottom"===i[1]&&p.height-l.height>u.top&&p.height-l.height<=u.bottom?"top":"left"===i[1]&&p.width-l.width>u.right&&p.width-l.width<=u.left?"right":"right"===i[1]&&p.width-l.width>u.left&&p.width-l.width<=u.right?"left":i[1],"center"===i[1])if(r.vertical.test(i[0])){var h=l.width/2-o/2;u.left+h<0&&p.width-l.width<=u.right?i[1]="left":u.right+h<0&&p.width-l.width<=u.left&&(i[1]="right")}else{var f=l.height/2-p.height/2;u.top+f<0&&p.height-l.height<=u.bottom?i[1]="top":u.bottom+f<0&&p.height-l.height<=u.top&&(i[1]="bottom")}}switch(i[0]){case"top":c.top=l.top-s;break;case"bottom":c.top=l.top+l.height;break;case"left":c.left=l.left-o;break;case"right":c.left=l.left+l.width}switch(i[1]){case"top":c.top=l.top;break;case"bottom":c.top=l.top+l.height-s;break;case"left":c.left=l.left;break;case"right":c.left=l.left+l.width-o;break;case"center":r.vertical.test(i[0])?c.left=l.left+l.width/2-o/2:c.top=l.top+l.height/2-s/2}return c.top=Math.round(c.top),c.left=Math.round(c.left),c.placement="center"===i[1]?i[0]:i[0]+"-"+i[1],c},adjustTop:function(e,t,n,i){return-1!==e.indexOf("top")&&n!==i?{top:t.top-i+"px"}:void 0},positionArrow:function(e,n){e=this.getRawNode(e);var i=e.querySelector(".tooltip-inner, .popover-inner");if(i){var a=angular.element(i).hasClass("tooltip-inner"),o=e.querySelector(a?".tooltip-arrow":".arrow");if(o){var s={top:"",bottom:"",left:"",right:""};if(n=this.parsePlacement(n),"center"===n[1])return void angular.element(o).css(s);var l="border-"+n[0]+"-width",c=t.getComputedStyle(o)[l],u="border-";u+=r.vertical.test(n[0])?n[0]+"-"+n[1]:n[1]+"-"+n[0],u+="-radius";var d=t.getComputedStyle(a?i:e)[u];switch(n[0]){case"top":s.bottom=a?"0":"-"+c;break;case"bottom":s.top=a?"0":"-"+c;break;case"left":s.right=a?"0":"-"+c;break;case"right":s.left=a?"0":"-"+c}s[n[1]]=d,angular.element(o).css(s)}}}}}]),angular.module("ui.bootstrap.dropdown",["ui.bootstrap.multiMap","ui.bootstrap.position"]).constant("uibDropdownConfig",{appendToOpenClass:"uib-dropdown-open",openClass:"open"}).service("uibDropdownService",["$document","$rootScope","$$multiMap",function(e,t,n){
var i=null,a=n.createNew();this.isOnlyOpen=function(e,t){var n=a.get(t);if(n){var i=n.reduce(function(t,n){return n.scope===e?n:t},{});if(i)return 1===n.length}return!1},this.open=function(t,n,o){if(i||e.on("click",r),i&&i!==t&&(i.isOpen=!1),i=t,o){var s=a.get(o);if(s){var l=s.map(function(e){return e.scope});-1===l.indexOf(t)&&a.put(o,{scope:t})}else a.put(o,{scope:t})}},this.close=function(t,n,o){if(i===t&&(e.off("click",r),e.off("keydown",this.keybindFilter),i=null),o){var s=a.get(o);if(s){var l=s.reduce(function(e,n){return n.scope===t?n:e},{});l&&a.remove(o,l)}}};var r=function(e){if(i&&i.isOpen&&!(e&&"disabled"===i.getAutoClose()||e&&3===e.which)){var n=i.getToggleElement();if(!(e&&n&&n[0].contains(e.target))){var a=i.getDropdownElement();e&&"outsideClick"===i.getAutoClose()&&a&&a[0].contains(e.target)||(i.focusToggleElement(),i.isOpen=!1,t.$$phase||i.$apply())}}};this.keybindFilter=function(e){if(i){var t=i.getDropdownElement(),n=i.getToggleElement(),a=t&&t[0].contains(e.target),o=n&&n[0].contains(e.target);27===e.which?(e.stopPropagation(),i.focusToggleElement(),r()):i.isKeynavEnabled()&&-1!==[38,40].indexOf(e.which)&&i.isOpen&&(a||o)&&(e.preventDefault(),e.stopPropagation(),i.focusDropdownEntry(e.which))}}}]).controller("UibDropdownController",["$scope","$element","$attrs","$parse","uibDropdownConfig","uibDropdownService","$animate","$uibPosition","$document","$compile","$templateRequest",function(e,t,n,i,a,r,o,s,l,c,u){function d(){t.append(f.dropdownMenu)}var p,h,f=this,m=e.$new(),g=a.appendToOpenClass,v=a.openClass,b=angular.noop,y=n.onToggle?i(n.onToggle):angular.noop,w=!1,S=l.find("body");t.addClass("dropdown"),this.init=function(){n.isOpen&&(h=i(n.isOpen),b=h.assign,e.$watch(h,function(e){m.isOpen=!!e})),w=angular.isDefined(n.keyboardNav)},this.toggle=function(e){return m.isOpen=arguments.length?!!e:!m.isOpen,angular.isFunction(b)&&b(m,m.isOpen),m.isOpen},this.isOpen=function(){return m.isOpen},m.getToggleElement=function(){return f.toggleElement},m.getAutoClose=function(){return n.autoClose||"always"},m.getElement=function(){return t},m.isKeynavEnabled=function(){return w},m.focusDropdownEntry=function(e){var n=f.dropdownMenu?angular.element(f.dropdownMenu).find("a"):t.find("ul").eq(0).find("a");switch(e){case 40:f.selectedOption=angular.isNumber(f.selectedOption)?f.selectedOption===n.length-1?f.selectedOption:f.selectedOption+1:0;break;case 38:f.selectedOption=angular.isNumber(f.selectedOption)?0===f.selectedOption?0:f.selectedOption-1:n.length-1}n[f.selectedOption].focus()},m.getDropdownElement=function(){return f.dropdownMenu},m.focusToggleElement=function(){f.toggleElement&&f.toggleElement[0].focus()},m.$watch("isOpen",function(a,h){var w=null,k=!1;if(angular.isDefined(n.dropdownAppendTo)){var A=i(n.dropdownAppendTo)(m);A&&(w=angular.element(A))}if(angular.isDefined(n.dropdownAppendToBody)){var x=i(n.dropdownAppendToBody)(m);x!==!1&&(k=!0)}if(k&&!w&&(w=S),w&&f.dropdownMenu&&(a?(w.append(f.dropdownMenu),t.on("$destroy",d)):(t.off("$destroy",d),d())),w&&f.dropdownMenu){var _,C,T,M=s.positionElements(t,f.dropdownMenu,"bottom-left",!0),E=0;if(_={top:M.top+"px",display:a?"block":"none"},C=f.dropdownMenu.hasClass("dropdown-menu-right"),C?(_.left="auto",T=s.scrollbarPadding(w),T.heightOverflow&&T.scrollbarWidth&&(E=T.scrollbarWidth),_.right=window.innerWidth-E-(M.left+t.prop("offsetWidth"))+"px"):(_.left=M.left+"px",_.right="auto"),!k){var P=s.offset(w);_.top=M.top-P.top+"px",C?_.right=window.innerWidth-(M.left-P.left+t.prop("offsetWidth"))+"px":_.left=M.left-P.left+"px"}f.dropdownMenu.css(_)}var D=w?w:t,$=w?g:v,I=D.hasClass($),L=r.isOnlyOpen(e,w);if(I===!a){var F;F=w?L?"removeClass":"addClass":a?"addClass":"removeClass",o[F](D,$).then(function(){angular.isDefined(a)&&a!==h&&y(e,{open:!!a})})}if(a)f.dropdownMenuTemplateUrl?u(f.dropdownMenuTemplateUrl).then(function(e){p=m.$new(),c(e.trim())(p,function(e){var t=e;f.dropdownMenu.replaceWith(t),f.dropdownMenu=t,l.on("keydown",r.keybindFilter)})}):l.on("keydown",r.keybindFilter),m.focusToggleElement(),r.open(m,t,w);else{if(r.close(m,t,w),f.dropdownMenuTemplateUrl){p&&p.$destroy();var O=angular.element('<ul class="dropdown-menu"></ul>');f.dropdownMenu.replaceWith(O),f.dropdownMenu=O}f.selectedOption=null}angular.isFunction(b)&&b(e,a)})}]).directive("uibDropdown",function(){return{controller:"UibDropdownController",link:function(e,t,n,i){i.init()}}}).directive("uibDropdownMenu",function(){return{restrict:"A",require:"?^uibDropdown",link:function(e,t,n,i){if(i&&!angular.isDefined(n.dropdownNested)){t.addClass("dropdown-menu");var a=n.templateUrl;a&&(i.dropdownMenuTemplateUrl=a),i.dropdownMenu||(i.dropdownMenu=t)}}}}).directive("uibDropdownToggle",function(){return{require:"?^uibDropdown",link:function(e,t,n,i){if(i){t.addClass("dropdown-toggle"),i.toggleElement=t;var a=function(a){a.preventDefault(),t.hasClass("disabled")||n.disabled||e.$apply(function(){i.toggle()})};t.on("click",a),t.attr({"aria-haspopup":!0,"aria-expanded":!1}),e.$watch(i.isOpen,function(e){t.attr("aria-expanded",!!e)}),e.$on("$destroy",function(){t.off("click",a)})}}}}),angular.module("ui.bootstrap.multiMap",[]).factory("$$multiMap",function(){return{createNew:function(){var e={};return{entries:function(){return Object.keys(e).map(function(t){return{key:t,value:e[t]}})},get:function(t){return e[t]},hasKey:function(t){return!!e[t]},keys:function(){return Object.keys(e)},put:function(t,n){e[t]||(e[t]=[]),e[t].push(n)},remove:function(t,n){var i=e[t];if(i){var a=i.indexOf(n);-1!==a&&i.splice(a,1),i.length||delete e[t]}}}}}}),angular.module("ui.bootstrap.modal",["ui.bootstrap.multiMap","ui.bootstrap.stackedMap","ui.bootstrap.position"]).provider("$uibResolve",function(){var e=this;this.resolver=null,this.setResolver=function(e){this.resolver=e},this.$get=["$injector","$q",function(t,n){var i=e.resolver?t.get(e.resolver):null;return{resolve:function(e,a,r,o){if(i)return i.resolve(e,a,r,o);var s=[];return angular.forEach(e,function(e){s.push(angular.isFunction(e)||angular.isArray(e)?n.resolve(t.invoke(e)):angular.isString(e)?n.resolve(t.get(e)):n.resolve(e))}),n.all(s).then(function(t){var n={},i=0;return angular.forEach(e,function(e,a){n[a]=t[i++]}),n})}}}]}).directive("uibModalBackdrop",["$animate","$injector","$uibModalStack",function(e,t,n){function i(t,i,a){a.modalInClass&&(e.addClass(i,a.modalInClass),t.$on(n.NOW_CLOSING_EVENT,function(n,r){var o=r();t.modalOptions.animation?e.removeClass(i,a.modalInClass).then(o):o()}))}return{restrict:"A",compile:function(e,t){return e.addClass(t.backdropClass),i}}}]).directive("uibModalWindow",["$uibModalStack","$q","$animateCss","$document",function(e,t,n,i){return{scope:{index:"@"},restrict:"A",transclude:!0,templateUrl:function(e,t){return t.templateUrl||"uib/template/modal/window.html"},link:function(a,r,o){r.addClass(o.windowTopClass||""),a.size=o.size,a.close=function(t){var n=e.getTop();n&&n.value.backdrop&&"static"!==n.value.backdrop&&t.target===t.currentTarget&&(t.preventDefault(),t.stopPropagation(),e.dismiss(n.key,"backdrop click"))},r.on("click",a.close),a.$isRendered=!0;var s=t.defer();a.$$postDigest(function(){s.resolve()}),s.promise.then(function(){var s=null;o.modalInClass&&(s=n(r,{addClass:o.modalInClass}).start(),a.$on(e.NOW_CLOSING_EVENT,function(e,t){var i=t();n(r,{removeClass:o.modalInClass}).start().then(i)})),t.when(s).then(function(){var t=e.getTop();if(t&&e.modalRendered(t.key),!i[0].activeElement||!r[0].contains(i[0].activeElement)){var n=r[0].querySelector("[autofocus]");n?n.focus():r[0].focus()}})})}}}]).directive("uibModalAnimationClass",function(){return{compile:function(e,t){t.modalAnimation&&e.addClass(t.uibModalAnimationClass)}}}).directive("uibModalTransclude",["$animate",function(e){return{link:function(t,n,i,a,r){r(t.$parent,function(t){n.empty(),e.enter(t,n)})}}}]).factory("$uibModalStack",["$animate","$animateCss","$document","$compile","$rootScope","$q","$$multiMap","$$stackedMap","$uibPosition",function(e,t,n,i,a,r,o,s,l){function c(e){var t="-";return e.replace(P,function(e,n){return(n?t:"")+e.toLowerCase()})}function u(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)}function d(){for(var e=-1,t=A.keys(),n=0;n<t.length;n++)A.get(t[n]).value.backdrop&&(e=n);return e>-1&&C>e&&(e=C),e}function p(e,t){var n=A.get(e).value,i=n.appendTo;A.remove(e),T=A.top(),T&&(C=parseInt(T.value.modalDomEl.attr("index"),10)),m(n.modalDomEl,n.modalScope,function(){var t=n.openedClass||k;x.remove(t,e);var a=x.hasKey(t);i.toggleClass(t,a),!a&&S&&S.heightOverflow&&S.scrollbarWidth&&(i.css(S.originalRight?{paddingRight:S.originalRight+"px"}:{paddingRight:""}),S=null),h(!0)},n.closedDeferred),f(),t&&t.focus?t.focus():i.focus&&i.focus()}function h(e){var t;A.length()>0&&(t=A.top().value,t.modalDomEl.toggleClass(t.windowTopClass||"",e))}function f(){if(y&&-1===d()){var e=w;m(y,w,function(){e=null}),y=void 0,w=void 0}}function m(t,n,i,a){function o(){o.done||(o.done=!0,e.leave(t).then(function(){i&&i(),t.remove(),a&&a.resolve()}),n.$destroy())}var s,l=null,c=function(){return s||(s=r.defer(),l=s.promise),function(){s.resolve()}};return n.$broadcast(_.NOW_CLOSING_EVENT,c),r.when(l).then(o)}function g(e){if(e.isDefaultPrevented())return e;var t=A.top();if(t)switch(e.which){case 27:t.value.keyboard&&(e.preventDefault(),a.$apply(function(){_.dismiss(t.key,"escape key press")}));break;case 9:var n=_.loadFocusElementList(t),i=!1;e.shiftKey?(_.isFocusInFirstItem(e,n)||_.isModalFocused(e,t))&&(i=_.focusLastFocusableElement(n)):_.isFocusInLastItem(e,n)&&(i=_.focusFirstFocusableElement(n)),i&&(e.preventDefault(),e.stopPropagation())}}function v(e,t,n){return!e.value.modalScope.$broadcast("modal.closing",t,n).defaultPrevented}function b(){Array.prototype.forEach.call(document.querySelectorAll("["+M+"]"),function(e){var t=parseInt(e.getAttribute(M),10),n=t-1;e.setAttribute(M,n),n||(e.removeAttribute(M),e.removeAttribute("aria-hidden"))})}var y,w,S,k="modal-open",A=s.createNew(),x=o.createNew(),_={NOW_CLOSING_EVENT:"modal.stack.now-closing"},C=0,T=null,M="data-bootstrap-modal-aria-hidden-count",E="a[href], area[href], input:not([disabled]):not([tabindex='-1']), button:not([disabled]):not([tabindex='-1']),select:not([disabled]):not([tabindex='-1']), textarea:not([disabled]):not([tabindex='-1']), iframe, object, embed, *[tabindex]:not([tabindex='-1']), *[contenteditable=true]",P=/[A-Z]/g;return a.$watch(d,function(e){w&&(w.index=e)}),n.on("keydown",g),a.$on("$destroy",function(){n.off("keydown",g)}),_.open=function(t,r){function o(e){function t(e){var t=e.parent()?e.parent().children():[];return Array.prototype.filter.call(t,function(t){return t!==e[0]})}if(e&&"BODY"!==e[0].tagName)return t(e).forEach(function(e){var t="true"===e.getAttribute("aria-hidden"),n=parseInt(e.getAttribute(M),10);n||(n=t?1:0),e.setAttribute(M,n+1),e.setAttribute("aria-hidden","true")}),o(e.parent())}var s=n[0].activeElement,u=r.openedClass||k;h(!1),T=A.top(),A.add(t,{deferred:r.deferred,renderDeferred:r.renderDeferred,closedDeferred:r.closedDeferred,modalScope:r.scope,backdrop:r.backdrop,keyboard:r.keyboard,openedClass:r.openedClass,windowTopClass:r.windowTopClass,animation:r.animation,appendTo:r.appendTo}),x.put(u,t);var p=r.appendTo,f=d();f>=0&&!y&&(w=a.$new(!0),w.modalOptions=r,w.index=f,y=angular.element('<div uib-modal-backdrop="modal-backdrop"></div>'),y.attr({class:"modal-backdrop","ng-style":"{'z-index': 1040 + (index && 1 || 0) + index*10}","uib-modal-animation-class":"fade","modal-in-class":"in"}),r.backdropClass&&y.addClass(r.backdropClass),r.animation&&y.attr("modal-animation","true"),i(y)(w),e.enter(y,p),l.isScrollable(p)&&(S=l.scrollbarPadding(p),S.heightOverflow&&S.scrollbarWidth&&p.css({paddingRight:S.right+"px"})));var m;r.component?(m=document.createElement(c(r.component.name)),m=angular.element(m),m.attr({resolve:"$resolve","modal-instance":"$uibModalInstance",close:"$close($value)",dismiss:"$dismiss($value)"})):m=r.content,C=T?parseInt(T.value.modalDomEl.attr("index"),10)+1:0;var g=angular.element('<div uib-modal-window="modal-window"></div>');g.attr({class:"modal","template-url":r.windowTemplateUrl,"window-top-class":r.windowTopClass,role:"dialog","aria-labelledby":r.ariaLabelledBy,"aria-describedby":r.ariaDescribedBy,size:r.size,index:C,animate:"animate","ng-style":"{'z-index': 1050 + $$topModalIndex*10, display: 'block'}",tabindex:-1,"uib-modal-animation-class":"fade","modal-in-class":"in"}).append(m),r.windowClass&&g.addClass(r.windowClass),r.animation&&g.attr("modal-animation","true"),p.addClass(u),r.scope&&(r.scope.$$topModalIndex=C),e.enter(i(g)(r.scope),p),A.top().value.modalDomEl=g,A.top().value.modalOpener=s,o(g)},_.close=function(e,t){var n=A.get(e);return b(),n&&v(n,t,!0)?(n.value.modalScope.$$uibDestructionScheduled=!0,n.value.deferred.resolve(t),p(e,n.value.modalOpener),!0):!n},_.dismiss=function(e,t){var n=A.get(e);return b(),n&&v(n,t,!1)?(n.value.modalScope.$$uibDestructionScheduled=!0,n.value.deferred.reject(t),p(e,n.value.modalOpener),!0):!n},_.dismissAll=function(e){for(var t=this.getTop();t&&this.dismiss(t.key,e);)t=this.getTop()},_.getTop=function(){return A.top()},_.modalRendered=function(e){var t=A.get(e);t&&t.value.renderDeferred.resolve()},_.focusFirstFocusableElement=function(e){return e.length>0&&(e[0].focus(),!0)},_.focusLastFocusableElement=function(e){return e.length>0&&(e[e.length-1].focus(),!0)},_.isModalFocused=function(e,t){if(e&&t){var n=t.value.modalDomEl;if(n&&n.length)return(e.target||e.srcElement)===n[0]}return!1},_.isFocusInFirstItem=function(e,t){return t.length>0&&(e.target||e.srcElement)===t[0]},_.isFocusInLastItem=function(e,t){return t.length>0&&(e.target||e.srcElement)===t[t.length-1]},_.loadFocusElementList=function(e){if(e){var t=e.value.modalDomEl;if(t&&t.length){var n=t[0].querySelectorAll(E);return n?Array.prototype.filter.call(n,function(e){return u(e)}):n}}},_}]).provider("$uibModal",function(){var e={options:{animation:!0,backdrop:!0,keyboard:!0},$get:["$rootScope","$q","$document","$templateRequest","$controller","$uibResolve","$uibModalStack",function(t,n,i,a,r,o,s){function l(e){return e.template?n.when(e.template):a(angular.isFunction(e.templateUrl)?e.templateUrl():e.templateUrl)}var c={},u=null;return c.getPromiseChain=function(){return u},c.open=function(a){function c(){return g}var d=n.defer(),p=n.defer(),h=n.defer(),f=n.defer(),m={result:d.promise,opened:p.promise,closed:h.promise,rendered:f.promise,close:function(e){return s.close(m,e)},dismiss:function(e){return s.dismiss(m,e)}};if(a=angular.extend({},e.options,a),a.resolve=a.resolve||{},a.appendTo=a.appendTo||i.find("body").eq(0),!a.appendTo.length)throw new Error("appendTo element not found. Make sure that the element passed is in DOM.");if(!a.component&&!a.template&&!a.templateUrl)throw new Error("One of component or template or templateUrl options is required.");var g;g=a.component?n.when(o.resolve(a.resolve,{},null,null)):n.all([l(a),o.resolve(a.resolve,{},null,null)]);var v;return v=u=n.all([u]).then(c,c).then(function(e){function n(t,n,i,a){t.$scope=o,t.$scope.$resolve={},i?t.$scope.$uibModalInstance=m:t.$uibModalInstance=m;var r=n?e[1]:e;angular.forEach(r,function(e,n){a&&(t[n]=e),t.$scope.$resolve[n]=e})}var i=a.scope||t,o=i.$new();o.$close=m.close,o.$dismiss=m.dismiss,o.$on("$destroy",function(){o.$$uibDestructionScheduled||o.$dismiss("$uibUnscheduledDestruction")});var l,c,u={scope:o,deferred:d,renderDeferred:f,closedDeferred:h,animation:a.animation,backdrop:a.backdrop,keyboard:a.keyboard,backdropClass:a.backdropClass,windowTopClass:a.windowTopClass,windowClass:a.windowClass,windowTemplateUrl:a.windowTemplateUrl,ariaLabelledBy:a.ariaLabelledBy,ariaDescribedBy:a.ariaDescribedBy,size:a.size,openedClass:a.openedClass,appendTo:a.appendTo},g={},v={};a.component?(n(g,!1,!0,!1),g.name=a.component,u.component=g):a.controller&&(n(v,!0,!1,!0),c=r(a.controller,v,!0,a.controllerAs),a.controllerAs&&a.bindToController&&(l=c.instance,l.$close=o.$close,l.$dismiss=o.$dismiss,angular.extend(l,{$resolve:v.$scope.$resolve},i)),l=c(),angular.isFunction(l.$onInit)&&l.$onInit()),a.component||(u.content=e[0]),s.open(m,u),p.resolve(!0)},function(e){p.reject(e),d.reject(e)}).finally(function(){u===v&&(u=null)}),m},c}]};return e}),angular.module("ui.bootstrap.stackedMap",[]).factory("$$stackedMap",function(){return{createNew:function(){var e=[];return{add:function(t,n){e.push({key:t,value:n})},get:function(t){for(var n=0;n<e.length;n++)if(t===e[n].key)return e[n]},keys:function(){for(var t=[],n=0;n<e.length;n++)t.push(e[n].key);return t},top:function(){return e[e.length-1]},remove:function(t){for(var n=-1,i=0;i<e.length;i++)if(t===e[i].key){n=i;break}return e.splice(n,1)[0]},removeTop:function(){return e.pop()},length:function(){return e.length}}}}}),angular.module("ui.bootstrap.typeahead",["ui.bootstrap.debounce","ui.bootstrap.position"]).factory("uibTypeaheadParser",["$parse",function(e){var t=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w\d]*))\s+in\s+([\s\S]+?)$/;return{parse:function(n){var i=n.match(t);if(!i)throw new Error('Expected typeahead specification in form of "_modelValue_ (as _label_)? for _item_ in _collection_" but got "'+n+'".');return{itemName:i[3],source:e(i[4]),viewMapper:e(i[2]||i[1]),modelMapper:e(i[1])}}}}]).controller("UibTypeaheadController",["$scope","$element","$attrs","$compile","$parse","$q","$timeout","$document","$window","$rootScope","$$debounce","$uibPosition","uibTypeaheadParser",function(e,t,n,i,a,r,o,s,l,c,u,d,p){function h(){B.moveInProgress||(B.moveInProgress=!0,B.$digest()),J()}function f(){B.position=D?d.offset(t):d.position(t),B.position.top+=t.prop("offsetHeight")}function m(e){var t;return angular.version.minor<6?(t=e.$options||{},t.getOption=function(e){return t[e]}):t=e.$options,t}var g,v,b=[9,13,27,38,40],y=200,w=e.$eval(n.typeaheadMinLength);w||0===w||(w=1),e.$watch(n.typeaheadMinLength,function(e){w=e||0===e?e:1});var S=e.$eval(n.typeaheadWaitMs)||0,k=e.$eval(n.typeaheadEditable)!==!1;e.$watch(n.typeaheadEditable,function(e){k=e!==!1});var A,x,_=a(n.typeaheadLoading).assign||angular.noop,C=n.typeaheadShouldSelect?a(n.typeaheadShouldSelect):function(e,t){var n=t.$event;return 13===n.which||9===n.which},T=a(n.typeaheadOnSelect),M=!!angular.isDefined(n.typeaheadSelectOnBlur)&&e.$eval(n.typeaheadSelectOnBlur),E=a(n.typeaheadNoResults).assign||angular.noop,P=n.typeaheadInputFormatter?a(n.typeaheadInputFormatter):void 0,D=!!n.typeaheadAppendToBody&&e.$eval(n.typeaheadAppendToBody),$=n.typeaheadAppendTo?e.$eval(n.typeaheadAppendTo):null,I=e.$eval(n.typeaheadFocusFirst)!==!1,L=!!n.typeaheadSelectOnExact&&e.$eval(n.typeaheadSelectOnExact),F=a(n.typeaheadIsOpen).assign||angular.noop,O=e.$eval(n.typeaheadShowHint)||!1,R=a(n.ngModel),N=a(n.ngModel+"($$$p)"),z=function(t,n){return angular.isFunction(R(e))&&v.getOption("getterSetter")?N(t,{$$$p:n}):R.assign(t,n)},U=p.parse(n.uibTypeahead),B=e.$new(),q=e.$on("$destroy",function(){B.$destroy()});B.$on("$destroy",q);var H="typeahead-"+B.$id+"-"+Math.floor(1e4*Math.random());t.attr({"aria-autocomplete":"list","aria-expanded":!1,"aria-owns":H});var W,G;O&&(W=angular.element("<div></div>"),W.css("position","relative"),t.after(W),G=t.clone(),G.attr("placeholder",""),G.attr("tabindex","-1"),G.val(""),G.css({position:"absolute",top:"0px",left:"0px","border-color":"transparent","box-shadow":"none",opacity:1,background:"none 0% 0% / auto repeat scroll padding-box border-box rgb(255, 255, 255)",color:"#999"}),t.css({position:"relative","vertical-align":"top","background-color":"transparent"}),G.attr("id")&&G.removeAttr("id"),W.append(G),G.after(t));var j=angular.element("<div uib-typeahead-popup></div>");j.attr({id:H,matches:"matches",active:"activeIdx",select:"select(activeIdx, evt)","move-in-progress":"moveInProgress",query:"query",position:"position","assign-is-open":"assignIsOpen(isOpen)",debounce:"debounceUpdate"}),angular.isDefined(n.typeaheadTemplateUrl)&&j.attr("template-url",n.typeaheadTemplateUrl),angular.isDefined(n.typeaheadPopupTemplateUrl)&&j.attr("popup-template-url",n.typeaheadPopupTemplateUrl);var V=function(){O&&G.val("")},Y=function(){B.matches=[],B.activeIdx=-1,t.attr("aria-expanded",!1),V()},K=function(e){return H+"-option-"+e};B.$watch("activeIdx",function(e){0>e?t.removeAttr("aria-activedescendant"):t.attr("aria-activedescendant",K(e))});var X=function(e,t){return!!(B.matches.length>t&&e)&&e.toUpperCase()===B.matches[t].label.toUpperCase()},Q=function(n,i){var a={$viewValue:n};_(e,!0),E(e,!1),r.when(U.source(e,a)).then(function(r){var o=n===g.$viewValue;if(o&&A)if(r&&r.length>0){B.activeIdx=I?0:-1,E(e,!1),B.matches.length=0;for(var s=0;s<r.length;s++)a[U.itemName]=r[s],B.matches.push({id:K(s),label:U.viewMapper(B,a),model:r[s]});if(B.query=n,f(),t.attr("aria-expanded",!0),L&&1===B.matches.length&&X(n,0)&&(angular.isNumber(B.debounceUpdate)||angular.isObject(B.debounceUpdate)?u(function(){B.select(0,i)},angular.isNumber(B.debounceUpdate)?B.debounceUpdate:B.debounceUpdate.default):B.select(0,i)),O){var l=B.matches[0].label;G.val(angular.isString(n)&&n.length>0&&l.slice(0,n.length).toUpperCase()===n.toUpperCase()?n+l.slice(n.length):"")}}else Y(),E(e,!0);o&&_(e,!1)},function(){Y(),_(e,!1),E(e,!0)})};D&&(angular.element(l).on("resize",h),s.find("body").on("scroll",h));var J=u(function(){B.matches.length&&f(),B.moveInProgress=!1},y);B.moveInProgress=!1,B.query=void 0;var Z,ee=function(e){Z=o(function(){Q(e)},S)},te=function(){Z&&o.cancel(Z)};Y(),B.assignIsOpen=function(t){F(e,t)},B.select=function(i,a){var r,s,l={};x=!0,l[U.itemName]=s=B.matches[i].model,r=U.modelMapper(e,l),z(e,r),g.$setValidity("editable",!0),g.$setValidity("parse",!0),T(e,{$item:s,$model:r,$label:U.viewMapper(e,l),$event:a}),Y(),B.$eval(n.typeaheadFocusOnSelect)!==!1&&o(function(){t[0].focus()},0,!1)},t.on("keydown",function(t){if(0!==B.matches.length&&-1!==b.indexOf(t.which)){var n=C(e,{$event:t});if(-1===B.activeIdx&&n||9===t.which&&t.shiftKey)return Y(),void B.$digest();t.preventDefault();var i;switch(t.which){case 27:t.stopPropagation(),Y(),e.$digest();break;case 38:B.activeIdx=(B.activeIdx>0?B.activeIdx:B.matches.length)-1,B.$digest(),i=j[0].querySelectorAll(".uib-typeahead-match")[B.activeIdx],i.parentNode.scrollTop=i.offsetTop;break;case 40:B.activeIdx=(B.activeIdx+1)%B.matches.length,B.$digest(),i=j[0].querySelectorAll(".uib-typeahead-match")[B.activeIdx],i.parentNode.scrollTop=i.offsetTop;break;default:n&&B.$apply(function(){angular.isNumber(B.debounceUpdate)||angular.isObject(B.debounceUpdate)?u(function(){B.select(B.activeIdx,t)},angular.isNumber(B.debounceUpdate)?B.debounceUpdate:B.debounceUpdate.default):B.select(B.activeIdx,t)})}}}),t.on("focus",function(e){A=!0,0!==w||g.$viewValue||o(function(){Q(g.$viewValue,e)},0)}),t.on("blur",function(e){M&&B.matches.length&&-1!==B.activeIdx&&!x&&(x=!0,B.$apply(function(){angular.isObject(B.debounceUpdate)&&angular.isNumber(B.debounceUpdate.blur)?u(function(){B.select(B.activeIdx,e)},B.debounceUpdate.blur):B.select(B.activeIdx,e)})),!k&&g.$error.editable&&(g.$setViewValue(),B.$apply(function(){g.$setValidity("editable",!0),g.$setValidity("parse",!0)}),t.val("")),A=!1,x=!1});var ne=function(n){t[0]!==n.target&&3!==n.which&&0!==B.matches.length&&(Y(),c.$$phase||e.$digest())};s.on("click",ne),e.$on("$destroy",function(){s.off("click",ne),(D||$)&&ie.remove(),D&&(angular.element(l).off("resize",h),s.find("body").off("scroll",h)),j.remove(),O&&W.remove()});var ie=i(j)(B);D?s.find("body").append(ie):$?angular.element($).eq(0).append(ie):t.after(ie),this.init=function(t){g=t,v=m(g),B.debounceUpdate=a(v.getOption("debounce"))(e),g.$parsers.unshift(function(t){return A=!0,0===w||t&&t.length>=w?S>0?(te(),ee(t)):Q(t):(_(e,!1),te(),Y()),k?t:t?void g.$setValidity("editable",!1):(g.$setValidity("editable",!0),null)}),g.$formatters.push(function(t){var n,i,a={};return k||g.$setValidity("editable",!0),P?(a.$model=t,P(e,a)):(a[U.itemName]=t,n=U.viewMapper(e,a),a[U.itemName]=void 0,i=U.viewMapper(e,a),n!==i?n:t)})}}]).directive("uibTypeahead",function(){return{controller:"UibTypeaheadController",require:["ngModel","uibTypeahead"],link:function(e,t,n,i){i[1].init(i[0])}}}).directive("uibTypeaheadPopup",["$$debounce",function(e){return{scope:{matches:"=",query:"=",active:"=",position:"&",moveInProgress:"=",select:"&",assignIsOpen:"&",debounce:"&"},replace:!0,templateUrl:function(e,t){return t.popupTemplateUrl||"uib/template/typeahead/typeahead-popup.html"},link:function(t,n,i){t.templateUrl=i.templateUrl,t.isOpen=function(){var e=t.matches.length>0;return t.assignIsOpen({isOpen:e}),e},t.isActive=function(e){return t.active===e},t.selectActive=function(e){t.active=e},t.selectMatch=function(n,i){var a=t.debounce();angular.isNumber(a)||angular.isObject(a)?e(function(){t.select({activeIdx:n,evt:i})},angular.isNumber(a)?a:a.default):t.select({activeIdx:n,evt:i})}}}}]).directive("uibTypeaheadMatch",["$templateRequest","$compile","$parse",function(e,t,n){return{scope:{index:"=",match:"=",query:"="},link:function(i,a,r){var o=n(r.templateUrl)(i.$parent)||"uib/template/typeahead/typeahead-match.html";e(o).then(function(e){var n=angular.element(e.trim());a.replaceWith(n),t(n)(i)})}}}]).filter("uibTypeaheadHighlight",["$sce","$injector","$log",function(e,t,n){function i(e){return e.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")}function a(e){return/<.*>/g.test(e)}var r;return r=t.has("$sanitize"),function(t,o){return!r&&a(t)&&n.warn("Unsafe use of typeahead please use ngSanitize"),t=o?(""+t).replace(new RegExp(i(o),"gi"),"<strong>$&</strong>"):t,r||(t=e.trustAsHtml(t)),t}}]),angular.module("ui.bootstrap.debounce",[]).factory("$$debounce",["$timeout",function(e){return function(t,n){var i;return function(){var a=this,r=Array.prototype.slice.call(arguments);i&&e.cancel(i),i=e(function(){t.apply(a,r)},n)}}}]),angular.module("ui.bootstrap.tabs",[]).controller("UibTabsetController",["$scope",function(e){function t(e){for(var t=0;t<i.tabs.length;t++)if(i.tabs[t].index===e)return t}var n,i=this;i.tabs=[],i.select=function(e,r){if(!a){var o=t(n),s=i.tabs[o];if(s){if(s.tab.onDeselect({$event:r,$selectedIndex:e}),r&&r.isDefaultPrevented())return;s.tab.active=!1}var l=i.tabs[e];l?(l.tab.onSelect({$event:r}),l.tab.active=!0,i.active=l.index,n=l.index):!l&&angular.isDefined(n)&&(i.active=null,n=null)}},i.addTab=function(e){if(i.tabs.push({tab:e,index:e.index}),i.tabs.sort(function(e,t){return e.index>t.index?1:e.index<t.index?-1:0}),e.index===i.active||!angular.isDefined(i.active)&&1===i.tabs.length){var n=t(e.index);i.select(n)}},i.removeTab=function(e){for(var t,n=0;n<i.tabs.length;n++)if(i.tabs[n].tab===e){t=n;break}if(i.tabs[t].index===i.active){var a=t===i.tabs.length-1?t-1:t+1%i.tabs.length;i.select(a)}i.tabs.splice(t,1)},e.$watch("tabset.active",function(e){angular.isDefined(e)&&e!==n&&i.select(t(e))});var a;e.$on("$destroy",function(){a=!0})}]).directive("uibTabset",function(){return{transclude:!0,replace:!0,scope:{},bindToController:{active:"=?",type:"@"},controller:"UibTabsetController",controllerAs:"tabset",templateUrl:function(e,t){return t.templateUrl||"uib/template/tabs/tabset.html"},link:function(e,t,n){e.vertical=!!angular.isDefined(n.vertical)&&e.$parent.$eval(n.vertical),e.justified=!!angular.isDefined(n.justified)&&e.$parent.$eval(n.justified)}}}).directive("uibTab",["$parse",function(e){return{require:"^uibTabset",replace:!0,templateUrl:function(e,t){return t.templateUrl||"uib/template/tabs/tab.html"},transclude:!0,scope:{heading:"@",index:"=?",classes:"@?",onSelect:"&select",onDeselect:"&deselect"},controller:function(){},controllerAs:"tab",link:function(t,n,i,a,r){t.disabled=!1,i.disable&&t.$parent.$watch(e(i.disable),function(e){t.disabled=!!e}),angular.isUndefined(i.index)&&(t.index=a.tabs&&a.tabs.length?Math.max.apply(null,a.tabs.map(function(e){return e.index}))+1:0),angular.isUndefined(i.classes)&&(t.classes=""),t.select=function(e){if(!t.disabled){for(var n,i=0;i<a.tabs.length;i++)if(a.tabs[i].tab===t){n=i;break}a.select(n,e)}},a.addTab(t),t.$on("$destroy",function(){a.removeTab(t)}),t.$transcludeFn=r}}}]).directive("uibTabHeadingTransclude",function(){return{restrict:"A",require:"^uibTab",link:function(e,t){e.$watch("headingElement",function(e){e&&(t.html(""),t.append(e))})}}}).directive("uibTabContentTransclude",function(){function e(e){return e.tagName&&(e.hasAttribute("uib-tab-heading")||e.hasAttribute("data-uib-tab-heading")||e.hasAttribute("x-uib-tab-heading")||"uib-tab-heading"===e.tagName.toLowerCase()||"data-uib-tab-heading"===e.tagName.toLowerCase()||"x-uib-tab-heading"===e.tagName.toLowerCase()||"uib:tab-heading"===e.tagName.toLowerCase())}return{restrict:"A",require:"^uibTabset",link:function(t,n,i){var a=t.$eval(i.uibTabContentTransclude).tab;a.$transcludeFn(a.$parent,function(t){angular.forEach(t,function(t){e(t)?a.headingElement=t:n.append(t)})})}}}),angular.module("uib/template/datepicker/datepicker.html",[]).run(["$templateCache",function(e){e.put("uib/template/datepicker/datepicker.html",'<div ng-switch="datepickerMode">\n  <div uib-daypicker ng-switch-when="day" tabindex="0" class="uib-daypicker"></div>\n  <div uib-monthpicker ng-switch-when="month" tabindex="0" class="uib-monthpicker"></div>\n  <div uib-yearpicker ng-switch-when="year" tabindex="0" class="uib-yearpicker"></div>\n</div>\n')}]),angular.module("uib/template/datepicker/day.html",[]).run(["$templateCache",function(e){e.put("uib/template/datepicker/day.html",'<table role="grid" aria-labelledby="{{::uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left uib-left" ng-click="move(-1)" tabindex="-1"><i aria-hidden="true" class="glyphicon glyphicon-chevron-left"></i><span class="sr-only">previous</span></button></th>\n      <th colspan="{{::5 + showWeeks}}"><button id="{{::uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm uib-title" ng-click="toggleMode()" ng-disabled="datepickerMode === maxMode" tabindex="-1"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right uib-right" ng-click="move(1)" tabindex="-1"><i aria-hidden="true" class="glyphicon glyphicon-chevron-right"></i><span class="sr-only">next</span></button></th>\n    </tr>\n    <tr>\n      <th ng-if="showWeeks" class="text-center"></th>\n      <th ng-repeat="label in ::labels track by $index" class="text-center"><small aria-label="{{::label.full}}">{{::label.abbr}}</small></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr class="uib-weeks" ng-repeat="row in rows track by $index" role="row">\n      <td ng-if="showWeeks" class="text-center h6"><em>{{ weekNumbers[$index] }}</em></td>\n      <td ng-repeat="dt in row" class="uib-day text-center" role="gridcell"\n        id="{{::dt.uid}}"\n        ng-class="::dt.customClass">\n        <button type="button" class="btn btn-default btn-sm"\n          uib-is-class="\n            \'btn-info\' for selectedDt,\n            \'active\' for activeDt\n            on dt"\n          ng-click="select(dt.date)"\n          ng-disabled="::dt.disabled"\n          tabindex="-1"><span ng-class="::{\'text-muted\': dt.secondary, \'text-info\': dt.current}">{{::dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("uib/template/datepicker/month.html",[]).run(["$templateCache",function(e){e.put("uib/template/datepicker/month.html",'<table role="grid" aria-labelledby="{{::uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left uib-left" ng-click="move(-1)" tabindex="-1"><i aria-hidden="true" class="glyphicon glyphicon-chevron-left"></i><span class="sr-only">previous</span></button></th>\n      <th colspan="{{::yearHeaderColspan}}"><button id="{{::uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm uib-title" ng-click="toggleMode()" ng-disabled="datepickerMode === maxMode" tabindex="-1"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right uib-right" ng-click="move(1)" tabindex="-1"><i aria-hidden="true" class="glyphicon glyphicon-chevron-right"></i><span class="sr-only">next</span></i></button></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr class="uib-months" ng-repeat="row in rows track by $index" role="row">\n      <td ng-repeat="dt in row" class="uib-month text-center" role="gridcell"\n        id="{{::dt.uid}}"\n        ng-class="::dt.customClass">\n        <button type="button" class="btn btn-default"\n          uib-is-class="\n            \'btn-info\' for selectedDt,\n            \'active\' for activeDt\n            on dt"\n          ng-click="select(dt.date)"\n          ng-disabled="::dt.disabled"\n          tabindex="-1"><span ng-class="::{\'text-info\': dt.current}">{{::dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n');
}]),angular.module("uib/template/datepicker/year.html",[]).run(["$templateCache",function(e){e.put("uib/template/datepicker/year.html",'<table role="grid" aria-labelledby="{{::uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left uib-left" ng-click="move(-1)" tabindex="-1"><i aria-hidden="true" class="glyphicon glyphicon-chevron-left"></i><span class="sr-only">previous</span></button></th>\n      <th colspan="{{::columns - 2}}"><button id="{{::uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm uib-title" ng-click="toggleMode()" ng-disabled="datepickerMode === maxMode" tabindex="-1"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right uib-right" ng-click="move(1)" tabindex="-1"><i aria-hidden="true" class="glyphicon glyphicon-chevron-right"></i><span class="sr-only">next</span></button></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr class="uib-years" ng-repeat="row in rows track by $index" role="row">\n      <td ng-repeat="dt in row" class="uib-year text-center" role="gridcell"\n        id="{{::dt.uid}}"\n        ng-class="::dt.customClass">\n        <button type="button" class="btn btn-default"\n          uib-is-class="\n            \'btn-info\' for selectedDt,\n            \'active\' for activeDt\n            on dt"\n          ng-click="select(dt.date)"\n          ng-disabled="::dt.disabled"\n          tabindex="-1"><span ng-class="::{\'text-info\': dt.current}">{{::dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("uib/template/datepickerPopup/popup.html",[]).run(["$templateCache",function(e){e.put("uib/template/datepickerPopup/popup.html",'<ul role="presentation" class="uib-datepicker-popup dropdown-menu uib-position-measure" dropdown-nested ng-if="isOpen" ng-keydown="keydown($event)" ng-click="$event.stopPropagation()">\n  <li ng-transclude></li>\n  <li ng-if="showButtonBar" class="uib-button-bar">\n    <span class="btn-group pull-left">\n      <button type="button" class="btn btn-sm btn-info uib-datepicker-current" ng-click="select(\'today\', $event)" ng-disabled="isDisabled(\'today\')">{{ getText(\'current\') }}</button>\n      <button type="button" class="btn btn-sm btn-danger uib-clear" ng-click="select(null, $event)">{{ getText(\'clear\') }}</button>\n    </span>\n    <button type="button" class="btn btn-sm btn-success pull-right uib-close" ng-click="close($event)">{{ getText(\'close\') }}</button>\n  </li>\n</ul>\n')}]),angular.module("uib/template/modal/window.html",[]).run(["$templateCache",function(e){e.put("uib/template/modal/window.html","<div class=\"modal-dialog {{size ? 'modal-' + size : ''}}\"><div class=\"modal-content\" uib-modal-transclude></div></div>\n")}]),angular.module("uib/template/typeahead/typeahead-match.html",[]).run(["$templateCache",function(e){e.put("uib/template/typeahead/typeahead-match.html",'<a href\n   tabindex="-1"\n   ng-bind-html="match.label | uibTypeaheadHighlight:query"\n   ng-attr-title="{{match.label}}"></a>\n')}]),angular.module("uib/template/typeahead/typeahead-popup.html",[]).run(["$templateCache",function(e){e.put("uib/template/typeahead/typeahead-popup.html",'<ul class="dropdown-menu" ng-show="isOpen() && !moveInProgress" ng-style="{top: position().top+\'px\', left: position().left+\'px\'}" role="listbox" aria-hidden="{{!isOpen()}}">\n    <li class="uib-typeahead-match" ng-repeat="match in matches track by $index" ng-class="{active: isActive($index) }" ng-mouseenter="selectActive($index)" ng-click="selectMatch($index, $event)" role="option" id="{{::match.id}}">\n        <div uib-typeahead-match index="$index" match="match" query="query" template-url="templateUrl"></div>\n    </li>\n</ul>\n')}]),angular.module("uib/template/tabs/tab.html",[]).run(["$templateCache",function(e){e.put("uib/template/tabs/tab.html",'<li ng-class="[{active: active, disabled: disabled}, classes]" class="uib-tab nav-item">\n  <a href ng-click="select($event)" class="nav-link" uib-tab-heading-transclude>{{heading}}</a>\n</li>\n')}]),angular.module("uib/template/tabs/tabset.html",[]).run(["$templateCache",function(e){e.put("uib/template/tabs/tabset.html",'<div>\n  <ul class="nav nav-{{tabset.type || \'tabs\'}}" ng-class="{\'nav-stacked\': vertical, \'nav-justified\': justified}" ng-transclude></ul>\n  <div class="tab-content">\n    <div class="tab-pane"\n         ng-repeat="tab in tabset.tabs"\n         ng-class="{active: tabset.active === tab.index}"\n         uib-tab-content-transclude="tab">\n    </div>\n  </div>\n</div>\n')}]),angular.module("ui.bootstrap.datepicker").run(function(){!angular.$$csp().noInlineStyle&&!angular.$$uibDatepickerCss&&angular.element(document).find("head").prepend('<style type="text/css">.uib-datepicker .uib-title{width:100%;}.uib-day button,.uib-month button,.uib-year button{min-width:100%;}.uib-left,.uib-right{width:100%}</style>'),angular.$$uibDatepickerCss=!0}),angular.module("ui.bootstrap.datepickerPopup").run(function(){!angular.$$csp().noInlineStyle&&!angular.$$uibDatepickerpopupCss&&angular.element(document).find("head").prepend('<style type="text/css">.uib-datepicker-popup.dropdown-menu{display:block;float:none;margin:0;}.uib-button-bar{padding:10px 9px 2px;}</style>'),angular.$$uibDatepickerpopupCss=!0}),angular.module("ui.bootstrap.position").run(function(){!angular.$$csp().noInlineStyle&&!angular.$$uibPositionCss&&angular.element(document).find("head").prepend('<style type="text/css">.uib-position-measure{display:block !important;visibility:hidden !important;position:absolute !important;top:-9999px !important;left:-9999px !important;}.uib-position-scrollbar-measure{position:absolute !important;top:-9999px !important;width:50px !important;height:50px !important;overflow:scroll !important;}.uib-position-body-scrollbar-measure{overflow:scroll !important;}</style>'),angular.$$uibPositionCss=!0}),angular.module("ui.bootstrap.typeahead").run(function(){!angular.$$csp().noInlineStyle&&!angular.$$uibTypeaheadCss&&angular.element(document).find("head").prepend('<style type="text/css">[uib-typeahead-popup].dropdown-menu{display:block;}</style>'),angular.$$uibTypeaheadCss=!0}),function(){function e(e){function t(t,n,i,a,r,o){for(;r>=0&&o>r;r+=e){var s=a?a[r]:r;i=n(i,t[s],s,t)}return i}return function(n,i,a,r){i=y(i,r,4);var o=!C(n)&&b.keys(n),s=(o||n).length,l=e>0?0:s-1;return arguments.length<3&&(a=n[o?o[l]:l],l+=e),t(n,i,a,o,l,s)}}function t(e){return function(t,n,i){n=w(n,i);for(var a=_(t),r=e>0?0:a-1;r>=0&&a>r;r+=e)if(n(t[r],r,t))return r;return-1}}function n(e,t,n){return function(i,a,r){var o=0,s=_(i);if("number"==typeof r)e>0?o=r>=0?r:Math.max(r+s,o):s=r>=0?Math.min(r+1,s):r+s+1;else if(n&&r&&s)return r=n(i,a),i[r]===a?r:-1;if(a!==a)return r=t(u.call(i,o,s),b.isNaN),r>=0?r+o:-1;for(r=e>0?o:s-1;r>=0&&s>r;r+=e)if(i[r]===a)return r;return-1}}function i(e,t){var n=D.length,i=e.constructor,a=b.isFunction(i)&&i.prototype||s,r="constructor";for(b.has(e,r)&&!b.contains(t,r)&&t.push(r);n--;)r=D[n],r in e&&e[r]!==a[r]&&!b.contains(t,r)&&t.push(r)}var a=this,r=a._,o=Array.prototype,s=Object.prototype,l=Function.prototype,c=o.push,u=o.slice,d=s.toString,p=s.hasOwnProperty,h=Array.isArray,f=Object.keys,m=l.bind,g=Object.create,v=function(){},b=function(e){return e instanceof b?e:this instanceof b?void(this._wrapped=e):new b(e)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=b),exports._=b):a._=b,b.VERSION="1.8.3";var y=function(e,t,n){if(void 0===t)return e;switch(null==n?3:n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,i){return e.call(t,n,i)};case 3:return function(n,i,a){return e.call(t,n,i,a)};case 4:return function(n,i,a,r){return e.call(t,n,i,a,r)}}return function(){return e.apply(t,arguments)}},w=function(e,t,n){return null==e?b.identity:b.isFunction(e)?y(e,t,n):b.isObject(e)?b.matcher(e):b.property(e)};b.iteratee=function(e,t){return w(e,t,1/0)};var S=function(e,t){return function(n){var i=arguments.length;if(2>i||null==n)return n;for(var a=1;i>a;a++)for(var r=arguments[a],o=e(r),s=o.length,l=0;s>l;l++){var c=o[l];t&&void 0!==n[c]||(n[c]=r[c])}return n}},k=function(e){if(!b.isObject(e))return{};if(g)return g(e);v.prototype=e;var t=new v;return v.prototype=null,t},A=function(e){return function(t){return null==t?void 0:t[e]}},x=Math.pow(2,53)-1,_=A("length"),C=function(e){var t=_(e);return"number"==typeof t&&t>=0&&x>=t};b.each=b.forEach=function(e,t,n){t=y(t,n);var i,a;if(C(e))for(i=0,a=e.length;a>i;i++)t(e[i],i,e);else{var r=b.keys(e);for(i=0,a=r.length;a>i;i++)t(e[r[i]],r[i],e)}return e},b.map=b.collect=function(e,t,n){t=w(t,n);for(var i=!C(e)&&b.keys(e),a=(i||e).length,r=Array(a),o=0;a>o;o++){var s=i?i[o]:o;r[o]=t(e[s],s,e)}return r},b.reduce=b.foldl=b.inject=e(1),b.reduceRight=b.foldr=e(-1),b.find=b.detect=function(e,t,n){var i;return i=C(e)?b.findIndex(e,t,n):b.findKey(e,t,n),void 0!==i&&i!==-1?e[i]:void 0},b.filter=b.select=function(e,t,n){var i=[];return t=w(t,n),b.each(e,function(e,n,a){t(e,n,a)&&i.push(e)}),i},b.reject=function(e,t,n){return b.filter(e,b.negate(w(t)),n)},b.every=b.all=function(e,t,n){t=w(t,n);for(var i=!C(e)&&b.keys(e),a=(i||e).length,r=0;a>r;r++){var o=i?i[r]:r;if(!t(e[o],o,e))return!1}return!0},b.some=b.any=function(e,t,n){t=w(t,n);for(var i=!C(e)&&b.keys(e),a=(i||e).length,r=0;a>r;r++){var o=i?i[r]:r;if(t(e[o],o,e))return!0}return!1},b.contains=b.includes=b.include=function(e,t,n,i){return C(e)||(e=b.values(e)),("number"!=typeof n||i)&&(n=0),b.indexOf(e,t,n)>=0},b.invoke=function(e,t){var n=u.call(arguments,2),i=b.isFunction(t);return b.map(e,function(e){var a=i?t:e[t];return null==a?a:a.apply(e,n)})},b.pluck=function(e,t){return b.map(e,b.property(t))},b.where=function(e,t){return b.filter(e,b.matcher(t))},b.findWhere=function(e,t){return b.find(e,b.matcher(t))},b.max=function(e,t,n){var i,a,r=-1/0,o=-1/0;if(null==t&&null!=e){e=C(e)?e:b.values(e);for(var s=0,l=e.length;l>s;s++)i=e[s],i>r&&(r=i)}else t=w(t,n),b.each(e,function(e,n,i){a=t(e,n,i),(a>o||a===-1/0&&r===-1/0)&&(r=e,o=a)});return r},b.min=function(e,t,n){var i,a,r=1/0,o=1/0;if(null==t&&null!=e){e=C(e)?e:b.values(e);for(var s=0,l=e.length;l>s;s++)i=e[s],r>i&&(r=i)}else t=w(t,n),b.each(e,function(e,n,i){a=t(e,n,i),(o>a||1/0===a&&1/0===r)&&(r=e,o=a)});return r},b.shuffle=function(e){for(var t,n=C(e)?e:b.values(e),i=n.length,a=Array(i),r=0;i>r;r++)t=b.random(0,r),t!==r&&(a[r]=a[t]),a[t]=n[r];return a},b.sample=function(e,t,n){return null==t||n?(C(e)||(e=b.values(e)),e[b.random(e.length-1)]):b.shuffle(e).slice(0,Math.max(0,t))},b.sortBy=function(e,t,n){return t=w(t,n),b.pluck(b.map(e,function(e,n,i){return{value:e,index:n,criteria:t(e,n,i)}}).sort(function(e,t){var n=e.criteria,i=t.criteria;if(n!==i){if(n>i||void 0===n)return 1;if(i>n||void 0===i)return-1}return e.index-t.index}),"value")};var T=function(e){return function(t,n,i){var a={};return n=w(n,i),b.each(t,function(i,r){var o=n(i,r,t);e(a,i,o)}),a}};b.groupBy=T(function(e,t,n){b.has(e,n)?e[n].push(t):e[n]=[t]}),b.indexBy=T(function(e,t,n){e[n]=t}),b.countBy=T(function(e,t,n){b.has(e,n)?e[n]++:e[n]=1}),b.toArray=function(e){return e?b.isArray(e)?u.call(e):C(e)?b.map(e,b.identity):b.values(e):[]},b.size=function(e){return null==e?0:C(e)?e.length:b.keys(e).length},b.partition=function(e,t,n){t=w(t,n);var i=[],a=[];return b.each(e,function(e,n,r){(t(e,n,r)?i:a).push(e)}),[i,a]},b.first=b.head=b.take=function(e,t,n){return null==e?void 0:null==t||n?e[0]:b.initial(e,e.length-t)},b.initial=function(e,t,n){return u.call(e,0,Math.max(0,e.length-(null==t||n?1:t)))},b.last=function(e,t,n){return null==e?void 0:null==t||n?e[e.length-1]:b.rest(e,Math.max(0,e.length-t))},b.rest=b.tail=b.drop=function(e,t,n){return u.call(e,null==t||n?1:t)},b.compact=function(e){return b.filter(e,b.identity)};var M=function(e,t,n,i){for(var a=[],r=0,o=i||0,s=_(e);s>o;o++){var l=e[o];if(C(l)&&(b.isArray(l)||b.isArguments(l))){t||(l=M(l,t,n));var c=0,u=l.length;for(a.length+=u;u>c;)a[r++]=l[c++]}else n||(a[r++]=l)}return a};b.flatten=function(e,t){return M(e,t,!1)},b.without=function(e){return b.difference(e,u.call(arguments,1))},b.uniq=b.unique=function(e,t,n,i){b.isBoolean(t)||(i=n,n=t,t=!1),null!=n&&(n=w(n,i));for(var a=[],r=[],o=0,s=_(e);s>o;o++){var l=e[o],c=n?n(l,o,e):l;t?(o&&r===c||a.push(l),r=c):n?b.contains(r,c)||(r.push(c),a.push(l)):b.contains(a,l)||a.push(l)}return a},b.union=function(){return b.uniq(M(arguments,!0,!0))},b.intersection=function(e){for(var t=[],n=arguments.length,i=0,a=_(e);a>i;i++){var r=e[i];if(!b.contains(t,r)){for(var o=1;n>o&&b.contains(arguments[o],r);o++);o===n&&t.push(r)}}return t},b.difference=function(e){var t=M(arguments,!0,!0,1);return b.filter(e,function(e){return!b.contains(t,e)})},b.zip=function(){return b.unzip(arguments)},b.unzip=function(e){for(var t=e&&b.max(e,_).length||0,n=Array(t),i=0;t>i;i++)n[i]=b.pluck(e,i);return n},b.object=function(e,t){for(var n={},i=0,a=_(e);a>i;i++)t?n[e[i]]=t[i]:n[e[i][0]]=e[i][1];return n},b.findIndex=t(1),b.findLastIndex=t(-1),b.sortedIndex=function(e,t,n,i){n=w(n,i,1);for(var a=n(t),r=0,o=_(e);o>r;){var s=Math.floor((r+o)/2);n(e[s])<a?r=s+1:o=s}return r},b.indexOf=n(1,b.findIndex,b.sortedIndex),b.lastIndexOf=n(-1,b.findLastIndex),b.range=function(e,t,n){null==t&&(t=e||0,e=0),n=n||1;for(var i=Math.max(Math.ceil((t-e)/n),0),a=Array(i),r=0;i>r;r++,e+=n)a[r]=e;return a};var E=function(e,t,n,i,a){if(!(i instanceof t))return e.apply(n,a);var r=k(e.prototype),o=e.apply(r,a);return b.isObject(o)?o:r};b.bind=function(e,t){if(m&&e.bind===m)return m.apply(e,u.call(arguments,1));if(!b.isFunction(e))throw new TypeError("Bind must be called on a function");var n=u.call(arguments,2),i=function(){return E(e,i,t,this,n.concat(u.call(arguments)))};return i},b.partial=function(e){var t=u.call(arguments,1),n=function(){for(var i=0,a=t.length,r=Array(a),o=0;a>o;o++)r[o]=t[o]===b?arguments[i++]:t[o];for(;i<arguments.length;)r.push(arguments[i++]);return E(e,n,this,this,r)};return n},b.bindAll=function(e){var t,n,i=arguments.length;if(1>=i)throw new Error("bindAll must be passed function names");for(t=1;i>t;t++)n=arguments[t],e[n]=b.bind(e[n],e);return e},b.memoize=function(e,t){var n=function(i){var a=n.cache,r=""+(t?t.apply(this,arguments):i);return b.has(a,r)||(a[r]=e.apply(this,arguments)),a[r]};return n.cache={},n},b.delay=function(e,t){var n=u.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},b.defer=b.partial(b.delay,b,1),b.throttle=function(e,t,n){var i,a,r,o=null,s=0;n||(n={});var l=function(){s=n.leading===!1?0:b.now(),o=null,r=e.apply(i,a),o||(i=a=null)};return function(){var c=b.now();s||n.leading!==!1||(s=c);var u=t-(c-s);return i=this,a=arguments,0>=u||u>t?(o&&(clearTimeout(o),o=null),s=c,r=e.apply(i,a),o||(i=a=null)):o||n.trailing===!1||(o=setTimeout(l,u)),r}},b.debounce=function(e,t,n){var i,a,r,o,s,l=function(){var c=b.now()-o;t>c&&c>=0?i=setTimeout(l,t-c):(i=null,n||(s=e.apply(r,a),i||(r=a=null)))};return function(){r=this,a=arguments,o=b.now();var c=n&&!i;return i||(i=setTimeout(l,t)),c&&(s=e.apply(r,a),r=a=null),s}},b.wrap=function(e,t){return b.partial(t,e)},b.negate=function(e){return function(){return!e.apply(this,arguments)}},b.compose=function(){var e=arguments,t=e.length-1;return function(){for(var n=t,i=e[t].apply(this,arguments);n--;)i=e[n].call(this,i);return i}},b.after=function(e,t){return function(){return--e<1?t.apply(this,arguments):void 0}},b.before=function(e,t){var n;return function(){return--e>0&&(n=t.apply(this,arguments)),1>=e&&(t=null),n}},b.once=b.partial(b.before,2);var P=!{toString:null}.propertyIsEnumerable("toString"),D=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];b.keys=function(e){if(!b.isObject(e))return[];if(f)return f(e);var t=[];for(var n in e)b.has(e,n)&&t.push(n);return P&&i(e,t),t},b.allKeys=function(e){if(!b.isObject(e))return[];var t=[];for(var n in e)t.push(n);return P&&i(e,t),t},b.values=function(e){for(var t=b.keys(e),n=t.length,i=Array(n),a=0;n>a;a++)i[a]=e[t[a]];return i},b.mapObject=function(e,t,n){t=w(t,n);for(var i,a=b.keys(e),r=a.length,o={},s=0;r>s;s++)i=a[s],o[i]=t(e[i],i,e);return o},b.pairs=function(e){for(var t=b.keys(e),n=t.length,i=Array(n),a=0;n>a;a++)i[a]=[t[a],e[t[a]]];return i},b.invert=function(e){for(var t={},n=b.keys(e),i=0,a=n.length;a>i;i++)t[e[n[i]]]=n[i];return t},b.functions=b.methods=function(e){var t=[];for(var n in e)b.isFunction(e[n])&&t.push(n);return t.sort()},b.extend=S(b.allKeys),b.extendOwn=b.assign=S(b.keys),b.findKey=function(e,t,n){t=w(t,n);for(var i,a=b.keys(e),r=0,o=a.length;o>r;r++)if(i=a[r],t(e[i],i,e))return i},b.pick=function(e,t,n){var i,a,r={},o=e;if(null==o)return r;b.isFunction(t)?(a=b.allKeys(o),i=y(t,n)):(a=M(arguments,!1,!1,1),i=function(e,t,n){return t in n},o=Object(o));for(var s=0,l=a.length;l>s;s++){var c=a[s],u=o[c];i(u,c,o)&&(r[c]=u)}return r},b.omit=function(e,t,n){if(b.isFunction(t))t=b.negate(t);else{var i=b.map(M(arguments,!1,!1,1),String);t=function(e,t){return!b.contains(i,t)}}return b.pick(e,t,n)},b.defaults=S(b.allKeys,!0),b.create=function(e,t){var n=k(e);return t&&b.extendOwn(n,t),n},b.clone=function(e){return b.isObject(e)?b.isArray(e)?e.slice():b.extend({},e):e},b.tap=function(e,t){return t(e),e},b.isMatch=function(e,t){var n=b.keys(t),i=n.length;if(null==e)return!i;for(var a=Object(e),r=0;i>r;r++){var o=n[r];if(t[o]!==a[o]||!(o in a))return!1}return!0};var $=function(e,t,n,i){if(e===t)return 0!==e||1/e===1/t;if(null==e||null==t)return e===t;e instanceof b&&(e=e._wrapped),t instanceof b&&(t=t._wrapped);var a=d.call(e);if(a!==d.call(t))return!1;switch(a){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!==+e?+t!==+t:0===+e?1/+e===1/t:+e===+t;case"[object Date]":case"[object Boolean]":return+e===+t}var r="[object Array]"===a;if(!r){if("object"!=typeof e||"object"!=typeof t)return!1;var o=e.constructor,s=t.constructor;if(o!==s&&!(b.isFunction(o)&&o instanceof o&&b.isFunction(s)&&s instanceof s)&&"constructor"in e&&"constructor"in t)return!1}n=n||[],i=i||[];for(var l=n.length;l--;)if(n[l]===e)return i[l]===t;if(n.push(e),i.push(t),r){if(l=e.length,l!==t.length)return!1;for(;l--;)if(!$(e[l],t[l],n,i))return!1}else{var c,u=b.keys(e);if(l=u.length,b.keys(t).length!==l)return!1;for(;l--;)if(c=u[l],!b.has(t,c)||!$(e[c],t[c],n,i))return!1}return n.pop(),i.pop(),!0};b.isEqual=function(e,t){return $(e,t)},b.isEmpty=function(e){return null==e||(C(e)&&(b.isArray(e)||b.isString(e)||b.isArguments(e))?0===e.length:0===b.keys(e).length)},b.isElement=function(e){return!(!e||1!==e.nodeType)},b.isArray=h||function(e){return"[object Array]"===d.call(e)},b.isObject=function(e){var t=typeof e;return"function"===t||"object"===t&&!!e},b.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(e){b["is"+e]=function(t){return d.call(t)==="[object "+e+"]"}}),b.isArguments(arguments)||(b.isArguments=function(e){return b.has(e,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(b.isFunction=function(e){return"function"==typeof e||!1}),b.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},b.isNaN=function(e){return b.isNumber(e)&&e!==+e},b.isBoolean=function(e){return e===!0||e===!1||"[object Boolean]"===d.call(e)},b.isNull=function(e){return null===e},b.isUndefined=function(e){return void 0===e},b.has=function(e,t){return null!=e&&p.call(e,t)},b.noConflict=function(){return a._=r,this},b.identity=function(e){return e},b.constant=function(e){return function(){return e}},b.noop=function(){},b.property=A,b.propertyOf=function(e){return null==e?function(){}:function(t){return e[t]}},b.matcher=b.matches=function(e){return e=b.extendOwn({},e),function(t){return b.isMatch(t,e)}},b.times=function(e,t,n){var i=Array(Math.max(0,e));t=y(t,n,1);for(var a=0;e>a;a++)i[a]=t(a);return i},b.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},b.now=Date.now||function(){return(new Date).getTime()};var I={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},L=b.invert(I),F=function(e){var t=function(t){return e[t]},n="(?:"+b.keys(e).join("|")+")",i=RegExp(n),a=RegExp(n,"g");return function(e){return e=null==e?"":""+e,i.test(e)?e.replace(a,t):e}};b.escape=F(I),b.unescape=F(L),b.result=function(e,t,n){var i=null==e?void 0:e[t];return void 0===i&&(i=n),b.isFunction(i)?i.call(e):i};var O=0;b.uniqueId=function(e){var t=++O+"";return e?e+t:t},b.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var R=/(.)^/,N={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},z=/\\|'|\r|\n|\u2028|\u2029/g,U=function(e){return"\\"+N[e]};b.template=function(e,t,n){!t&&n&&(t=n),t=b.defaults({},t,b.templateSettings);var i=RegExp([(t.escape||R).source,(t.interpolate||R).source,(t.evaluate||R).source].join("|")+"|$","g"),a=0,r="__p+='";e.replace(i,function(t,n,i,o,s){return r+=e.slice(a,s).replace(z,U),a=s+t.length,n?r+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":i?r+="'+\n((__t=("+i+"))==null?'':__t)+\n'":o&&(r+="';\n"+o+"\n__p+='"),t}),r+="';\n",t.variable||(r="with(obj||{}){\n"+r+"}\n"),r="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+r+"return __p;\n";try{var o=new Function(t.variable||"obj","_",r)}catch(e){throw e.source=r,e}var s=function(e){return o.call(this,e,b)},l=t.variable||"obj";return s.source="function("+l+"){\n"+r+"}",s},b.chain=function(e){var t=b(e);return t._chain=!0,t};var B=function(e,t){return e._chain?b(t).chain():t};b.mixin=function(e){b.each(b.functions(e),function(t){var n=b[t]=e[t];b.prototype[t]=function(){var e=[this._wrapped];return c.apply(e,arguments),B(this,n.apply(b,e))}})},b.mixin(b),b.each(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=o[e];b.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),"shift"!==e&&"splice"!==e||0!==n.length||delete n[0],B(this,n)}}),b.each(["concat","join","slice"],function(e){var t=o[e];b.prototype[e]=function(){return B(this,t.apply(this._wrapped,arguments))}}),b.prototype.value=function(){return this._wrapped},b.prototype.valueOf=b.prototype.toJSON=b.prototype.value,b.prototype.toString=function(){return""+this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return b})}.call(this),!function(){function e(e){var t="    ";if(isNaN(parseInt(e)))t=e;else switch(e){case 1:t=" ";break;case 2:t="  ";break;case 3:t="   ";break;case 4:t="    ";break;case 5:t="     ";break;case 6:t="      ";break;case 7:t="       ";break;case 8:t="        ";break;case 9:t="         ";break;case 10:t="          ";break;case 11:t="           ";break;case 12:t="            "}var n=["\n"];for(ix=0;100>ix;ix++)n.push(n[ix]+t);return n}function t(){this.step="    ",this.shift=e(this.step)}function n(e,t){return t-(e.replace(/\(/g,"").length-e.replace(/\)/g,"").length)}function i(e,t){return e.replace(/\s{1,}/g," ").replace(/ AND /gi,"~::~"+t+t+"AND ").replace(/ BETWEEN /gi,"~::~"+t+"BETWEEN ").replace(/ CASE /gi,"~::~"+t+"CASE ").replace(/ ELSE /gi,"~::~"+t+"ELSE ").replace(/ END /gi,"~::~"+t+"END ").replace(/ FROM /gi,"~::~FROM ").replace(/ GROUP\s{1,}BY/gi,"~::~GROUP BY ").replace(/ HAVING /gi,"~::~HAVING ").replace(/ IN /gi," IN ").replace(/ JOIN /gi,"~::~JOIN ").replace(/ CROSS~::~{1,}JOIN /gi,"~::~CROSS JOIN ").replace(/ INNER~::~{1,}JOIN /gi,"~::~INNER JOIN ").replace(/ LEFT~::~{1,}JOIN /gi,"~::~LEFT JOIN ").replace(/ RIGHT~::~{1,}JOIN /gi,"~::~RIGHT JOIN ").replace(/ ON /gi,"~::~"+t+"ON ").replace(/ OR /gi,"~::~"+t+t+"OR ").replace(/ ORDER\s{1,}BY/gi,"~::~ORDER BY ").replace(/ OVER /gi,"~::~"+t+"OVER ").replace(/\(\s{0,}SELECT /gi,"~::~(SELECT ").replace(/\)\s{0,}SELECT /gi,")~::~SELECT ").replace(/ THEN /gi," THEN~::~"+t).replace(/ UNION /gi,"~::~UNION~::~").replace(/ USING /gi,"~::~USING ").replace(/ WHEN /gi,"~::~"+t+"WHEN ").replace(/ WHERE /gi,"~::~WHERE ").replace(/ WITH /gi,"~::~WITH ").replace(/ ALL /gi," ALL ").replace(/ AS /gi," AS ").replace(/ ASC /gi," ASC ").replace(/ DESC /gi," DESC ").replace(/ DISTINCT /gi," DISTINCT ").replace(/ EXISTS /gi," EXISTS ").replace(/ NOT /gi," NOT ").replace(/ NULL /gi," NULL ").replace(/ LIKE /gi," LIKE ").replace(/\s{0,}SELECT /gi,"SELECT ").replace(/\s{0,}UPDATE /gi,"UPDATE ").replace(/ SET /gi," SET ").replace(/~::~{1,}/g,"~::~").split("~::~")}t.prototype.xml=function(t,n){var i=t.replace(/>\s{0,}</g,"><").replace(/</g,"~::~<").replace(/\s*xmlns\:/g,"~::~xmlns:").replace(/\s*xmlns\=/g,"~::~xmlns=").split("~::~"),a=i.length,r=!1,o=0,s="",l=0,c=n?e(n):this.shift;for(l=0;a>l;l++)i[l].search(/<!/)>-1?(s+=c[o]+i[l],r=!0,(i[l].search(/-->/)>-1||i[l].search(/\]>/)>-1||i[l].search(/!DOCTYPE/)>-1)&&(r=!1)):i[l].search(/-->/)>-1||i[l].search(/\]>/)>-1?(s+=i[l],r=!1):/^<\w/.exec(i[l-1])&&/^<\/\w/.exec(i[l])&&/^<[\w:\-\.\,]+/.exec(i[l-1])==/^<\/[\w:\-\.\,]+/.exec(i[l])[0].replace("/","")?(s+=i[l],r||o--):i[l].search(/<\w/)>-1&&-1==i[l].search(/<\//)&&-1==i[l].search(/\/>/)?s=s+=r?i[l]:c[o++]+i[l]:i[l].search(/<\w/)>-1&&i[l].search(/<\//)>-1?s=s+=r?i[l]:c[o]+i[l]:i[l].search(/<\//)>-1?s=s+=r?i[l]:c[--o]+i[l]:i[l].search(/\/>/)>-1?s=s+=r?i[l]:c[o]+i[l]:s+=i[l].search(/<\?/)>-1?c[o]+i[l]:i[l].search(/xmlns\:/)>-1||i[l].search(/xmlns\=/)>-1?c[o]+i[l]:i[l];return"\n"==s[0]?s.slice(1):s},t.prototype.json=function(e,t){var t=t?t:this.step;return"undefined"==typeof JSON?e:"string"==typeof e?JSON.stringify(JSON.parse(e),null,t):"object"==typeof e?JSON.stringify(e,null,t):e},t.prototype.css=function(t,n){var i=t.replace(/\s{1,}/g," ").replace(/\{/g,"{~::~").replace(/\}/g,"~::~}~::~").replace(/\;/g,";~::~").replace(/\/\*/g,"~::~/*").replace(/\*\//g,"*/~::~").replace(/~::~\s{0,}~::~/g,"~::~").split("~::~"),a=i.length,r=0,o="",s=0,l=n?e(n):this.shift;for(s=0;a>s;s++)o+=/\{/.exec(i[s])?l[r++]+i[s]:/\}/.exec(i[s])?l[--r]+i[s]:/\*\\/.exec(i[s])?l[r]+i[s]:l[r]+i[s];return o.replace(/^\n{1,}/,"")},t.prototype.sql=function(t,a){var r=t.replace(/\s{1,}/g," ").replace(/\'/gi,"~::~'").split("~::~"),o=r.length,s=[],l=0,c=this.step,u=0,d="",p=0,h=a?e(a):this.shift;for(p=0;o>p;p++)s=s.concat(p%2?r[p]:i(r[p],c));for(o=s.length,p=0;o>p;p++)u=n(s[p],u),/\s{0,}\s{0,}SELECT\s{0,}/.exec(s[p])&&(s[p]=s[p].replace(/\,/g,",\n"+c+c)),/\s{0,}\s{0,}SET\s{0,}/.exec(s[p])&&(s[p]=s[p].replace(/\,/g,",\n"+c+c)),/\s{0,}\(\s{0,}SELECT\s{0,}/.exec(s[p])?(l++,d+=h[l]+s[p]):/\'/.exec(s[p])?(1>u&&l&&l--,d+=s[p]):(d+=h[l]+s[p],1>u&&l&&l--);return d=d.replace(/^\n{1,}/,"").replace(/\n{1,}/g,"\n")},t.prototype.xmlmin=function(e,t){var n=t?e:e.replace(/\<![ \r\n\t]*(--([^\-]|[\r\n]|-[^\-])*--[ \r\n\t]*)\>/g,"").replace(/[ \r\n\t]{1,}xmlns/g," xmlns");return n.replace(/>\s{0,}</g,"><")},t.prototype.jsonmin=function(e){return"undefined"==typeof JSON?e:JSON.stringify(JSON.parse(e),null,0)},t.prototype.cssmin=function(e,t){var n=t?e:e.replace(/\/\*([^*]|[\r\n]|(\*+([^*\/]|[\r\n])))*\*+\//g,"");return n.replace(/\s{1,}/g," ").replace(/\{\s{1,}/g,"{").replace(/\}\s{1,}/g,"}").replace(/\;\s{1,}/g,";").replace(/\/\*\s{1,}/g,"/*").replace(/\*\/\s{1,}/g,"*/")},t.prototype.sqlmin=function(e){return e.replace(/\s{1,}/g," ").replace(/\s{1,}\(/,"(").replace(/\s{1,}\)/,")")},window.vkbeautify=new t}();var utils=function(){function e(e,t,n){if(n){var i=new Date;i.setTime(i.getTime()+60*n*1e3);var a="; expires="+i.toGMTString()}else var a="";document.cookie=e+"="+t+a+"; path=/"}function t(e){return document.cookie.length>0&&(c_start=document.cookie.indexOf(e+"="),c_start!=-1)?(c_start=c_start+e.length+1,c_end=document.cookie.indexOf(";",c_start),c_end==-1&&(c_end=document.cookie.length),unescape(document.cookie.substring(c_start,c_end))):""}function n(){return a(window.location.href)}function a(e){var t={};if(e.indexOf("#")==-1)return t;for(var n,i=/\+/g,a=/([^&;=]+)=?([^&;]*)/g,r=function(e){return decodeURIComponent(e.replace(i," "))},o=e.substring(e.indexOf("#")+1);n=a.exec(o);)t[r(n[1])]=r(n[2]);return t}function r(){return o(window.location.href)}function o(e){return e.indexOf("?")==-1?{}:(q=e.substring(e.indexOf("?")+1),q.indexOf("#")>0&&(q=q.substring(0,q.indexOf("#"))),s(q))}function s(e){var t={};if(F(e))return t;for(var n,i=/\+/g,a=/([^&;=]+)=?([^&;]*)/g,r=function(e){return decodeURIComponent(e.replace(i," "))},t={};n=a.exec(e);)t[r(n[1])]=r(n[2]);return t}function l(e,t){return 0==t.length?e:(e+="?",_.each(t,function(t,n){e+=n+"="+t+"&"}),e=e.substring(0,e.length-1))}function c(e,t){return t<=0?"":t>String(e).length?e:String(e).substring(0,t)}function u(e,t){if(t<=0)return"";if(t>String(e).length)return e;var n=String(e).length;return String(e).substring(n,n-t)}function d(e){return!isNaN(parseFloat(e))&&isFinite(e)}function p(e){return 0!=d(e)&&(e=parseFloat(e),e===(0|parseInt(e)))}function h(){return Math.floor(1e7*Math.random()+1)}function f(e,t){for(var n="",i=t;i>0;--i)n+=e[Math.floor(Math.random()*e.length)];return n}function m(e){if("undefined"==typeof e||null==e)return"";var t=e.toString().replace(/[^0-9\.\s]/g,"").trim();return 1==isNaN(t)||""==t.trim()?e:parseFloat(t).toFixed(2)}function g(e){return _.filter(e,function(e){return""!=e.price||""!=e.currency})}function v(e,t){null==t&&(t=read);var n=JSON.parse(localStorage.getItem("permissions")),i=n[e];if(null!=i){var a=i[t];if(null!=a)return Boolean(a)}return!1}function b(){return j(localStorage.getItem("test"))}function y(e){var t=[];return t.push("af-na","af-za","af","ar-ae","ar-bh","ar-dj","ar-dz","ar-eg","ar-eh","ar-er","ar-il","ar-iq","ar-jo","ar-km","ar-kw","ar-lb","ar-ly","ar-ma","ar-mr","ar-om","ar-ps","ar-qa","ar-sa","ar-sd","ar-so","ar-ss","ar-sy","ar-td","ar-tn","ar-ye","ar","az-cyrl-az","az-cyrl","az-latn-az","az-latn","az","bg-bg","bg","bo-cn","bo-in","bo","cs-cz","cs","da-dk","da-gl","da","dav-ke","dav","de-at","de-be","de-ch","de-de","de-li","de-lu","de","el-cy","el-gr","el","en-ag","en-ai","en-as","en-au","en-bb","en-be","en-bm","en-bs","en-bw","en-bz","en-ca","en-cc","en-ck","en-cm","en-cx","en-dg","en-dm","en-dsrt-us","en-dsrt","en-er","en-fj","en-fk","en-fm","en-gb","en-gd","en-gg","en-gh","en-gi","en-gm","en-gu","en-gy","en-hk","en-ie","en-im","en-in","en-io","en-iso","en-je","en-jm","en-ke","en-ki","en-kn","en-ky","en-lc","en-lr","en-ls","en-mg","en-mh","en-mo","en-mp","en-ms","en-mt","en-mu","en-mw","en-na","en-nf","en-ng","en-nr","en-nu","en-nz","en-pg","en-ph","en-pk","en-pn","en-pr","en-pw","en-rw","en-sb","en-sc","en-sd","en-sg","en-sh","en-sl","en-ss","en-sx","en-sz","en-tc","en-tk","en-to","en-tt","en-tv","en-tz","en-ug","en-um","en-us","en-vc","en-vg","en-vi","en-vu","en-ws","en-za","en-zm","en-zw","en","es-ar","es-bo","es-cl","es-co","es-cr","es-cu","es-do","es-ea","es-ec","es-es","es-gq","es-gt","es-hn","es-ic","es-mx","es-ni","es-pa","es-pe","es-ph","es-pr","es-py","es-sv","es-us","es-uy","es-ve","es","et-ee","et","eu-es","eu","fa-af","fa-ir","fa","fi-fi","fi","fil-ph","fil","fr-be","fr-bf","fr-bi","fr-bj","fr-bl","fr-ca","fr-cd","fr-cf","fr-cg","fr-ch","fr-ci","fr-cm","fr-dj","fr-dz","fr-fr","fr-ga","fr-gf","fr-gn","fr-gp","fr-gq","fr-ht","fr-km","fr-lu","fr-ma","fr-mc","fr-mf","fr-mg","fr-ml","fr-mq","fr-mr","fr-mu","fr-nc","fr-ne","fr-pf","fr-pm","fr-re","fr-rw","fr-sc","fr-sn","fr-sy","fr-td","fr-tg","fr-tn","fr-vu","fr-wf","fr-yt","fr","hi-in","hi","hr-ba","hr-hr","hr","hu-hu","hu","hy-am","hy","is-is","is","it-ch","it-it","it-sm","it","ja-jp","ja","ka-ge","ka","kab-dz","kab","kam-ke","kam","kk-cyrl-kz","kk-cyrl","kk","kkj-cm","kkj","kl-gl","kl","kln-ke","kln","km-kh","km","ko-kp","ko-kr","ko","kok-in","kok","lo-la","lo","lt-lt","lt","mg-mg","mg","mgh-mz","mgh","mgo-cm","mgo","mk-mk","mk","mn-cyrl-mn","mn-cyrl","mn","ms-bn","ms-latn-bn","ms-latn-my","ms-latn-sg","ms-latn","ms-my","ms","mt-mt","mt","ne-in","ne-np","ne","nl-aw","nl-be","nl-bq","nl-cw","nl-nl","nl-sr","nl-sx","nl","no-no","no","pl-pl","pl","pt-ao","pt-br","pt-cv","pt-gw","pt-mo","pt-mz","pt-pt","pt-st","pt-tl","pt","ro-md","ro-ro","ro","rof-tz","rof","ru-by","ru-kg","ru-kz","ru-md","ru-ru","ru-ua","ru","shi-latn-ma","shi-latn","shi-tfng-ma","shi-tfng","shi","sk-sk","sk","sl-si","sl","sq-al","sq-mk","sq-xk","sq","sr-cyrl-ba","sr-cyrl-me","sr-cyrl-rs","sr-cyrl-xk","sr-cyrl","sr-latn-ba","sr-latn-me","sr-latn-rs","sr-latn-xk","sr-latn","sr","sv-ax","sv-fi","sv-se","sv","th-th","th","tl","to-to","to","tr-cy","tr-tr","tr","uk-ua","uk","uz-arab-af","uz-arab","uz-cyrl-uz","uz-cyrl","uz-latn-uz","uz-latn","uz","vi-vn","vi","zh-cn","zh-hans-cn","zh-hans-hk","zh-hans-mo","zh-hans-sg","zh-hans","zh-hant-hk","zh-hant-mo","zh-hant-tw","zh-hant","zh-hk","zh-tw","zh"),
t.indexOf(localStorage.getItem("locale"))>=0?localStorage.getItem("locale"):e}function w(e,t){return new Date(e.getTime()+24*t*60*60*1e3)}function S(e,t){return(t-e)/864e5}function k(e){var t=[];if(null!=e)for(var n=e.split(/\n/),i=0;i<n.length;i++)n[i].trim().length>0&&t.push(n[i].trim());return t}function A(e){var t="";return _.each(e,function(e,n){t+=e+"\n"}),t}function x(e,t,n){_.each(e,function(e){e[n]=e[t];delete e[t]})}function C(e){return e.charAt(0).toUpperCase()+e.slice(1)}function T(e){e+=1;var t=e;t=e/20,t=t%1*20,0==t&&(t=20);var n=["#71c73e","#77b7c5","#d54848","#6c42e5","#e8e64e","#dd56e6","#ecad3f","#618b9d","#b68b68","#36a766","#3156be","#00b3ff","#646464","#a946e8","#9d9d9d","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4"];return n[t-1]}function M(e,t){e=String(e).replace(/[^0-9a-f]/gi,""),e.length<6&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]),t=t||0;var n,i,a="#";for(i=0;i<3;i++)n=parseInt(e.substr(2*i,2),16),n=Math.round(Math.min(Math.max(0,n+n*t),255)).toString(16),a+=("00"+n).substr(n.length);return a}function E(e,t){if(null!=e){var n=e.__proto__||e.constructor.prototype;return t in e&&(!(t in n)||n[t]!==e[t])}return!1}function P(e,t){return Math.round(e*t*100)/100}function D(e,t){var n=0;return _.each(e,function(e){E(e,t)&&(n+=e[t])}),n}function $(e){return isNaN(e)?null:Math.round(100*e)/100}function I(){for(var e=arguments.length,t=1;t<e;t++)if(null==arguments[t]||arguments[t]!=arguments[t-1])return!1;return!0}function L(e,t){e.search().on_complete?e.path(e.search().on_complete):e.path(t),e.search(""),e.hash(""),window.scrollTo(0,0)}function F(e){return null==e||void 0==e||(""==e.toString()||null==e.toString().replace(/ /g,""))}function O(e){return F(e)?null:e}function R(e,t){for(i=0;i<t.length;i++)e.push(t[i])}function N(e,t,n){return void 0===n?e.toString():e.replace(new RegExp("["+t+"]","g"),n)}function z(e,t,n){for(var i=[];e;e=e.nextSibling)1==e.nodeType&&e!=t&&(n?n.toUpperCase()==e.nodeName.toUpperCase()&&i.push(e):i.push(e));return i}function U(e,t){return z(e.parentNode.firstChild,e,t)}function B(e,t){var n="object"!=typeof e?JSON.parse(e):e,i="",a=["formatted"],r="";for(var o in n[0])"$"!=o.substring(0,1)&&a.indexOf(o)==-1?r+=o+",":a.push(o);r=r.slice(0,-1),i+=r+"\r\n";for(var s=0;s<n.length;s++){var r="";for(var o in n[s])a.indexOf(o)==-1&&(r+='"'+n[s][o]+'",');r.slice(0,r.length-1),i+=r+"\r\n"}var l="data:text/csv;charset=utf-8,"+escape(i),c=document.createElement("a");c.href=l,c.style="visibility:hidden",c.download=t+".csv",document.body.appendChild(c),c.click(),document.body.removeChild(c)}function H(e,t,n){null==t&&(t=!0);var i="",a=0;if(i+=t?'<table class="table panel table-bordered">':'<table class="table table-bordered" style="margin-bottom: 0">',n&&(i+='<thead class="panel-heading"><tr><th colspan="2">'+n+"</th></tr></thead>"),!W(e))return i+="<tr>",i+="<td>"+e+"</td>",i+="</tr>",i+="</table>";var r=JSON.parse(e);for(var o in r)if(r.hasOwnProperty(o)){if(Array.isArray(r[o])){i+="<tr>",i+='<td colspan="2" style="background-color: #fafafa">'+o+"</td>",i+="</tr>";for(var s in r[o])r.hasOwnProperty(o)&&(i+="<tr>",i+='<td colspan="2">'+H(JSON.stringify(r[o][s]),!1)+"</td>",i+="</tr>");continue}if("object"==typeof r[o]&&null!==r[o]){i+="<tr>",i+='<td colspan="2" style="background-color: #fafafa">'+o+"</td>",i+="</tr>",i+="<tr>",i+='<td colspan="2">'+H(JSON.stringify(r[o]),!1)+"</td>",i+="</tr>";continue}i+="<tr>",i+="<td>"+o+"</td>",i+="<td>"+r[o]+"</td>",i+="</tr>",a++}return i+="</table>"}function W(e){e="string"!=typeof e?JSON.stringify(e):e;try{e=JSON.parse(e)}catch(e){return!1}return"object"==typeof e&&null!==e}function G(e){for(var t in e)e.hasOwnProperty(t)&&("false"===e[t]&&(e[t]=!1),"true"===e[t]&&(e[t]=!0))}function j(e){return"true"==e}function V(e){var t=100*e,n=0;return parseInt(t)!=t&&(n=e.toString().split(".")[1].length-2),n<0?t:(n>20&&(n=20),t=t.toFixed(n))}function Y(e){var t=e/100,n=2;return parseInt(e)!=e&&(n=e.toString().split(".")[1].length+2),n>20&&(n=20),t=t.toFixed(n)}return{setCookie:e,getCookie:t,getPageHashParameters:n,getHashParameters:a,getPageQueryParameters:r,getQueryParameters:o,appendParams:l,left:c,right:u,isValidNumber:d,isValidInteger:p,getRandom:h,getRandomString:f,cleanPrice:m,hasPermission:v,getLocale:y,removeEmptyPrices:g,addDays:w,daysDiff:S,stringToArray:k,arrayToString:A,renameProperty:x,ucaseFirstLetter:C,getColor:T,getRelatedColor:M,stringsToBool:G,stringToBool:j,hasProperty:E,calculateFxAmount:P,areEqual:I,sumProperties:D,roundCurrency:$,redirect:L,isNullOrEmpty:F,pushArray:R,inTestMode:b,emptyToNull:O,parseQueryParameters:s,replaceAll:N,getChildrenElements:z,getSiblingElements:U,jsonToCsvDownload:B,jsonToHtmlTable:H,decimalToPercent:V,percentToDecimal:Y}}();